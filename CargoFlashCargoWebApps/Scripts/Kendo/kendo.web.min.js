!function(e,t){function n(){}function i(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),i=e.substring(1);return"="===n?"+("+i+")+":":"===n?"+e("+i+")+":";"+e+";o+="}function r(e){return e<10?"0"+e:e}function a(e,t){var n,i,r,o;for(n in t)(r=typeof(i=t[n]))===A&&null!==i&&i.constructor!==Array?i instanceof Date?e[n]=new Date(i.getTime()):(o=e[n],e[n]=typeof o===A?o||{}:{},a(e[n],i)):r!==E&&(e[n]=i);return e}function o(e,t,n,i){return typeof e===F&&(b(t)&&(i=t,t=400,n=!1),b(n)&&(i=n,n=!1),typeof t===I&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),h({effects:{},duration:400,reverse:!1,init:k,teardown:k,hide:!1,show:!1},e,{completeCallback:e.complete,complete:k})}function s(t,n,i,r,a){return t.each(function(t,s){(s=e(s)).queue(function(){j.promise(s,o(n,i,r,a))})}),t}function l(e,t,n,i,r,a){return j.transitionPromise(e,t,o(n,i,r,a))}function d(e,t,n,i){return t&&(t=t.split(" "),g(t,function(t,n){e.toggleClass(n,i)})),e}function c(n,i){var r;return 0===i.indexOf("data")&&(i=(i=i.substring(4)).charAt(0).toLowerCase()+i.substring(1)),i=i.replace(ie,"-$1"),r=n.getAttribute("data-"+f.ns+i),null===r?r=t:"null"===r?r=null:"true"===r?r=!0:"false"===r?r=!1:isNaN(parseFloat(r))?te.test(r)&&!ne.test(r)&&(r=e.parseJSON(r)):r=parseFloat(r),r}function u(n,i){var r,a,o={};for(r in i)(a=c(n,r))!==t&&(ee.test(r)&&(a=f.template(e("#"+a).html())),o[r]=a);return o}var p,f=window.kendo=window.kendo||{},h=e.extend,g=e.each,m=e.proxy,v=e.isArray,k=e.noop,b=e.isFunction,_=Math,w=window.JSON||{},y={},x=/%/,C=/\{(\d+)(:[^\}]+)?\}/g,T=/(\d+?)px\s*(\d+?)px\s*(\d+?)px\s*(\d+?)?/i,S="function",F="string",D="number",A="object",H="null",I="boolean",E="undefined",z={},N={},R=[].slice,M=window.Globalize;n.extend=function(e){var t,n,i=function(){},r=this,a=e&&e.init?e.init:function(){r.apply(this,arguments)};i.prototype=r.prototype,n=a.fn=a.prototype=new i;for(t in e)typeof e[t]!==A||e[t]instanceof Array||null===e[t]?n[t]=e[t]:n[t]=h(!0,{},i.prototype[t],e[t]);return n.constructor=a,a.extend=r.extend,a};var O=n.extend({init:function(){this._events={}},bind:function(e,t,n){var i,r,a,o,s=this,l=typeof e===F?[e]:e,d=typeof t===S;for(i=0,r=l.length;i<r;i++)e=l[i],(o=d?t:t[e])&&(n&&(a=o,o=function(){s.unbind(e,o),a.apply(s,arguments)}),(s._events[e]=s._events[e]||[]).push(o));return s},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,i,r,a=this,o=typeof e===F?[e]:e,s=typeof t===S;for(n=0,i=o.length;n<i;n++)e=o[n],(r=s?t:t[e])&&(a._events[e]=a._events[e]||[]).unshift(r);return a},trigger:function(e,t){var n,i,r=this,a=r._events[e],o=!1;if(a)for((t=t||{}).sender=r,t.preventDefault=function(){o=!0},t.isDefaultPrevented=function(){return o},n=0,i=(a=a.slice()).length;n<i;n++)"string"==typeof a[n]&&"select"==e&&0==a[n].indexOf("return ")||a[n].call(r,t);return o},unbind:function(e,t){var n,i,r=this,a=r._events[e];if(a)if(t)for(n=0,i=a.length;n<i;n++)a[n]===t&&a.splice(n,1);else r._events[e]=[];return r}}),P=/^\w+/,L=/\$\{([^}]*)\}/g,B=/\\\}/g,q=/__CURLY__/g,W=/\\#/g,U=/__SHARP__/g;p={paramName:"data",useWithBlock:!0,render:function(e,t){var n,i,r="";for(n=0,i=t.length;n<i;n++)r+=e(t[n]);return r},compile:function(t,n){var r,a,o=h({},this,n),s=o.paramName,l=s.match(P)[0],d=o.useWithBlock,c="var o,e=kendo.htmlEncode;";if(b(t))return 2===t.length?function(n){return t(e,{data:n}).join("")}:t;for(c+=d?"with("+s+"){":"",c+="o=",r=t.replace(B,"__CURLY__").replace(L,"#=e($1)#").replace(q,"}").replace(W,"__SHARP__").split("#"),a=0;a<r.length;a++)c+=i(r[a],a%2==0);c+=d?";}":";",c=(c+="return o;").replace(U,"#");try{return new Function(l,c)}catch(e){throw new Error(f.format("Invalid template:'{0}' Generated code:'{1}'",t,c))}}},function(){function e(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=s[e];return typeof t===F?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(r,o){var s,d,c,u,p,f,h=n,g=o[r];if(g&&typeof g===A&&typeof g.toJSON===S&&(g=g.toJSON(r)),typeof a===S&&(g=a.call(o,r,g)),(f=typeof g)===F)return e(g);if(f===D)return isFinite(g)?String(g):H;if(f===I||f===H)return String(g);if(f===A){if(!g)return H;if(n+=i,p=[],"[object Array]"===l.apply(g)){for(u=g.length,s=0;s<u;s++)p[s]=t(s,g)||H;return c=0===p.length?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+h+"]":"["+p.join(",")+"]",n=h,c}if(a&&typeof a===A)for(u=a.length,s=0;s<u;s++)typeof a[s]===F&&(c=t(d=a[s],g))&&p.push(e(d)+(n?": ":":")+c);else for(d in g)Object.hasOwnProperty.call(g,d)&&(c=t(d,g))&&p.push(e(d)+(n?": ":":")+c);return c=0===p.length?"{}":n?"{\n"+n+p.join(",\n"+n)+"\n"+h+"}":"{"+p.join(",")+"}",n=h,c}}var n,i,a,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l={}.toString;typeof Date.prototype.toJSON!==S&&(Date.prototype.toJSON=function(e){var t=this;return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+r(t.getUTCMonth()+1)+"-"+r(t.getUTCDate())+"T"+r(t.getUTCHours())+":"+r(t.getUTCMinutes())+":"+r(t.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()}),typeof w.stringify!==S&&(w.stringify=function(e,r,o){var s;if(n="",i="",typeof o===D)for(s=0;s<o;s+=1)i+=" ";else typeof o===F&&(i=o);if(a=r,r&&typeof r!==S&&(typeof r!==A||typeof r.length!==D))throw new Error("JSON.stringify");return t("",{"":e})})}(),function(){function n(e){if(e){if(e.numberFormat)return e;if(typeof e===F){var t=f.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function i(e){return e&&(e=n(e)),e||f.cultures.current}function a(e,n,a){var o=(a=i(a)).calendars.standard,l=o.days,d=o.months;return(n=o.patterns[n]||n).replace(s,function(n){var i;return"d"===n?i=e.getDate():"dd"===n?i=r(e.getDate()):"ddd"===n?i=l.namesAbbr[e.getDay()]:"dddd"===n?i=l.names[e.getDay()]:"M"===n?i=e.getMonth()+1:"MM"===n?i=r(e.getMonth()+1):"MMM"===n?i=d.namesAbbr[e.getMonth()]:"MMMM"===n?i=d.names[e.getMonth()]:"yy"===n?i=r(e.getFullYear()%100):"yyyy"===n?i=e.getFullYear():"h"===n?i=e.getHours()%12||12:"hh"===n?i=r(e.getHours()%12||12):"H"===n?i=e.getHours():"HH"===n?i=r(e.getHours()):"m"===n?i=e.getMinutes():"mm"===n?i=r(e.getMinutes()):"s"===n?i=e.getSeconds():"ss"===n?i=r(e.getSeconds()):"f"===n?i=_.floor(e.getMilliseconds()/100):"ff"===n?i=_.floor(e.getMilliseconds()/10):"fff"===n?i=e.getMilliseconds():"tt"===n&&(i=e.getHours()<12?o.AM[0]:o.PM[0]),i!==t?i:n.slice(1,n.length-1)})}function o(e,n,r){var a,o,s,f,m,b,_,w,y,x,C,T,S,F,D,A,H,I,E=(r=i(r)).numberFormat,z=E.groupSize[0],N=E[h],R=E[p],M=E.decimals,O=E.pattern[0],P=[],L=e<0,B=u,q=u,W=-1;if(e===t)return u;if(!isFinite(e))return e;if(!n)return r.name.length?e.toLocaleString():e.toString();if(m=l.exec(n)){if(n=m[1].toLowerCase(),o="c"===n,s="p"===n,(o||s)&&(z=(E=o?E.currency:E.percent).groupSize[0],N=E[h],R=E[p],M=E.decimals,a=E.symbol,O=E.pattern[L?0:1]),(f=m[2])&&(M=+f),"e"===n)return f?e.toExponential(M):e.toExponential();if(s&&(e*=100),e=e.toFixed(M),e=e.split(p),b=e[0],_=e[1],L&&(b=b.substring(1)),q=b,(w=b.length)>=z)for(q=u,y=0;y<w;y++)y>0&&(w-y)%z==0&&(q+=N),q+=b.charAt(y);if(_&&(q+=R+_),"n"===n&&!L)return q;for(e=u,y=0,x=O.length;y<x;y++)e+="n"===(C=O.charAt(y))?q:"$"===C||"%"===C?a:C;return e}if(L&&(e=-e),n=n.split(";"),L&&n[1])n=n[1],S=!0;else if(0===e){if(-1==(n=n[2]||n[0]).indexOf(g)&&-1==n.indexOf(v))return n}else n=n[0];if((n.indexOf("'")>-1||n.indexOf('"')>-1)&&(n=n.replace(d,function(e){return P.push(e),k})),o=-1!=n.indexOf("$"),(s=-1!=n.indexOf("%"))&&(e*=100),(o||s)&&(z=(E=o?E.currency:E.percent).groupSize[0],N=E[h],R=E[p],M=E.decimals,a=E.symbol),(T=n.indexOf(h)>-1)&&(n=n.replace(c,u)),F=n.indexOf(p),x=n.length,-1!=F?(A=n.lastIndexOf(v),D=n.lastIndexOf(g),_=e.toString().split(p)[1]||u,D>A&&_.length>D-A?y=D:-1!=A&&A>=F&&(y=A),y&&(e=e.toFixed(y-F))):e=e.toFixed(0),D=n.indexOf(g),H=A=n.indexOf(v),W=-1==D&&-1!=A?A:-1!=D&&-1==A?D:D>A?A:D,D=n.lastIndexOf(g),A=n.lastIndexOf(v),I=-1==D&&-1!=A?A:-1!=D&&-1==A?D:D>A?D:A,W==x&&(I=W),-1!=W){if(q=e.toString().split(p),b=q[0],_=q[1]||u,w=b.length,_.length,T)if(w===z&&w<F-H)b=N+b;else if(w>z){for(q=u,y=0;y<w;y++)y>0&&(w-y)%z==0&&(q+=N),q+=b.charAt(y);b=q}for(e=n.substring(0,W),L&&!S&&(e+="-"),y=W;y<x;y++){if(C=n.charAt(y),-1==F){if(I-y<w){e+=b;break}}else if(-1!=A&&A<y&&(B=u),F-y<=w&&F-y>-1&&(e+=b,y=F),F===y){e+=(_?R:u)+_,y+=I-F+1;continue}C===v?(e+=C,B=C):C===g&&(e+=B)}if(I>=W&&(e+=n.substring(I+1)),o||s){for(q=u,y=0,x=e.length;y<x;y++)q+="$"===(C=e.charAt(y))||"%"===C?a:C;e=q}if(P[0])for(x=P.length,y=0;y<x;y++)e=e.replace(k,P[y])}return e}var s=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|"[^"]*"|'[^']*'/g,l=/^(n|c|p|e)(\d*)$/i,d=/["'].*?["']/g,c=/\,/g,u="",p=".",h=",",g="#",v="0",k="??",b="default";f.cultures={default:{name:b,numberFormat:{pattern:["-n"],decimals:2,",":"",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":"",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0}}}},f.culture=function(e){var i,r=f.cultures;if(e===t)return r.current;(i=n(e)||r[b]).calendar=i.calendars.standard,r.current=i},f.findCulture=n,f.getCulture=i,f.culture(b);var w=function(e,n,i){if(n){if(e instanceof Date)return a(e,n,i);if(typeof e===D)return o(e,n,i)}return e!==t?e:""};M&&(w=m(M.format,M)),f.convertCulture=function(n,i,r){that=e("span[id='"+n+"']").data("kendoNumericTextBox"),that!=t?(1==r?that.element.text(f.toString(parseFloat(that._parse(i,that.options.culture)),that.options.format,that.options.defaultCulture)):that.element.text(f.toString(parseFloat(that._parse(i,that.options.defaultCulture)),that.options.format,that.options.culture)),e("input[id='"+n+"']").val(i)):(that=e("input[id='"+n+"']").data("kendoNumericTextBox"),that!=t&&(1==r?e("input[id='"+n+"']").val(f.toString(parseFloat(that._parse(i,that.options.culture)),that.options.format,that.options.defaultCulture)):e("input[id='"+n+"']").val(f.toString(parseFloat(that._parse(i,that.options.defaultCulture)),that.options.format,that.options.culture))))},f.format=function(e){var t=arguments;return e.replace(C,function(e,n,i){var r=t[parseInt(n,10)+1];return w(r,i?i.substring(1):"")})},f._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},f.toString=w,f.cultureValue=function(n,i){that=e("span[id='"+n+"']").data("kendoNumericTextBox"),that!=t&&that.element.text(f.toString(parseFloat(that._parse(i,that.options.defaultCulture)),that.options.format,that.options.culture)),e("input[id='"+n+"']").val(i)},f.ceil=function(e){if(isNaN(e))return 0;var t=parseFloat(_SessionWeightRound_),n=parseFloat(e).toFixed(2)-t;return Math.ceil(n)},f.floor=function(e){if(isNaN(e))return 0;var t=parseFloat(_SessionWeightRound_),n=parseFloat(e).toFixed(2)-t;return Math.floor(n)}}(),function(){function t(e,t,n){return!(e>=t&&e<=n)}function n(e){return e.charAt(0)}function i(t){return e.map(t,n)}function r(e,n,r){if(!e)return null;var a,o,d,c,u,p,f,h,g,m,v,k,b=function(e){for(var t=0;n[I]===e;)t++,I++;return t>0&&(I-=1),t},_=function(t){var n=new RegExp("^\\d{1,"+t+"}"),i=e.substr(E,t).match(n);return i?(i=i[0],E+=i.length,parseInt(i,10)):null},w=function(t){for(var n,i,r=0,a=t.length;r<a;r++)if(n=t[r],i=n.length,e.substr(E,i).toUpperCase()==n.toUpperCase())return E+=i,r+1;return null},y=function(){var t=!1;return e.charAt(E)===n[I]&&(E++,t=!0),t},x=r.calendars.standard,C=null,T=null,S=null,F=null,D=null,A=null,H=null,I=0,E=0,z=!1,N=(new Date).getFullYear();for(n||(n="d"),(c=x.patterns[n])&&(n=c),d=(n=n.split("")).length;I<d;I++)if(a=n[I],z)"'"===a?z=!1:y();else if("d"===a){if(o=b("d"),null===(S=o<3?_(2):w(x.days[3==o?"namesAbbr":"names"]))||t(S,1,31))return null}else if("M"===a){if(o=b("M"),null===(T=o<3?_(2):w(x.months[3==o?"namesAbbr":"names"]))||t(T,1,12))return null;T-=1}else if("y"===a)null===(C=_((o=b("y"))<3?2:4))&&(C=N),C<60&&(C=N-N%100+C);else if("h"===a){if(b("h"),12==(F=_(2))&&(F=0),null===F||t(F,0,11))return null}else if("H"===a){if(b("H"),null===(F=_(2))||t(F,0,23))return null}else if("m"===a){if(b("m"),null===(D=_(2))||t(D,0,59))return null}else if("s"===a){if(b("s"),null===(A=_(2))||t(A,0,59))return null}else if("f"===a){if(o=b("f"),null===(H=_(o))||t(H,0,999))return null}else if("t"===a){if(o=b("t"),g=x.AM,m=x.PM,1===o&&(g=i(g),m=i(m)),!(u=w(m))&&!w(g))return null}else if("z"===a){if(p=!0,o=b("z"),"Z"===e.substr(E,1)){if(!f)return null;y();continue}if(!(h=e.substr(E,6).match(o>2?l:s)))return null;if(h=h[0],E=h.length,h=h.split(":"),v=parseInt(h[0],10),t(v,-12,13))return null;if(o>2&&(k=parseInt(h[1],10),isNaN(k)||t(k,0,59)))return null}else"T"===a?f=y():"'"===a?(z=!0,y()):y();return u&&F<12&&(F+=12),null===S&&(S=1),p?(v&&(F+=-v),k&&(D+=-k),new Date(Date.UTC(C,T,S,F,D,A,H))):new Date(C,T,S,F,D,A,H)}var a=/\u00A0/g,o=/[eE][\-+]?[0-9]+/,s=/[+|\-]\d{1,2}/,l=/[+|\-]\d{1,2}:\d{2}/,d=["G","g","d","F","D","y","m","T","t"];f.parseDate=function(e,t,n){if(e instanceof Date)return e;var i,a,o=0,s=null;if(n=f.getCulture(n),!t){for(t=[],a=n.calendar.patterns,i=d.length;o<i;o++)t[o]=a[d[o]];t[o]="ddd MMM dd yyyy HH:mm:ss",t[++o]="yyyy-MM-ddTHH:mm:ss.fffzzz",t[++o]="yyyy-MM-ddTHH:mm:sszzz",t[++o]="yyyy-MM-ddTHH:mmzzz",t[++o]="yyyy-MM-ddTHH:mmzz",t[++o]="yyyy-MM-dd",o=0}for(i=(t=v(t)?t:[t]).length;o<i;o++)if(s=r(e,t[o],n))return s;return s},f.parseInt=function(e,t){var n=f.parseFloat(e,t);return n&&(n|=0),n},f.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===D)return e;e=e.toString();var i,r,s=(t=f.getCulture(t)).numberFormat,l=s.percent,d=s.currency,c=d.symbol,u=l.symbol,p=e.indexOf("-")>-1;return o.test(e)?(e=parseFloat(e),isNaN(e)&&(e=null),e):(e.indexOf(c)>-1||n&&n.toLowerCase().indexOf("c")>-1?(i=(s=d).pattern[0].replace("$",c).split("n"),e.indexOf(i[0])>-1&&e.indexOf(i[1])>-1&&(e=e.replace(i[0],"").replace(i[1],""),p=!0)):e.indexOf(u)>-1&&(r=!0,s=l,c=u),e=e.replace("-","").replace(c,"").replace(a," ").split(s[","].replace(a," ")).join("").replace(s["."],"."),e=parseFloat(e),isNaN(e)?e=null:p&&(e*=-1),e&&r&&(e/=100),e)},M&&(f.parseDate=m(M.parseDate,M),f.parseFloat=m(M.parseFloat,M))}(),function(){y.scrollbar=function(){var e,t=document.createElement("div");return t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",t.innerHTML="&nbsp;",document.body.appendChild(t),e=t.offsetWidth-t.scrollWidth,document.body.removeChild(t),e};var n=document.createElement("table");try{n.innerHTML="<tr><td></td></tr>",y.tbodyInnerHtml=!0}catch(e){y.tbodyInnerHtml=!1}y.touch="ontouchstart"in window,y.pointers=navigator.msPointerEnabled;var i=y.transitions=!1,r=y.transforms=!1;y.isRtl=function(t){return e(t).closest(".k-rtl").length>0},y.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,y.hasNativeScrolling="string"==typeof document.documentElement.style.webkitOverflowScrolling,g(["Moz","webkit","O","ms"],function(){var e=this.toString(),t=typeof n.style[e+"Transition"]===F;if(t||typeof n.style[e+"Transform"]===F){var a=e.toLowerCase();return r={css:"-"+a+"-",prefix:e,event:"o"===a||"webkit"===a?a:""},t&&((i=r).event=i.event?i.event+"TransitionEnd":"transitionend"),!1}}),y.transforms=r,y.transitions=i,y.devicePixelRatio=window.devicePixelRatio===t?1:window.devicePixelRatio,y.detectOS=function(e){var n,i=!1,r=[],a={fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,winphone:/(IEMobile)\/(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows|winphone/},s={tablet:/playbook|ipad|fire/i},l={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,webkit:/webkit/i,ie:/MSIE|Windows\sPhone/i},d=function(e,n,i){for(var r in n)if(n.hasOwnProperty(r)&&n[r].test(e))return r;return i!==t?i:e};for(var c in a)if(a.hasOwnProperty(c)&&(r=e.match(a[c]))){if("windows"==c&&"plugins"in navigator)return!1;(i={}).device=c,i.tablet=d(c,s,!1),i.browser=d(e,l,"default"),i.name=d(c,o),i[i.name]=!0,i.majorVersion=r[2],i.minorVersion=r[3].replace("_","."),n=i.minorVersion.replace(".","").substr(0,2),i.flatVersion=i.majorVersion+n+new Array(3-(n.length<3?n.length:2)).join("0"),i.appMode=window.navigator.standalone||/file|local/.test(window.location.protocol)||typeof window.PhoneGap!==E||typeof window.cordova!==E,i.android&&y.devicePixelRatio<1.5&&(window.outerWidth>800||window.outerHeight>800)&&(i.tablet=c);break}return i},y.mobileOS=y.detectOS(navigator.userAgent),y.zoomLevel=function(){return y.touch?document.documentElement.clientWidth/window.innerWidth:1},y.eventCapture=document.documentElement.addEventListener,y.placeholder="placeholder"in document.createElement("input"),y.stableSort=function(){var e=[0,1,2,3,4,5,6,7,8,9,10,11,12].sort(function(){return 0});return 0===e[0]&&1===e[1]&&2===e[2]&&3===e[3]&&4===e[4]&&5===e[5]&&6===e[6]&&7===e[7]&&8===e[8]&&9===e[9]&&10===e[10]&&11===e[11]&&12===e[12]}()}();var V={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},j={promise:function(e,t){t.show&&e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},transitionPromise:function(e,t,n){return f.wrap(e).append(t),e.hide(),t.show(),n.completeCallback&&n.completeCallback(e),e}};h(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,i){return s(this,e,t,n,i)},kendoAnimateTo:function(e,t,n,i,r){return l(this,e,t,n,i,r)}}),h(e.fn,{kendoAddClass:function(e,t){return d(this,e,t,!0)},kendoRemoveClass:function(e,t){return d(this,e,t,!1)},kendoToggleClass:function(e,t,n){return d(this,e,t,n)}});var G=/&/g,$=/</g,Y=/>/g,K=function(e){var t=typeof e.pageX==E?e.originalEvent:e;return{idx:y.pointers?t.pointerId:0,x:t.pageX,y:t.pageY}},Q=function(e){return e.target};y.touch&&(K=function(e,t){var n=e.changedTouches||e.originalEvent.changedTouches;if(t){var i=null;return g(n,function(e,n){t==n.identifier&&(i={idx:n.identifier,x:n.pageX,y:n.pageY})}),i}return{idx:n[0].identifier,x:n[0].pageX,y:n[0].pageY}},Q=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):null},g(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),y.touch?(y.mousedown="touchstart",y.mouseup="touchend",y.mousemove="touchmove",y.mousecancel="touchcancel",y.resize="orientationchange"):y.pointers?(y.mousemove="MSPointerMove",y.mousedown="MSPointerDown",y.mouseup="MSPointerUp",y.mousecancel="MSPointerCancel",y.resize="orientationchange resize"):(y.mousemove="mousemove",y.mousedown="mousedown",y.mouseup="mouseup",y.mousecancel="mouseleave",y.resize="resize");var J=function(e){var t,n,i,r,a="d",o=1;for(n=0,i=e.length;n<i;n++)""!==(r=e[n])&&(0!==(t=r.indexOf("["))&&(-1==t?r="."+r:(o++,r="."+r.substring(0,t)+" || {})"+r.substring(t))),o++,a+=r+(n<i-1?" || {})":")"));return new Array(o).join("(")+a},X=/^([a-z]+:)?\/\//i;h(f,{ui:f.ui||{},fx:f.fx||j,data:f.data||{},mobile:f.mobile||{},dataviz:f.dataviz||{ui:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123},support:y,animate:s,ns:"",attr:function(e){return"data-"+f.ns+e},wrap:function(t){var n,i=e.browser;if(t.parent().hasClass("k-animation-container")){var r=t.parent(".k-animation-container"),a=r[0].style;r.is(":hidden")&&r.show(),(n=x.test(a.width)||x.test(a.height))||r.css({width:t.outerWidth(),height:t.outerHeight()})}else{var o=t.css(f.support.transitions.css+"box-shadow")||t.css("box-shadow"),s=o?o.match(T)||[0,0,0,0,0]:[0,0,0,0,0],l=_.max(+s[3],+(s[4]||0)),d=-s[1]+l,c=+s[1]+l,u=+s[2]+l,p=t[0].style.width,h=t[0].style.height,g=x.test(p),m=x.test(h);i.opera&&(d=c=u=5),n=g||m,g||(p=t.outerWidth()),m||(h=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:p>175?175:p,height:h,marginLeft:-d,paddingLeft:d,paddingRight:c,paddingBottom:u})),n&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return i.msie&&_.floor(i.version)<=7&&t.css({zoom:1}),t.parent()},deepExtend:function(e){var t=1,n=arguments.length;for(t=1;t<n;t++)a(e,arguments[t]);return e},size:function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n},isNodeEmpty:function(t){return""===e.trim(e(t).contents().filter(function(){return 8!=this.nodeType}).html())},getOffset:function(e,t){t||(t="offset");var n=e[t](),i=y.mobileOS;if(y.touch&&i.ios&&i.flatVersion<410){var r="offset"==t?n:e.offset();if(n.left==r.left&&n.top==r.top)return{top:n.top-window.scrollY,left:n.left-window.scrollX}}return n},parseEffects:function(e){var t={};return g("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t},toggleClass:d,directions:V,Observable:O,Class:n,Template:p,template:m(p.compile,p),render:m(p.render,p),stringify:m(w.stringify,w),touchLocation:K,eventTarget:Q,htmlEncode:function(e){return(""+e).replace(G,"&amp;").replace($,"&lt;").replace(Y,"&gt;")},isLocalUrl:function(e){return e&&!X.test(e)},expr:function(e,t){return(e=e||"")&&"["!==e.charAt(0)&&(e="."+e),e=t?J(e.split(".")):"d"+e},getter:function(e,t){return z[e]=z[e]||new Function("d","return "+f.expr(e,t))},setter:function(e){return N[e]=N[e]||new Function("d,value","d."+e+"=value")},accessor:function(e){return{get:f.getter(e),set:f.setter(e)}},guid:function(){var e,t,n="";for(e=0;e<32;e++)t=16*_.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(n+="-"),n+=(12==e?4:16==e?3&t|8:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+f.attr("role")+"=$1],").slice(0,-1)},logToConsole:function(e){var t=window.console;void 0!==t&&t.log&&t.log(e)}});var Z=O.extend({init:function(t,n){var i=this;i.element=e(t),O.fn.init.call(i),i.options=h(!0,{},i.options,n),i.element.attr(f.attr("role"))||i.element.attr(f.attr("role"),(i.options.name||"").toLowerCase()),i.element.data("kendo"+i.options.prefix+i.options.name,i),i.bind(i.events,i.options)},events:[],options:{prefix:""},setOptions:function(t){e.extend(this.options,t),this.bind(this.events,t)}});f.notify=k;var ee=/template$/i,te=/^\s*(?:\{(?:.|\n)*\}|\[(?:.|\n)*\])\s*$/,ne=/^\{(\d+)(:[^\}]+)?\}/,ie=/([A-Z])/g;f.initWidget=function(n,i,r){var a,o,s,l,d,p,h,g;if(r?r.roles&&(r=r.roles):r=f.ui.roles,n=n.nodeType?n:n[0],(p=n.getAttribute("data-"+f.ns+"role"))&&(s=r[p])){for(g=c(n,"dataSource"),i=e.extend({},u(n,s.fn.options),i),g&&(i.dataSource=typeof g===F?f.getter(g)(window):g),l=0,d=s.fn.events.length;l<d;l++)(h=c(n,o=s.fn.events[l]))!==t&&(i[o]=f.getter(h)(window));return a=e(n).data("kendo"+s.fn.options.name),a?a.setOptions(i):a=new s(n,i),a}},f.init=function(t){var n,i=R.call(arguments,1);i[0]||(i=[f.ui,f.dataviz.ui]),n=e.map(i,function(e){return e.roles}).reverse(),n=h.apply(null,[{}].concat(n)),e(t).find("[data-"+f.ns+"role]").andSelf().each(function(){f.initWidget(this,{},n)})},f.parseOptions=u,h(f.ui,{Widget:Z,roles:{},progress:function(e,t){},plugin:function(n,i,r){var a,o=n.fn.options.name;i=i||f.ui,r=r||"",i[o]=n,i.roles[o.toLowerCase()]=n,a="getKendo"+r+o,o="kendo"+r+o,e.fn[o]=function(i){var r,a=this;return typeof i===F?(r=R.call(arguments,1),this.each(function(){var n,s,l=e.data(this,o);if(!l)throw new Error(f.format("Cannot call method '{0}' of {1} before it is initialized",i,o));if(typeof(n=l[i])!==S)throw new Error(f.format("Cannot find method '{0}' of {1}",i,o));if((s=n.apply(l,r))!==t)return a=s,!1})):this.each(function(){new n(this,i)}),a},e.fn[a]=function(){return this.data(o)}}});var re=Z.extend({init:function(e,t){Z.fn.init.call(this,e,t),this.wrapper=this.element},options:{prefix:"Mobile"},events:[],viewShow:e.noop,view:function(){var e=this.element.closest(f.roleSelector("view")+","+f.roleSelector("splitview"));return e.data("kendoMobileView")||e.data("kendoMobileSplitView")}});h(f.mobile,{init:function(e){f.init(e,f.mobile.ui,f.ui,f.dataviz.ui)},ui:{Widget:re,roles:{},plugin:function(e){f.ui.plugin(e,f.mobile.ui,"Mobile")}}}),f.touchScroller=function(e,t){return!(!y.touch||!f.mobile.ui.Scroller||e.data("kendoMobileScroller"))&&(e.kendoMobileScroller(t),e.data("kendoMobileScroller"))},f.preventDefault=function(e){e.preventDefault()},f.widgetInstance=function(e,t){var n=t.roles[e.data(f.ns+"role")];if(n)return e.data("kendo"+n.fn.options.prefix+n.fn.options.name)},f.onResize=function(t){var n=t;y.mobileOS.android&&(n=function(){setTimeout(t,200)}),e(window).on(y.resize,n)},f.data=function(e,t){return e.data(f.ns+t)}}(jQuery),function(e,t){function n(e){return parseInt(e,10)}function i(e,t){return n(e.css(t))}function r(e,t){var n={};if(t){if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(e,"");v(t,function(e,t){n[t]=i.getPropertyValue(t)})}else if(e.currentStyle){var r=e.currentStyle;v(t,function(e,t){n[t]=r[t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})]})}}else n=document.defaultView.getComputedStyle(e,"");return n}function a(e){return e.effects.slideIn=e.effects.slide,delete e.effects.slide,delete e.complete,e}function o(t){var n,i=t.effects;return"zoom"===i&&(i="zoomIn fadeIn"),"slide"===i&&(i="slide:left"),"fade"===i&&(i="fadeIn"),"overlay"===i&&(i="slideIn:left"),/^overlay:(.+)$/.test(i)&&(i="slideIn:"+RegExp.$1),(n=t.reverse&&/^(slide:)/.test(i))&&delete t.reverse,t.effects=e.extend(g.parseEffects(i,n),{show:!0}),t}function s(e){var t=[];for(var n in e)t.push(n);return t}function l(e,t){e.data(q)&&(clearTimeout(e.data(q)),e.removeData(q)),e.css(U,"").css(U),e.dequeue(),t.complete.call(e)}function d(e){var t=e.object,n=0;e&&(t.css(e.setup).css(U),t.css(e.CSS).css(V),w.mozilla&&(t.one(C.event,function(){l(t,e)}),n=50),t.data(q,setTimeout(l,e.duration+n,t,e)))}function c(e){for(var t in e)-1!=N.indexOf(t)&&-1==R.indexOf(t)&&delete e[t];return e}function u(n,i,r){var a,o;for(a in i)e.isFunction(i[a])&&((o=i[a](n,r))!==t?i[a]=o:delete i[a]);return i}function p(n,i,r){var a,o,s,l,d,c=[],u={};for(o in i)a=o.toLowerCase(),d=x&&-1!=N.indexOf(a),!y.hasHW3D&&d&&-1==R.indexOf(a)?delete i[o]:(l=!1,e.isFunction(i[o])?(s=i[o](n,r))!==t&&(l=s):l=i[o],!1!==l&&(d?c.push(o+"("+l+")"):u[o]=l));return c.length&&(u[V]=c.join(" ")),u}function f(e,t){if(x){var i=e.css(V);if(i==B)return"scale"==t?1:0;var r=i.match(new RegExp(t+"\\s*\\(([\\d\\w\\.]+)")),a=0;return r?a=n(r[1]):(r=i.match(D)||[0,0,0,0,0],t=t.toLowerCase(),H.test(t)?a=parseFloat(r[3]/r[2]):"translatey"==t?a=parseFloat(r[4]/r[2]):"scale"==t?a=parseFloat(r[2]):"rotate"==t&&(a=parseFloat(Math.atan2(r[2],r[1])))),a}return parseFloat(e.css(t))}function h(e,t,n){var i=g.directions[t],r=n?g.directions[i.reverse]:i;return{direction:r,offset:-r.modifier*(r.vertical?e.outerHeight():e.outerWidth())}}var g=window.kendo,m=g.fx,v=e.each,k=e.extend,b=e.proxy,_=g.size,w=e.browser,y=g.support,x=y.transforms,C=y.transitions,T={scale:0,scalex:0,scaley:0,scale3d:0},S={translate:0,translatex:0,translatey:0,translate3d:0},F=void 0!==document.documentElement.style.zoom&&!x,D=/matrix3?d?\s*\(.*,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?,\s*([\d\.\-]+)\w*?/i,A=/^(-?[\d\.\-]+)?[\w\s]*,?\s*(-?[\d\.\-]+)?[\w\s]*/i,H=/translatex?$/i,I=/(zoom|fade|expand)(\w+)/,E=/(zoom|fade|expand)/,z=/[xy]$/i,N=["perspective","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d","skew","skewx","skewy","translate","translatex","translatey","translatez","translate3d","matrix","matrix3d"],R=["rotate","scale","scalex","scaley","skew","skewx","skewy","translate","translatex","translatey","matrix"],M={rotate:"deg",scale:"",skew:"px",translate:"px"},O=x.css,P=Math.round,L="px",B="none",q="abortId",W="overflow",U=O+"transition",V=O+"transform",j=O+"perspective",G=O+"backface-visibility";if(g.directions={left:{reverse:"right",property:"left",transition:"translatex",vertical:!1,modifier:-1},right:{reverse:"left",property:"left",transition:"translatex",vertical:!1,modifier:1},down:{reverse:"up",property:"top",transition:"translatey",vertical:!0,modifier:1},up:{reverse:"down",property:"top",transition:"translatey",vertical:!0,modifier:-1},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out",modifier:-1},out:{reverse:"in",modifier:1}},k(e.fn,{kendoStop:function(e,t){return C?g.fx.stopQueue(this,e||!1,t||!1):this.stop(e,t)}}),x&&!C){v(R,function(t,n){e.fn[n]=function(t){if(void 0===t)return f(this,n);var i=e(this)[0],r=n+"("+t+M[n.replace(z,"")]+")";return-1==i.style.cssText.indexOf(V)?e(this).css(V,r):i.style.cssText=i.style.cssText.replace(new RegExp(n+"\\(.*?\\)","i"),r),this},e.fx.step[n]=function(t){e(t.elem)[n](t.now)}});var $=e.fx.prototype.cur;e.fx.prototype.cur=function(){return-1!=R.indexOf(this.prop)?parseFloat(e(this.elem)[this.prop]()):$.apply(this,arguments)}}g.toggleClass=function(e,t,n,i){return t&&(t=t.split(" "),C&&(n=k({exclusive:"all",duration:400,ease:"ease-out"},n),e.css(U,n.exclusive+" "+n.duration+"ms "+n.ease),setTimeout(function(){e.css(U,"").css("height")},n.duration)),v(t,function(t,n){e.toggleClass(n,i)})),e},g.parseEffects=function(e,t){var n={};return"string"==typeof e?v(e.split(" "),function(e,i){var r=!E.test(i),a=i.replace(I,function(e,t,n){return t+":"+n.toLowerCase()}).split(":"),o=a[1],s={};a.length>1&&(s.direction=t&&r?g.directions[o].reverse:o),n[a[0]]=s}):v(e,function(e){var i=this.direction;i&&t&&!E.test(e)&&(this.direction=g.directions[i].reverse),n[e]=this}),n},C&&k(g.fx,{transition:function(t,n,i){(i=k({duration:200,ease:"ease-out",complete:null,exclusive:"all"},i)).duration=e.fx?e.fx.speeds[i.duration]||i.duration:i.duration;var r=p(t,n,i),a={keys:s(r),CSS:r,object:t,setup:{},duration:i.duration,complete:i.complete};a.setup[U]=i.exclusive+" "+i.duration+"ms "+i.ease;var o=t.data("keys")||[];e.merge(o,a.keys),t.data("keys",e.unique(o)),d(a)},stopQueue:function(e,t,n){e.data(q)&&(clearTimeout(e.data(q)),e.removeData(q));var i,a=this,o=e.data("keys"),s=!1===n&&o;return s&&(i=r(e[0],o)),e.css(U,"").css(U),s&&e.css(i),e.removeData("keys"),a.complete&&a.complete.call(e),e.stop(t),e}}),g.fx.promise=function(t,n){var i,r=[];i=g.parseEffects(n.effects),n.effects=i,t.data("animating",!0);var a,o={keep:[],restore:[]},s={},l={setup:[],teardown:[]},d={},f=e.Deferred(function(r){if(_(i)){var f=k({},n,{complete:r.resolve});if(v(i,function(t,i){var r=g.fx[t];if(r){var a=g.directions[i.direction];i.direction&&a&&(i.direction=n.reverse?a.reverse:i.direction),f=k(!0,f,i),v(l,function(e){r[e]&&l[e].push(r[e])}),v(o,function(t){r[t]&&e.merge(o[t],r[t])}),r.css&&(s=k(s,r.css))}}),l.setup.length)return v(e.unique(o.keep),function(e,n){t.data(n)||t.data(n,t.css(n))}),n.show&&(s=k(s,{display:t.data("olddisplay")||"block"})),x&&!n.reset&&(s=u(t,s,f),(a=t.data("targetTransform"))&&(s=k(a,s))),s=p(t,s,f),x&&!C&&(s=c(s)),t.css(s).css(V),v(l.setup,function(){d=k(d,this(t,f))}),void(g.fx.animate&&(n.init(),t.data("targetTransform",d),g.fx.animate(t,d,f)))}else n.show&&(t.css({display:t.data("olddisplay")||"block"}).css("display"),n.init());r.resolve()}).promise();r.push(f),e.when.apply(null,r).then(function(){if(t.removeData("animating").dequeue(),n.hide&&t.data("olddisplay",t.css("display")).hide(),_(i)){var r=function(){v(e.unique(o.restore),function(e,n){t.css(n,t.data(n))})};r(),F&&!x&&setTimeout(r,0),v(l.teardown,function(){this(t,n)})}n.completeCallback&&n.completeCallback(t)})},g.fx.transitionPromise=function(e,t,n){return g.fx.animateTo(e,t,n),e},k(g.fx,{animate:function(n,r,a){var o=!1!==a.transition;delete a.transition,C&&"transition"in m&&o?m.transition(n,r,a):x?n.animate(c(r),{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete}):n.each(function(){var n=e(this),o={};v(N,function(e,a){var s,l=r?r[a]+" ":null;if(l){var d=r;if(a in T&&r[a]!==t)if(s=l.match(A),F){var c=(1-s[1])/2;k(d,{zoom:+s[1],marginLeft:n.width()*c,marginTop:n.height()*c})}else x&&k(d,{scale:+s[0]});else if(a in S&&r[a]!==t){var u=n.css("position"),p="absolute"==u||"fixed"==u;n.data("translate")||(p?n.data("translate",{top:i(n,"top")||0,left:i(n,"left")||0,bottom:i(n,"bottom"),right:i(n,"right")}):n.data("translate",{top:i(n,"marginTop")||0,left:i(n,"marginLeft")||0}));var f=n.data("translate");if(s=l.match(A)){var h="translatey"==a?0:+s[1],g="translatey"==a?+s[1]:+s[2];p?(isNaN(f.right)?isNaN(h)||k(d,{left:f.left+h}):isNaN(h)||k(d,{right:f.right-h}),isNaN(f.bottom)?isNaN(g)||k(d,{top:f.top+g}):isNaN(g)||k(d,{bottom:f.bottom-g})):(isNaN(h)||k(d,{marginLeft:f.left+h}),isNaN(g)||k(d,{marginTop:f.top+g}))}}!x&&"scale"!=a&&a in d&&delete d[a],d&&k(o,d)}}),w.msie&&delete o.scale,n.animate(o,{queue:!1,show:!1,hide:!1,duration:a.duration,complete:a.complete})})},animateTo:function(t,n,i){function r(e){n[0].style.cssText="",t[0].style.cssText="",y.mobileOS.android||d.css(W,l),i.completeCallback&&i.completeCallback.call(t,e)}var s,l,d=t.parents().filter(n.parents()).first();i=o(i),y.mobileOS.android||(l=d.css(W),d.css(W,"hidden")),e.each(i.effects,function(e,t){s=s||t.direction}),i.complete=w.msie?function(){setTimeout(r,0)}:r,i.reset=!0,"slide"in i.effects?(t.kendoAnimate(i),n.kendoAnimate(a(i))):(i.reverse?t:n).kendoAnimate(i)},fade:{keep:["opacity"],css:{opacity:function(e,t){var n=e[0].style.opacity;return"in"!=t.effects.fade.direction||n&&1!=n?1:0}},restore:["opacity"],setup:function(e,t){return k({opacity:"out"==t.effects.fade.direction?0:1},t.properties)}},zoom:{css:{scale:function(e,t){var n=f(e,"scale");return"in"==t.effects.zoom.direction?1!=n?n:"0.01":1},zoom:function(e,n){var i=e[0].style.zoom;return"in"==n.effects.zoom.direction&&F?i||"0.01":t}},setup:function(e,t){var i="out"==t.effects.zoom.direction;if(F){var r=w.version,a=e[0].currentStyle,o=-1!=a.width.indexOf("%")?e.parent().width():e.width(),s=-1!=a.height.indexOf("%")?e.parent().height():n(a.height),l=r<9&&t.effects.fade?0:(1-n(e.css("zoom"))/100)/2;e.css({marginLeft:o*(r<8?0:l),marginTop:s*l})}return k({scale:i?.01:1},t.properties)}},slide:{setup:function(e,t){var n=t.reverse,i={},r=h(e,t.effects.slide.direction,n),a=x&&!1!==t.transition?r.direction.transition:r.direction.property;if(r.offset/=-(t.divisor||1),!n){var o=e.data("origin");o||0===o||e.data("origin",f(e,a))}return i[a]=n?e.data("origin")||0:(e.data("origin")||0)+r.offset+L,k(i,t.properties)}},slideMargin:{setup:function(e,t){var n,i=e.data("origin"),r=t.offset,a={},o=t.reverse;return o||i||0===i||e.data("origin",parseFloat(e.css("margin-"+t.axis))),n=e.data("origin")||0,a["margin-"+t.axis]=o?n:n+r,k(a,t.properties)}},slideTo:{setup:function(e,t){var n=(t.offset+"").split(","),i={},r=t.reverse;return x&&!1!==t.transition?(i.translatex=r?0:n[0],i.translatey=r?0:n[1]):(i.left=r?0:n[0],i.top=r?0:n[1]),e.css("left"),k(i,t.properties)}},slideIn:{css:{translatex:function(e,n){var i=h(e,n.effects.slideIn.direction,n.reverse);return"translatex"==i.direction.transition?(n.reverse?0:i.offset)+L:t},translatey:function(e,n){var i=h(e,n.effects.slideIn.direction,n.reverse);return"translatey"==i.direction.transition?(n.reverse?0:i.offset)+L:t}},setup:function(e,t){var n=t.reverse,i=h(e,t.effects.slideIn.direction,n),r={};return x&&!1!==t.transition?r[i.direction.transition]=(n?i.offset:0)+L:(n||e.css(i.direction.property,i.offset+L),r[i.direction.property]=(n?i.offset:0)+L,e.css(i.direction.property)),k(r,t.properties)}},expand:{keep:[W],css:{overflow:"hidden"},restore:[W],setup:function(e,n){var i=n.reverse,r=n.effects.expand.direction,a=r&&"vertical"!=r?"width":"height",o=e[0].style[a],s=e.data(a),l=parseFloat(s||o)||P(e.css(a,"auto")[a]()),d={};return d[a]=(i?0:l)+L,e.css(a,i?l:0).css(a),s===t&&e.data(a,o),k(d,n.properties)},teardown:function(e,t){var n=t.effects.expand.direction,i=n&&"vertical"!=n?"width":"height",r=e.data(i);"auto"!=r&&""!==r||setTimeout(function(){e.css(i,"auto").css(i)},0)}},flip:{css:{rotatex:function(e,n){return"vertical"==n.effects.flip.direction?n.reverse?"180deg":"0deg":t},rotatey:function(e,n){return"horizontal"==n.effects.flip.direction?n.reverse?"180deg":"0deg":t}},setup:function(e,t){var n="horizontal"==t.effects.flip.direction?"rotatey":"rotatex",i=t.reverse,r=e.parent(),a=t.degree,o=t.face,s=t.back,l=n+(i?"(180deg)":"(0deg)"),d=n+(i?"(0deg)":"(180deg)"),c={};return y.hasHW3D?(r.css(j)==B&&r.css(j,500),e.css(O+"transform-style","preserve-3d"),o.css(G,"hidden").css(V,l).css("z-index",i?0:-1),s.css(G,"hidden").css(V,d).css("z-index",i?-1:0),c[n]=(i?"-":"")+(a||180)+"deg"):1==g.size(t.effects)&&(t.duration=0),o.show(),s.show(),k(c,t.properties)},teardown:function(t,n){n[n.reverse?"back":"face"].hide(),y.hasHW3D&&e().add(n.face).add(n.back).add(t).css(G,"")}},simple:{setup:function(e,t){return t.properties}}}),g.fx.expandVertical=g.fx.expand;var Y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},K=g.Class.extend({init:function(){var e=this;e._tickProxy=b(e._tick,e),e._started=!1},tick:e.noop,done:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(){this._started=!0,Y(this._tickProxy)},cancel:function(){this._started=!1,this.onCancel()},_tick:function(){var e=this;e._started&&(e.tick(),e.done()?(e._started=!1,e.onEnd()):Y(e._tickProxy))}}),Q=K.extend({init:function(e){var t=this;k(t,e),K.fn.init.call(t)},done:function(){return this.timePassed()>=this.duration},timePassed:function(){return Math.min(this.duration,+new Date-this.startDate)},moveTo:function(e){var t=this,n=t.movable;t.initial=n[t.axis],t.delta=e.location-t.initial,t.duration=e.duration||300,t.tick=t._easeProxy(e.ease),t.startDate=+new Date,t.start()},_easeProxy:function(e){var t=this;return function(){t.movable.moveAxis(t.axis,e(t.timePassed(),t.initial,t.delta,t.duration))}}});k(Q,{easeOutExpo:function(e,t,n,i){return e==i?t+n:n*(1-Math.pow(2,-10*e/i))+t},easeOutBack:function(e,t,n,i,r){return r=1.70158,n*((e=e/i-1)*e*((r+1)*e+r)+1)+t}}),m.Animation=K,m.Transition=Q}(jQuery),function(e,t){function n(r){var o,s,l,d,c,u,p,f,h=[],g=r.logic||"and",m=r.filters;for(o=0,s=m.length;o<s;o++)l=(r=m[o]).field,p=r.value,u=r.operator,r.filters?r=n(r):(f=r.ignoreCase,l=l.replace(/\./g,"/"),(r=a[u])&&p!==t&&("string"===(d=e.type(p))?(c="'{1}'",p=p.replace(/'/g,"''"),!0===f&&(l="tolower("+l+")")):c="date"===d?"datetime'{1:yyyy-MM-ddTHH:mm:ss}'":"{1}",c=r.length>3?"substringof"!==r?"{0}({2},"+c+")":"{0}("+c+",{2})":"{2} {0} "+c,r=i.format(c,r,p,l))),h.push(r);return r=h.join(" "+g+" "),h.length>1&&(r="("+r+")"),r}var i=window.kendo,r=e.extend,a={eq:"eq",neq:"ne",gt:"gt",gte:"ge",lt:"lt",lte:"le",contains:"substringof",endswith:"endswith",startswith:"startswith"},o={pageSize:e.noop,page:e.noop,filter:function(e,t){t&&(e.$filter=n(t))},sort:function(t,n){var i=e.map(n,function(e){var t=e.field.replace(/\./g,"/");return"desc"===e.dir&&(t+=" desc"),t}).join(",");i&&(t.$orderby=i)},skip:function(e,t){t&&(e.$skip=t)},take:function(e,t){t&&(e.$top=t)}},s={read:{dataType:"jsonp"}};r(!0,i.data,{schemas:{odata:{type:"json",data:function(e){return e.d.results||[e.d]},total:"d.__count"}},transports:{odata:{read:{cache:!0,dataType:"jsonp",jsonp:"$callback"},update:{cache:!0,dataType:"json",contentType:"application/json",type:"PUT"},create:{cache:!0,dataType:"json",contentType:"application/json",type:"POST"},destroy:{cache:!0,dataType:"json",type:"DELETE"},parameterMap:function(e,t){var n,r,a,l;if(e=e||{},t=t||"read",l=(this.options||s)[t],l=l?l.dataType:"json","read"===t){n={$inlinecount:"allpages"},"json"!=l&&(n.$format="json");for(a in e)o[a]?o[a](n,e[a]):n[a]=e[a]}else{if("json"!==l)throw new Error("Only json dataType can be used for "+t+" operation.");if("destroy"!==t){for(a in e)"number"==typeof(r=e[a])&&(e[a]=r+"");n=i.stringify(e)}}return n}}}})}(jQuery),function(e,t){var n=window.kendo,i=e.isArray,r=e.isPlainObject,a=e.map,o=e.each,s=e.extend,l=n.getter,d=n.Class.extend({init:function(e){var t=this,l=e.total,d=e.model,c=e.data;if(d){if(r(d)){d.fields&&o(d.fields,function(e,n){n=r(n)&&n.field?s(n,{field:t.getter(n.field)}):{field:t.getter(n)},d.fields[e]=n});var u=d.id;if(u){var p={};p[t.xpathToMember(u,!0)]={field:t.getter(u)},d.fields=s(p,d.fields),d.id=t.xpathToMember(u)}d=n.data.Model.define(d)}t.model=d}l&&(l=t.getter(l),t.total=function(e){return parseInt(l(e),10)}),c&&(c=t.xpathToMember(c),t.data=function(e){var n,r=t.evaluate(e,c);return r=i(r)?r:[r],t.model&&d.fields?(n=new t.model,a(r,function(e){if(e){var t,i={};for(t in d.fields)i[t]=n._parse(t,d.fields[t].field(e));return i}})):r})},total:function(e){return this.data(e).length},errors:function(e){return e?e.errors:null},parseDOM:function(e){var t,n,r,a,o,s,l,d={},c=e.attributes,u=c.length;for(l=0;l<u;l++)d["@"+(s=c[l]).nodeName]=s.nodeValue;for(n=e.firstChild;n;n=n.nextSibling)3===(r=n.nodeType)||4===r?d["#text"]=n.nodeValue:1===r&&(t=this.parseDOM(n),o=d[a=n.nodeName],i(o)?o.push(t):o=void 0!==o?[o,t]:t,d[a]=o);return d},evaluate:function(e,t){for(var n,r,a,o,s,l=t.split(".");n=l.shift();)if(e=e[n],i(e)){for(r=[],t=l.join("."),s=0,a=e.length;s<a;s++)o=this.evaluate(e[s],t),o=i(o)?o:[o],r.push.apply(r,o);return r}return e},parse:function(t){var n,i,r={};return n=t.documentElement||e.parseXML(t).documentElement,i=this.parseDOM(n),r[n.nodeName]=i,r},xpathToMember:function(e,t){return e?(e=e.replace(/^\//,"").replace(/\//g,"."),e.indexOf("@")>=0?e.replace(/\.?(@.*)/,t?"$1":'["$1"]'):e.indexOf("text()")>=0?e.replace(/(\.?text\(\))/,t?"#text":'["#text"]'):e):""},getter:function(e){return l(this.xpathToMember(e),!0)}});e.extend(!0,n.data,{XmlDataReader:d,readers:{xml:d}})}(jQuery),function(e,t){function n(t,i){if(t===i)return!0;var r,a=e.type(t);if(a!==e.type(i))return!1;if("date"===a)return t.getTime()===i.getTime();if("object"!==a&&"array"!==a)return!1;for(r in t)if(!n(t[r],i[r]))return!1;return!0}function i(e){this.data=e||[]}function r(e,n){if(e){var i=typeof e===W?{field:e,dir:n}:e,r=N(i)?i:i!==t?[i]:[];return R(r,function(e){return!!e.dir})}}function a(e){var t,n,i,r,o=e.filters;if(o)for(t=0,n=o.length;t<n;t++)(r=(i=o[t]).operator)&&typeof r===W&&(i.operator=he[r.toLowerCase()]||r),a(i)}function o(e){if(e&&!z(e))return!N(e)&&e.filters||(e={logic:"and",filters:N(e)?e:[e]}),a(e),e}function s(e){return N(e)?e:[e]}function l(e,n){var i=typeof e===W?{field:e,dir:n}:e,r=N(i)?i:i!==t?[i]:[];return D(r,function(e){return{field:e.field,dir:e.dir||"asc",aggregates:e.aggregates}})}function d(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function c(e,t,n,i,r){var a,o,s,l=(t=t||[]).length;for(a=0;a<l;a++){s=(o=t[a]).aggregate;var d=o.field;e[d]=e[d]||{},e[d][s]=ge[s.toLowerCase()](e[d][s],n,L.accessor(d),i,r)}}function u(e){var t,n=e.length,i=new Array(n);for(t=0;t<n;t++)i[t]=e[t].toJSON();return i}function p(e,n){n=n||{};var a,o=new i(e),s=n.group,d=l(s||[]).concat(r(n.sort||[])),c=n.filter,u=n.skip,p=n.take;return c&&(a=(o=o.filter(c)).toArray().length),d&&(o=o.sort(d),s&&(e=o.toArray())),u!==t&&p!==t&&(o=o.range(u,p)),s&&(o=o.group(s,e)),{total:a,data:o.toArray()}}function f(e,t){t=t||{};var n=new i(e),r=t.aggregate,a=t.filter;return a&&(n=n.filter(a)),n.aggregate(r)}function h(e,t,n){var i,r,a,o;for(a=0,o=e.length;a<o;a++){i=e[a];for(r in t)i[r]=n._parse(r,t[r](i))}}function g(e,t,n){var i,r,a;for(r=0,a=e.length;r<a;r++)(i=e[r]).value=n._parse(i.field,i.value),i.hasSubgroups?g(i.items,t,n):h(i.items,t,n)}function m(e,t,n,i){return function(r){return(r=e(r))&&!z(i)&&("[object Array]"===ne.call(r)||r instanceof oe||(r=[r]),n(r,i,new t)),r||[]}}function v(e){var t,n,i=[];for(t=0,n=e.length;t<n;t++)i=e[t].hasSubgroups?i.concat(v(e[t].items)):i.concat(e[t].items.slice());return i}function k(e,t){var n,i,r,a;if(t)for(n=0,i=e.length;n<i;n++)a=(r=e[n]).items,r.hasSubgroups?k(a,t):!a.length||a[0]instanceof t||(a.type=t,a.wrapAll(a,a))}function b(e,t){var n,i;for(n=0,i=e.length;n<i;n++)if(e[n].hasSubgroups){if(b(e[n].items,t))return!0}else if(t(e[n].items,e[n]))return!0}function _(e,t){var n,i;for(n=0,i=e.length;n<i;n++)if(e[n].uid==t.uid)return t=e[n],e.splice(n,1),t}function w(e,t){var n,i,r;for(r=e.length-1,0;r>=0;r--)i=e[r],n={value:t.get(i.field),field:i.field,items:n?[n]:[t],hasSubgroups:!!n,aggregates:{}};return n}function y(e,t){return t?C(e,function(e){return e[t.idField]===t.id}):-1}function x(e,t){return t?C(e,function(e){return e.uid==t.uid}):-1}function C(e,t){var n,i;for(n=0,i=e.length;n<i;n++)if(t(e[n]))return n;return-1}function T(t,n){var i,r,a,o,s,l=e(t)[0].children,d=[],c=n[0],u=n[1];for(i=0,r=l.length;i<r;i++)a={},s=l[i],a[c.field]=s.text,o=(o=s.attributes.value)&&o.specified?s.value:s.text,a[u.field]=o,d.push(a);return d}function S(t,n){var i,r,a,o,s,l,d,c=e(t)[0].tBodies[0],u=c?c.rows:[],p=n.length,f=[];for(i=0,r=u.length;i<r;i++){for(s={},d=!0,o=u[i].cells,a=0;a<p;a++)"th"!==(l=o[a]).nodeName.toLowerCase()&&(d=!1,s[n[a].field]=l.innerHTML);d||f.push(s)}return f}function F(t,n){var i,r,a,o,s,l,d,c,u=e(t).children(),p=[],f=n[0].field,h=n[1]&&n[1].field,g=n[2]&&n[2].field,m=n[3]&&n[3].field;for(i=0,r=u.length;i<r;i++)a={},l=(o=u.eq(i))[0].firstChild,t=(c=o.children()).filter("ul"),c=c.filter(":not(ul)"),(s=o.attr("data-id"))&&(a.id=s),l&&(a[f]=3==l.nodeType?l.nodeValue:c.text()),h&&(a[h]=c.find("a").attr("href")),m&&(a[m]=c.find("img").attr("src")),g&&(d=c.find(".k-sprite").prop("className"),a[g]=d&&e.trim(d.replace("k-sprite",""))),t.length&&(a.items=F(t.eq(0),n)),"true"==o.attr("data-hasChildren")&&(a.hasChildren=!0),p.push(a);return p}var D,A=e.extend,H=e.proxy,I=e.isFunction,E=e.isPlainObject,z=e.isEmptyObject,N=e.isArray,R=e.grep,M=e.ajax,O=e.each,P=e.noop,L=window.kendo,B=L.Observable,q=L.Class,W="string",U="change",V=["create","read","update","destroy","save"],j=function(e){return e},G=L.getter,$=L.stringify,Y=Math,K=[].push,Q=[].join,J=[].pop,X=[].splice,Z=[].shift,ee=[].slice,te=[].unshift,ne={}.toString,ie=L.support.stableSort,re=/^\/Date\((.*?)\)\/$/,ae=/(?=['\\])/g,oe=B.extend({init:function(e,t){var n=this;n.type=t||se,B.fn.init.call(n),n.length=e.length,n.wrapAll(e,n)},toJSON:function(){var e,t,n=this.length,i=new Array(n);for(e=0;e<n;e++)(t=this[e])instanceof se&&(t=t.toJSON()),i[e]=t;return i},parent:P,wrapAll:function(e,t){var n,i,r=this;for(t=t||[],n=0,i=e.length;n<i;n++)t[n]=r.wrap(e[n],function(){return r});return t},wrap:function(e,t){var n=this;return null!==e&&"[object Object]"===ne.call(e)&&(e instanceof n.type||e instanceof ce||(e=e instanceof se?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(U,function(e){n.trigger(U,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.action||"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=K.apply(this,n),this.trigger(U,{action:"add",index:t,items:n}),e},slice:ee,join:Q,pop:function(){var e=this.length,t=J.apply(this);return e&&this.trigger(U,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,a,o=this.wrapAll(ee.call(arguments,2));if((i=X.apply(this,[e,t].concat(o))).length)for(this.trigger(U,{action:"remove",index:e,items:i}),r=0,a=i.length;r<a;r++)i[r].children&&i[r].unbind(U);return n&&this.trigger(U,{action:"add",index:e,items:o}),i},shift:function(){var e=this.length,t=Z.apply(this);return e&&this.trigger(U,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=te.apply(this,t),this.trigger(U,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1}}),se=B.extend({init:function(e){var t,n,i=this;B.fn.init.call(this);for(n in e)t=e[n],"_"!=n.charAt(0)&&(ne.call(t),t=i.wrap(t,n,function(){return i})),i[n]=t;i.uid=L.guid()},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&"function"!=typeof this[e]&&"uid"!==e},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(((e=this[t])instanceof se||e instanceof oe)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t=this;return t.trigger("get",{field:e}),"this"===e?t:L.getter(e,!0)(t)},_set:function(e,t){var n=this;if(e.indexOf("."))for(var i=e.split("."),r="";i.length>1;){r+=i.shift();var a=L.getter(r,!0)(n);if(a instanceof se)return void a.set(i.join("."),t);r+="."}L.setter(e)(n,t)},set:function(e,t){var n=this;n[e]!==t&&(n.trigger("set",{field:e,value:t})||(n._set(e,n.wrap(t,e,function(){return n})),n.trigger(U,{field:e})))},parent:P,wrap:function(e,t,n){var i=this,r=ne.call(e),a=e instanceof oe;return null===e||"[object Object]"!==r||e instanceof _e||a?null===e||"[object Array]"!==r&&!a?null!==e&&e instanceof _e&&(e._parent=n):(a||(e=new oe(e)),e.parent=n,function(t){e.bind(U,function(e){i.trigger(U,{field:t,index:e.index,items:e.items,action:e.action})})}(t)):(e instanceof se||(e=new se(e)),e.parent=n,function(t){e.bind("get",function(e){e.field=t+"."+e.field,i.trigger("get",e)}),e.bind(U,function(e){e.field=t+"."+e.field,i.trigger(U,e)})}(t)),e}}),le={number:function(e){return L.parseFloat(e)},date:function(e){if(typeof e===W){var t=re.exec(e);if(t)return new Date(parseInt(t[1],10))}return L.parseDate(e)},boolean:function(e){return typeof e===W?"true"===e.toLowerCase():!!e},string:function(e){return e+""},default:function(e){return e}},de={string:"",number:0,date:new Date,boolean:!1,default:""},ce=se.extend({init:function(n){var i=this;n&&!e.isEmptyObject(n)||(n=e.extend({},i.defaults,n)),se.fn.init.call(i,n),i.dirty=!1,i.idField&&(i.id=i.get(i.idField),i.id===t&&(i.id=i._defaultId))},shouldSerialize:function(e){return se.fn.shouldSerialize.call(this,e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n;return(e=(this.fields||{})[e])&&!(n=e.parse)&&e.type&&(n=le[e.type.toLowerCase()]),n?n(t):t},editable:function(e){return!(e=(this.fields||{})[e])||!1!==e.editable},set:function(e,t,i){var r=this;r.editable(e)&&(n(t=r._parse(e,t),r.get(e))||(r.dirty=!0,se.fn.set.call(r,e,t,i)))},accept:function(e){var t=this;A(t,e),t.idField&&(t.id=t.get(t.idField)),t.dirty=!1},isNew:function(){return this.id===this._defaultId}});ce.define=function(e,n){n===t&&(n=e,e=ce);var i,r,a,o,s,l=A({},{defaults:{}},n),d=l.id;d&&(l.idField=d),l.id&&delete l.id,d&&(l.defaults[d]=l._defaultId="");for(r in l.fields)o=(a=l.fields[r]).type||"default",s=null,r=typeof a.field===W?a.field:r,a.nullable||(s=l.defaults[r]=a.defaultValue!==t?a.defaultValue:de[o.toLowerCase()]),n.id===r&&(l._defaultId=s),l.defaults[r]=s,a.parse=a.parse||le[o];return i=e.extend(l),i.define=function(e){return ce.define(i,e)},l.fields&&(i.fields=l.fields,i.idField=l.idField),i};var ue={selector:function(e){return I(e)?e:G(e)},asc:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),e>n?1:e<n?-1:0}},desc:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),e<n?1:e>n?-1:0}},create:function(e){return this[e.dir.toLowerCase()](e.field)},combine:function(e){return function(t,n){var i,r,a=e[0](t,n);for(i=1,r=e.length;i<r;i++)a=a||e[i](t,n);return a}}},pe=A({},ue,{asc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i===r?e.__position-n.__position:i>r?1:i<r?-1:0}},desc:function(e){var t=this.selector(e);return function(e,n){var i=t(e),r=t(n);return i===r?e.__position-n.__position:i<r?1:i>r?-1:0}}});D=function(e,t){var n,i=e.length,r=new Array(i);for(n=0;n<i;n++)r[n]=t(e[n],n,e);return r};var fe=function(){function e(e){return e.replace(ae,"\\")}function t(t,n,i,r){var a;return null!=i&&(typeof i===W&&(i=e(i),(a=re.exec(i))?i=new Date(+a[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t+=".toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t+=".toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"') == "+t+".length - "+(n||"").length},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}();i.filterExpr=function(e){var n,r,a,o,s,l,d=[],c={and:" && ",or:" || "},u=[],p=[],f=e.filters;for(n=0,r=f.length;n<r;n++)s=(a=f[n]).field,l=a.operator,a.filters?(a=(o=i.filterExpr(a)).expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(p.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),p.push.apply(p,o.operators),u.push.apply(u,o.fields)):("function"==typeof s?(o="__f["+u.length+"](d)",u.push(s)):o=L.expr(s),"function"==typeof l?(a="__o["+p.length+"]("+o+", "+a.value+")",p.push(l)):a=fe[(l||"eq").toLowerCase()](o,a.value,a.ignoreCase===t||a.ignoreCase)),d.push(a);return{expression:"("+d.join(c[e.logic])+")",fields:u,operators:p}};var he={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain"};i.normalizeFilter=o,i.prototype={toArray:function(){return this.data},range:function(e,t){return new i(this.data.slice(e,e+t))},skip:function(e){return new i(this.data.slice(e))},take:function(e){return new i(this.data.slice(0,e))},select:function(e){return new i(D(this.data,e))},orderBy:function(e){var t=this.data.slice(0),n=I(e)||!e?ue.asc(e):e.compare;return new i(t.sort(n))},orderByDescending:function(e){return new i(this.data.slice(0).sort(ue.desc(e)))},sort:function(e,t,n){var i,a,o=r(e,t),s=[];if(n=n||ue,o.length){for(i=0,a=o.length;i<a;i++)s.push(n.create(o[i]));return this.orderBy({compare:n.combine(s)})}return this},filter:function(e){var t,n,r,a,s,l,d,c,u=this.data,p=[];if(!(e=o(e))||0===e.filters.length)return this;for(a=i.filterExpr(e),l=a.fields,d=a.operators,s=c=new Function("d, __f, __o","return "+a.expression),(l.length||d.length)&&(c=function(e){return s(e,l,d)}),t=0,r=u.length;t<r;t++)c(n=u[t])&&p.push(n);return new i(p)},group:function(e,t){e=l(e||[]),t=t||this.data;var n,r=new i(this.data);return e.length>0&&(n=e[0],r=r.groupBy(n).select(function(r){var a=new i(t).filter([{field:r.field,operator:"eq",value:r.value}]);return{field:r.field,value:r.value,items:e.length>1?new i(r.items).group(e.slice(1),a.toArray()).toArray():r.items,hasSubgroups:e.length>1,aggregates:a.aggregate(n.aggregates)}})),r},groupBy:function(e){if(z(e)||!this.data.length)return new i([]);var t,n,r,a,o=e.field,s=this._sortForGrouping(o,e.dir||"asc"),l=L.accessor(o),c=l.get(s[0],o),u={field:o,value:c,items:[]},p=[u];for(r=0,a=s.length;r<a;r++)t=s[r],d(c,n=l.get(t,o))||(u={field:o,value:c=n,items:[]},p.push(u)),u.items.push(t);return new i(p)},_sortForGrouping:function(e,t){var n,r,a=this.data;if(!ie){for(n=0,r=a.length;n<r;n++)a[n].__position=n;for(n=0,r=(a=new i(a).sort(e,t,pe).toArray()).length;n<r;n++)delete a[n].__position;return a}return this.sort(e,t).toArray()},aggregate:function(e){var t,n,i={};if(e&&e.length)for(t=0,n=this.data.length;t<n;t++)c(i,e,this.data[t],t,n);return i}};var ge={sum:function(e,t,n){return(e||0)+n.get(t)},count:function(e,t,n){return(e||0)+1},average:function(e,t,n,i,r){return e=(e||0)+n.get(t),i==r-1&&(e/=r),e},max:function(e,t,n){var i=n.get(t);return(e=e||0)<i&&(e=i),e},min:function(e,t,n){var i=n.get(t);return(e=e||i)>i&&(e=i),e}},me=q.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:P}),ve=q.extend({init:function(e){var t,n=this;e=n.options=A({},n.options,e),O(V,function(t,n){typeof e[n]===W&&(e[n]={url:e[n]})}),n.cache=e.cache?ke.create(e.cache):{find:P,add:P},t=e.parameterMap,n.parameterMap=I(t)?t:function(e){var n={};return O(e,function(e,i){e in t&&(e=t[e],E(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:j},create:function(e){return M(this.setup(e,"create"))},save:function(e){return M(this.setup(e,"save"))},read:function(n){var i,r,a=this,o=a.cache;n=a.setup(n,"read"),i=n.success||P,n.error,(r=o.find(n.data))!==t?i(r):(n.success=function(e){o.add(n.data,e),i(e),a.options.read.queryString=e.FilterCondition,a.options.read.sortString=e.SortCondition,a.options.read.storedProcedure=e.StoredProcedure,a.options.read.error!=t&&null!=a.options.read.error&&0==e.Total&&a.options.read.error(e.Total),a.options.read.success!=t&&null!=a.options.read.success&&e.Total>0&&a.options.read.success(e.Total)},e.ajax(n))},update:function(e){return M(this.setup(e,"update"))},destroy:function(e){return M(this.setup(e,"destroy"))},setup:function(e,t){e=e||{};var n,i=this,r=i.options[t],a=I(r.data)?r.data(e.data):r.data;return e=A(!0,{},r,e),n=A(!0,{},a,e.data),e.data=i.parameterMap(n,t),I(e.url)&&(e.url=e.url(n)),e}}),ke=q.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[$(e)]=n)},find:function(e){return this._store[$(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[$(e)]}});ke.create=function(e){var t={inmemory:function(){return new ke}};return E(e)&&I(e.find)?e:!0===e?new ke:t[e]()};var be=q.extend({init:function(e){var t,n,i,r,a=this;e=e||{};for(t in e)n=e[t],a[t]=typeof n===W?G(n):n;if(r=e.modelBase||ce,E(a.model)){a.model=i=r.define(a.model);var o=H(a.data,a),s=H(a.groups,a),l={};i.fields&&O(i.fields,function(e,t){E(t)&&t.field?l[t.field]=G(t.field):l[e]=G(e)}),a.data=m(o,i,h,l),a.groups=m(s,i,g,l)}},errors:function(e){return e?e.errors:null},parse:j,data:j,total:function(e){return e.length},groups:j,status:function(e){return e.status},aggregates:function(){return{}}}),_e=B.extend({init:function(e){var n,i,a=this;e&&(i=e.data),e=a.options=A({},a.options,e),A(a,{_map:{},_prefetch:{},_data:[],_ranges:[],_view:[],_pristine:[],_destroyed:[],_pageSize:e.pageSize,_page:e.page||(e.pageSize?1:t),_sort:r(e.sort),_filter:o(e.filter),_group:l(e.group),_aggregate:e.aggregate,_total:e.total}),B.fn.init.call(a),(n=e.transport)?(n.read=typeof n.read===W?{url:n.read}:n.read,e.type&&(L.data.transports[e.type]&&!E(L.data.transports[e.type])?a.transport=new L.data.transports[e.type](A(n,{data:i})):n=A(!0,{},L.data.transports[e.type],n),e.schema=A(!0,{},L.data.schemas[e.type],e.schema)),a.transport||(a.transport=I(n.read)?n:new ve(n))):a.transport=new me({data:e.data}),a.reader=new L.data.readers[e.schema.type||"json"](e.schema),a.reader.model,a._data=a._observe(a._data),a.bind(["error",U,"requestStart"],e)},options:{data:[],schema:{modelBase:ce},serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,sendAllFields:!0,batch:!1},online:function(n){return n!==t?this._online!=n&&(this._online=n,n)?this.sync():e.Deferred().resolve().promise():this._online},offlineData:function(e){return null==this.options.offlineStorage?null:e!==t?this._storage.setItem(e):this._storage.getItem()||{}},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_flatData:function(e){return this.options.serverGrouping&&this.group().length?v(e):e},get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;t<n;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;t<n;t++)if(i[t].uid==e)return i[t]},sync:function(){var t,n,i=this,r=[],a=[],o=i._destroyed,s=i._flatData(i._data);if(i.reader.model){for(t=0,n=s.length;t<n;t++)s[t].isNew()?r.push(s[t]):s[t].dirty&&a.push(s[t]);var l=i._send("create",r);l.push.apply(l,i._send("update",a)),l.push.apply(l,i._send("destroy",o)),e.when.apply(null,l).then(function(){var e,t;for(e=0,t=arguments.length;e<t;e++)i._accept(arguments[e]);i._change()})}},_accept:function(t){var n,i=this,r=t.models,a=t.response,o=0,s=i.options.serverGrouping&&i.group()&&i.group().length,l=i.reader.data(i._pristine),d=t.type;if(a){if(a=i.reader.parse(a),i._handleCustomErrors(a))return;a=i.reader.data(a),e.isArray(a)||(a=[a])}else a=e.map(r,function(e){return e.toJSON()});for("destroy"===d&&(i._destroyed=[]),o=0,n=r.length;o<n;o++)"destroy"!==d?(r[o].accept(a[o]),"create"===d?l.push(s?w(i.group(),r[o]):r[o]):"update"===d&&(s?i._updatePristineGroupModel(r[o],a[o]):A(l[i._pristineIndex(r[o])],a[o]))):s?i._removePristineGroupModel(r[o]):l.splice(i._pristineIndex(r[o]),1)},_pristineIndex:function(e){var t,n,i=this,r=i.reader.data(i._pristine);for(t=0,n=r.length;t<n;t++)if(r[t][e.idField]===e.id)return t;return-1},_updatePristineGroupModel:function(e,t){var n;b(this.reader.groups(this._pristine),function(i,r){if((n=y(i,e))>-1)return A(!0,i[n],t),!0})},_removePristineGroupModel:function(e){var t;b(this.reader.groups(this._pristine),function(n,i){if((t=y(n,e))>-1)return n.splice(t,1),!0})},_promise:function(t,n,i){var r=this,a=r.transport;return e.Deferred(function(e){a[i].call(a,A({success:function(t){e.resolve({response:t,models:n,type:i})},error:function(t){e.reject(t),r.trigger("error",t)}},t))}).promise()},_send:function(e,t){var n,i,r=this,a=[];if(r.options.batch)t.length&&a.push(r._promise({data:{models:u(t)}},t,e));else for(n=0,i=t.length;n<i;n++)a.push(r._promise({data:t[n].toJSON()},[t[n]],e));return a},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof se?e:new se(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof ce||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,w(this.group(),t)):this._data.splice(e,0,t),t},cancelChanges:function(e){var t,n,i=this,r=i.options.serverGrouping&&i.group()&&i.group().length,a=(r?i.reader.groups:i.reader.data)(i._pristine);e instanceof L.data.Model?r?i._cancelGroupModel(e):(n=i.indexOf(e),t=i._pristineIndex(e),-1!=n&&(-1==t||e.isNew()?i._data.splice(n,1):A(!0,i._data[n],a[t]))):(i._destroyed=[],i._data=i._observe(a),i._change())},read:function(e){var t=this,n=t._params(e);t._queueRequest(n,function(){t.trigger("requestStart"),t._ranges=[],t.transport.read({data:n,success:H(t.success,t),error:H(t.error,t)})})},_cancelGroupModel:function(e){var t,n;b(this.reader.groups(this._pristine),function(i,r){if((n=y(i,e))>-1)return t=i[n],!0}),n>-1&&b(this._data,function(i,r){(n=x(i,e))>-1&&(e.isNew()?i.splice(n,1):A(!0,i[n],t))})},indexOf:function(e){return x(this._data,e)},_params:function(e){var t=this,n=A({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate},e);return t.options.serverPaging||(delete n.take,delete n.skip,delete n.page,delete n.pageSize),n},_queueRequest:function(e,n){var i=this;i._requestInProgress?i._pending={callback:H(n,i),options:e}:(i._requestInProgress=!0,i._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},remove:function(e){var t=this._data;return this.options.serverGrouping&&this.group()&&this.group().length?this._removeGroupItem(t,e):_(t,e)},_removeGroupItem:function(e,t){var n;return b(e,function(e,i){if(n=_(e,t))return!0}),t},error:function(e,t,n){this._dequeueRequest(),this.trigger("error",{xhr:e,status:t,errorThrown:n})},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger("error",{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0}return!1},_parent:P,success:function(t){var n=this,i=n.options,r=!0===i.serverGrouping&&n._group&&n._group.length>0;if(t=n.reader.parse(t),!n._handleCustomErrors(t)){n._pristine=E(t)?e.extend(!0,{},t):t.slice(0),n._total=n.reader.total(t),n._aggregate&&i.serverAggregates&&(n._aggregateResult=n.reader.aggregates(t)),t=r?n.reader.groups(t):n.reader.data(t),n._data=n._observe(t);var a=n._skip||0,o=a+n._data.length;n._ranges.push({start:a,end:o,data:n._data}),n._ranges.sort(function(e,t){return e.start-t.start}),n._dequeueRequest(),n._process(n._data)}},_observe:function(e){var t=this,n=t.reader.model,i=!1;return n&&e.length&&(i=!(e[0]instanceof n)),e instanceof oe?i&&(e.type=t.reader.model,e.wrapAll(e,e)):(e=new oe(e,t.reader.model)).parent=function(){return t._parent()},t.group()&&t.group().length&&t.options.serverGrouping&&k(e,n),e.bind(U,H(t._change,t))},_change:function(e){var t,n,i=this,r=e?e.action:"";if("remove"===r)for(t=0,n=e.items.length;t<n;t++)e.items[t].isNew&&e.items[t].isNew()||i._destroyed.push(e.items[t]);if(!i.options.autoSync||"add"!==r&&"remove"!==r&&"itemchange"!==r){var a=i._total||i.reader.total(i._pristine);"add"===r?a++:"remove"===r?a--:"itemchange"===r||i.options.serverPaging||(a=i.reader.total(i._pristine)),i._total=a,i._process(i._data,e)}else i.sync()},_process:function(e,n){var i,r=this,a={};!0!==r.options.serverPaging&&(a.skip=r._skip,a.take=r._take||r._pageSize,a.skip===t&&r._page!==t&&r._pageSize!==t&&(a.skip=(r._page-1)*r._pageSize)),!0!==r.options.serverSorting&&(a.sort=r._sort),!0!==r.options.serverFiltering&&(a.filter=r._filter),!0!==r.options.serverGrouping&&(a.group=r._group),!0!==r.options.serverAggregates&&(a.aggregate=r._aggregate,r._aggregateResult=f(e,a)),i=p(e,a),r._view=i.data,i.total===t||r.options.serverFiltering||(r._total=i.total),(n=n||{}).items=n.items||r._view,r.trigger(U,n)},at:function(e){return this._data[e]},data:function(e){var n=this;if(e===t)return n._data;n._data=this._observe(e),n._total=n._data.length,n._process(n._data)},view:function(){return this._view},query:function(e){var n,i=this,a=i.options.serverSorting||i.options.serverPaging||i.options.serverFiltering||i.options.serverGrouping||i.options.serverAggregates;e!==t&&(i._pageSize=e.pageSize,i._page=e.page,i._sort=e.sort,i._filter=e.filter,i._group=e.group,i._aggregate=e.aggregate,i._skip=e.skip,i._take=e.take,i._skip===t&&(i._skip=i.skip(),e.skip=i.skip()),i._take===t&&i._pageSize!==t&&(i._take=i._pageSize,e.take=i._take),e.sort&&(i._sort=e.sort=r(e.sort)),e.filter&&(i._filter=e.filter=o(e.filter)),e.group&&(i._group=e.group=l(e.group)),e.aggregate&&(i._aggregate=e.aggregate=s(e.aggregate))),a||i._data===t||0===i._data.length?i.read(e):(i.trigger("requestStart"),n=p(i._data,e),i.options.serverFiltering||(n.total!==t?i._total=n.total:i._total=i._data.length),i._view=n.data,i._aggregateResult=f(i._data,e),i.trigger(U,{items:n.data}))},fetch:function(e){var t=this;e&&I(e)&&t.one(U,e),t._query()},_query:function(e){var t=this;t.query(A({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(){var e=this,t=e.page(),n=e.total();t&&(n?e.page(t+1):(e._skip=t*e.take(),e._query({page:t+1})))},prev:function(){var e=this,t=e.page(),n=e.total();t&&1!==t&&(n?e.page(t-1):(e._skip=e._skip-e.take(),e._query({page:t-1})))},page:function(e){var n,i=this;return e!==t?(e=Y.max(Y.min(Y.max(e,1),i.totalPages()),1),void i._query({page:e})):(n=i.skip(),n!==t?Y.round((n||0)/(i.take()||1))+1:t)},pageSize:function(e){var n=this;{if(e===t)return n.take();n._query({pageSize:e,page:1})}},sort:function(e){var n=this;{if(e===t)return n._sort;n._query({sort:e})}},filter:function(e){var n=this;if(e===t)return n._filter;n._query({filter:e,page:1})},group:function(e){var n=this;{if(e===t)return n._group;n._query({group:e})}},total:function(){return this._total||0},aggregate:function(e){var n=this;{if(e===t)return n._aggregate;n._query({aggregate:e})}},aggregates:function(){return this._aggregateResult},totalPages:function(){var e=this,t=e.pageSize()||e.total();return Y.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=Y.min(e+t,n.total());return!n.options.serverPaging&&n.data.length>0||n._findRange(e,i).length>0},range:function(e,n){e=Y.min(e||0,this.total());var i,r=this,a=Y.max(Y.floor(e/n),0)*n,o=Y.min(a+n,r.total());if((i=r._findRange(e,Y.min(e+n,r.total()))).length){r._skip=e>r.skip()?Y.min(o,(r.totalPages()-1)*r.take()):a,r._take=n;var s=r.options.serverPaging,l=r.options.serverSorting;try{r.options.serverPaging=!0,r.options.serverSorting=!0,s&&(r._data=i=r._observe(i)),r._process(i)}finally{r.options.serverPaging=s,r.options.serverSorting=l}}else n!==t&&(r._rangeExists(a,o)?a<e&&r.prefetch(o,n,function(){r.range(e,n)}):r.prefetch(a,n,function(){e>a&&o<r.total()&&!r._rangeExists(o,Y.min(o+n,r.total()))?r.prefetch(o,n,function(){r.range(e,n)}):r.range(e,n)}))},_findRange:function(e,n){var i,r,a,o,s,l,d,c,u,f=this,h=f._ranges,g=[],m=f.options,v=m.serverSorting||m.serverPaging||m.serverFiltering||m.serverGrouping||m.serverAggregates;for(r=0,u=h.length;r<u;r++)if(i=h[r],e>=i.start&&e<=i.end){var k=0;for(a=r;a<u;a++)if((i=h[a]).data.length&&e+k>=i.start&&(l=i.data,d=i.end,v||(l=(c=p(i.data,{sort:f.sort(),filter:f.filter()})).data,c.total!==t&&(d=c.total)),o=0,e+k>i.start&&(o=e+k-i.start),s=l.length,d>n&&(s-=d-n),k+=s-o,g=g.concat(l.slice(o,s)),n<=i.end&&k==n-e))return g;break}return[]},skip:function(){var e=this;return e._skip===t?e._page!==t?(e._page-1)*(e.take()||1):t:e._skip},take:function(){var e=this;return e._take||e._pageSize},prefetch:function(e,t,n){var i=this,r=Y.min(e+t,i.total()),a={start:e,end:r,data:[]},o={take:t,skip:e,page:e/t+1,pageSize:t,sort:i._sort,filter:i._filter,group:i._group,aggregate:i._aggregate};i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(o,function(){i.transport.read({data:o,success:function(t){i._dequeueRequest();for(var r=!1,o=0,s=i._ranges.length;o<s;o++)if(i._ranges[o].start===e){r=!0,a=i._ranges[o];break}r||i._ranges.push(a),t=i.reader.parse(t),a.data=i._observe(i.reader.data(t)),a.end=a.start+a.data.length,i._ranges.sort(function(e,t){return e.start-t.start}),i._total=i.reader.total(t),n&&n()}})})},100))},_rangeExists:function(e,t){var n,i,r=this._ranges;for(n=0,i=r.length;n<i;n++)if(r[n].start<=e&&r[n].end>=t)return!0;return!1}});_e.create=function(e){var t,n,i,r=(e=e&&e.push?{data:e}:e)||{},a=r.data,o=r.fields,s=r.table,l=r.select,d={};if(a||!o||r.transport||(s?a=S(s,o):l&&(a=T(l,o))),L.data.Model&&o&&(!r.schema||!r.schema.model)){for(t=0,n=o.length;t<n;t++)(i=o[t]).type&&(d[i.field]=i);z(d)||(r.schema=A(!0,r.schema,{model:{fields:d}}))}return r.data=a,r instanceof _e?r:new _e(r)};var we=ce.define({init:function(e){var t=this,n=t.hasChildren||e.hasChildren,i="items",r={};L.data.Model.fn.init.call(t,e),typeof t.children===W&&(i=t.children),r=A({schema:{data:i,model:{hasChildren:n}}},t.children,{data:e}),n||(n=r.schema.data),typeof n===W&&(n=L.getter(n)),I(n)&&(t.hasChildren=!!n.call(t,t)),t.children=new ye(r),t.children._parent=function(){return t},t.children.bind(U,function(e){e.node=e.node||t,t.trigger(U,e)}),t._loaded=!(!e||!e[i])},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e;)t++,e=e.parentNode();return t},load:function(){var e=this,n={};n[e.idField||"id"]=e.id,e._loaded||(e.children._data=t),e.children.one(U,function(){e._loaded=!0}).query(n)},parentNode:function(){return this.parent().parent()},loaded:function(e){if(e===t)return this._loaded;this._loaded=e},shouldSerialize:function(e){return ce.fn.shouldSerialize.call(this,e)&&"children"!==e&&"_loaded"!==e&&"hasChildren"!==e}}),ye=_e.extend({init:function(e){var t=we.define({children:e});_e.fn.init.call(this,A(!0,{},{schema:{modelBase:t,model:t}},e))},remove:function(e){var t,n=e.parentNode(),i=this;return n&&(i=n.children),t=_e.fn.remove.call(i,e),n&&!i.data().length&&(n.hasChildren=!1),t},insert:function(e,t){var n=this._parent();return n&&(n.hasChildren=!0),_e.fn.insert.call(this,e,t)},getByUid:function(e){var t,n,i,r;if(i=_e.fn.getByUid.call(this,e))return i;for(t=0,n=(r=this._flatData(this.data())).length;t<n;t++)if(i=r[t].children.getByUid(e))return i}});ye.create=function(e){var t=(e=e&&e.push?{data:e}:e)||{},n=t.data,i=t.fields,r=t.list;return n||!i||t.transport||r&&(n=F(r,i)),t.data=n,t instanceof ye?t:new ye(t)},A(!0,L.data,{readers:{json:be},Query:i,DataSource:_e,HierarchicalDataSource:ye,Node:we,ObservableObject:se,ObservableArray:oe,LocalTransport:me,RemoteTransport:ve,Cache:ke,DataReader:be,Model:ce})}(jQuery),function(e,t){function n(e){var t,i,r=[];for(t=0,i=e.length;t<i;t++)r=e[t].hasSubgroups?r.concat(n(e[t].items)):r.concat(e[t].items);return r}function i(e,t,n){var i=n.roles,r=i[e];if(r)return new S(u.initWidget(t,r.options,i))}function r(e){var t,n,i,a,o,s,l,d={};for(t=0,n=(l=e.match(F)).length;t<n;t++)a=(i=l[t]).indexOf(":"),o=i.substring(0,a),"{"==(s=i.substring(a+1)).charAt(0)&&(s=r(s)),d[o]=s;return d}function a(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function o(e,t,n){var s,d,c,p=e.getAttribute("data-"+u.ns+"role"),f=e.getAttribute("data-"+u.ns+"bind"),h=e.children,g=!0,m={};if(n||(n=u.ui),(p||f)&&l(e),p&&(c=i(p,e,n)),f&&(f=r(f.replace(D,"")),c||(m=u.parseOptions(e,{textField:"",valueField:"",template:"",valueUpdate:_}),c=new T(e,m)),c.source=t,d=a(f,t,w),m.template&&(d.template=new x(t,"",m.template)),d.click&&(f.events=f.events||{},f.events.click=f.click,delete d.click),d.source&&(g=!1),f.attr&&(d.attr=a(f.attr,t,w)),f.style&&(d.style=a(f.style,t,w)),f.events&&(d.events=a(f.events,t,y)),c.bind(d)),c&&(e.kendoBindingTarget=c),g&&h)for(s=0;s<h.length;s++)o(h[s],t,n)}function s(t,n,i){var r,a;for(n=u.observable(n),r=0,a=(t=e(t)).length;r<a;r++)o(t[r],n,i)}function l(t){var n=t.kendoBindingTarget;n&&(n.destroy(),e.support.deleteExpando?delete t.kendoBindingTarget:t.removeAttribute?t.removeAttribute("kendoBindingTarget"):t.kendoBindingTarget=null)}function d(e){var t,n,i=e.children;if(l(e),i)for(t=0,n=i.length;t<n;t++)d(i[t])}var c,u=window.kendo,p=u.Observable,f=u.data.ObservableObject,h=u.data.ObservableArray,g={}.toString,m={},v=u.Class,k=e.proxy,b="value",_="change";!function(){var e=document.createElement("a");void 0!==e.innerText?c="innerText":void 0!==e.textContent&&(c="textContent")}();var w=p.extend({init:function(e,t){var n=this;p.fn.init.call(n),n.source=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof p,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(_,n._change))},change:function(e){var t,n,i=this;if("this"===i.path)i.trigger(_,e);else for(t in i.dependencies)if(0===t.indexOf(e.field)&&(!(n=t.charAt(e.field.length))||"."===n||"["===n)){i.trigger(_,e);break}},start:function(){this.observable&&this.source.bind("get",this._access)},stop:function(){this.observable&&this.source.unbind("get",this._access)},get:function(){var e,t=this,n=t.source,i=t.path,r=n;if(t.start(),t.observable){for(r=n.get(i);void 0===r&&n;)(n=n.parent())instanceof f&&(r=n.get(i));"function"==typeof r&&((e=i.lastIndexOf("."))>0&&(n=n.get(i.substring(0,e))),r=(r=k(r,n))(t.source)),n&&n!==t.source&&n.unbind(_,t._change).bind(_,t._change)}return t.stop(),r},set:function(e){this.source.set(this.path,e)},destroy:function(){this.observable&&this.source.unbind(_,this._change)}}),y=w.extend({get:function(){var e,t=this.source,n=this.path;for(e=t.get(n);!e&&t;)(t=t.parent())instanceof f&&(e=t.get(n));return k(e,t)}}),x=w.extend({init:function(e,t,n){var i=this;w.fn.init.call(i,e,t),i.template=n},render:function(e){var t;return this.start(),t=u.render(this.template,e),this.stop(),t}}),C=v.extend({init:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;(e=t?e[t]:e).bind(_,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}});m.attr=C.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),m.style=C.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()}}),m.enabled=C.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","disabled")}}),m.disabled=C.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute("disabled","disabled"):this.element.removeAttribute("disabled")}}),m.events=C.extend({init:function(e,t,n){C.fn.init.call(this,e,t,n),this.handlers={}},refresh:function(t){var n=this.bindings.events[t],i=this.handlers[t]=n.get();e(this.element).bind(t,n.source,i)},destroy:function(){var t,n=e(this.element);for(t in this.handlers)n.unbind(t,this.handlers[t])}}),m.text=C.extend({refresh:function(){var e=this.bindings.text.get();null==e&&(e=""),this.element[c]=e}}),m.visible=C.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),m.invisible=C.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),m.html=C.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),m.value=C.extend({init:function(t,n,i){C.fn.init.call(this,t,n,i),this._change=k(this.change,this),this.eventName=i.valueUpdate||_,e(this.element).bind(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=_,this.bindings[b].set(this.element.value),this._initChange=!1},refresh:function(){if(!this._initChange){var e=this.bindings[b].get();null==e&&(e=""),this.element.value=e}this._initChange=!1},destroy:function(){e(this.element).unbind(this.eventName,this._change)}}),m.source=C.extend({init:function(e,t,n){C.fn.init.call(this,e,t,n)},refresh:function(e){var t=this;t.bindings.source.get()instanceof h?"add"==(e=e||{}).action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):"itemchange"!=e.action&&t.render():t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t||(t="select"==n?e.valueField||e.textField?u.format('<option value="#:{0}#">#:{1}#</option>',e.valueField||e.textField,e.textField||e.valueField):"<option>#:data#</option>":"tbody"==n?"<tr><td>#:data#</td></tr>":"ul"==n||"ol"==n?"<li>#:data#</li>":"#:data#",t=u.template(t)),t},destroy:function(){this.bindings.source.get().unbind(_,this._change)},add:function(t,n){var i,r,a,s=this.container(),l=s.cloneNode(!1),d=s.children[t];if(e(l).html(u.render(this.template(),n)),l.children.length)for(i=0,r=n.length;i<r;i++)a=l.children[0],s.insertBefore(a,d||null),o(a,n[i])},remove:function(e,t){var n,i=this.container();for(n=0;n<t.length;n++)i.removeChild(i.children[e])},render:function(){var t,n,i,r=this.bindings.source.get(),a=this.container(),s=this.template();if(r instanceof h||"[object Array]"===g.call(r)||(r.parent&&(i=r.parent),(r=new h([r])).parent&&(r.parent=i)),this.bindings.template){if(e(a).html(this.bindings.template.render(r)),a.children.length)for(t=0,n=r.length;t<n;t++)o(a.children[t],r[t])}else e(a).html(u.render(s,r))}}),m.input={checked:C.extend({init:function(t,n,i){C.fn.init.call(this,t,n,i),this._change=k(this.change,this),e(this.element).change(this._change)},change:function(){var e=this.element,t=this.value();if("radio"==e.type)this.bindings.checked.set(t);else if("checkbox"==e.type){var n,i=this.bindings.checked.get();i instanceof h?!1!==t&&!0!==t&&((n=i.indexOf(t))>-1?i.splice(n,1):i.push(t)):this.bindings.checked.set(t)}},refresh:function(){var e=this.bindings.checked.get(),t=this.element;"checkbox"==t.type?(e instanceof h&&e.indexOf(this.value(t))>=0&&(e=!0),t.checked=!0===e):"radio"==t.type&&null!=e&&t.value===e.toString()&&(t.checked=!0)},value:function(){var e=this.element,t=e.value;return"checkbox"==e.type&&("on"!=t&&"off"!=t&&"true"!==t||(t=e.checked)),t},destroy:function(){e(this.element).unbind(_,this._change)}})},m.select={value:C.extend({init:function(t,n,i){C.fn.init.call(this,t,n,i),this._change=k(this.change,this),e(this.element).change(this._change)},change:function(){var e,t,n,i,r,a,o=[],s=this.element,l=this.options.valueField||this.options.textField;for(r=0,a=s.options.length;r<a;r++)(t=s.options[r]).selected&&(i=(i=t.attributes.value)&&i.specified?t.value:t.text,o.push(i));if(l)for(e=this.bindings.source.get(),n=0;n<o.length;n++)for(r=0,a=e.length;r<a;r++)if(e[r].get(l)==o[n]){o[n]=e[r];break}(i=this.bindings[b].get())instanceof h?i.splice.apply(i,[0,i.length].concat(o)):i instanceof f||!l?this.bindings[b].set(o[0]):this.bindings[b].set(o[0].get(l))},refresh:function(){var e,t,n=this.element.options,i=this.bindings[b].get(),r=i,a=this.options.valueField||this.options.textField;r instanceof h||(r=new h([i]));for(var o=0;o<r.length;o++)for(i=r[o],a&&i instanceof f&&(i=i.get(a)),e=0;e<n.length;e++)""===(t=n[e].value)&&""!==i&&(t=n[e].text),t==i&&(n[e].selected=!0)},destroy:function(){e(this.element).unbind(_,this._change)}})},m.widget={events:C.extend({init:function(e,t,n){C.fn.init.call(this,e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=t.get();this.handlers[e]=function(e){e.data=t.source,n(e)},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),checked:C.extend({init:function(e,t,n){C.fn.init.call(this,e.element[0],t,n),this.widget=e,this._change=k(this.change,this),this.widget.bind(_,this._change)},change:function(){this.bindings.checked.set(this.value())},refresh:function(){this.widget.check(!0===this.bindings.checked.get())},value:function(){var e=this.element,t=e.value;return"on"!=t&&"off"!=t||(t=e.checked),t},destroy:function(){this.widget.unbind(_,this._change)}}),visible:C.extend({init:function(e,t,n){C.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),invisible:C.extend({init:function(e,t,n){C.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),enabled:C.extend({init:function(e,t,n){C.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),disabled:C.extend({init:function(e,t,n){C.fn.init.call(this,e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),source:C.extend({init:function(e,t,n){var i=this;C.fn.init.call(i,e.element[0],t,n),i.widget=e,i._dataBinding=k(i.dataBinding,i),i._dataBound=k(i.dataBound,i),i._itemChange=k(i.itemChange,i)},itemChange:function(e){o(e.item[0],e.data,e.ns||u.ui)},dataBinding:function(){var e,t,n=this.widget.items();for(e=0,t=n.length;e<t;e++)d(n[e])},dataBound:function(e){var t,i,r=this.widget,a=r.items(),s=r.dataSource,l=s.view(),d=e.ns||u.ui,c=s.group()||[];if(a.length)for(c.length&&(l=n(l)),t=0,i=l.length;t<i;t++)o(a[t],l[t],d)},refresh:function(e){var t,n=this,i=n.widget;(e=e||{}).action||(n.destroy(),i.bind("dataBinding",n._dataBinding),i.bind("dataBound",n._dataBound),i.bind("itemChange",n._itemChange),i.dataSource instanceof u.data.DataSource&&((t=n.bindings.source.get())instanceof u.data.DataSource?i.setDataSource(t):i.dataSource.data(t)))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}}),value:C.extend({init:function(t,n,i){C.fn.init.call(this,t.element[0],n,i),this.widget=t,this._change=e.proxy(this.change,this),this.widget.first(_,this._change);var r=this.bindings.value.get();this._valueIsObservableObject=null==r||r instanceof f},change:function(){var e,t,n=this.widget.value(),i=this.options.dataValueField||this.options.dataTextField;if(i){var r,a=this._valueIsObservableObject;if(this.bindings.source&&(r=this.bindings.source.get()),""===n&&a)n=null;else for((!r||r instanceof u.data.DataSource)&&(r=this.widget.dataSource.view()),e=0,t=r.length;e<t;e++)if(r[e].get(i)==n){n=a?r[e]:r[e].get(i);break}}this.bindings.value.set(n)},refresh:function(){var e=this.options.dataValueField||this.options.dataTextField,t=this.bindings.value.get();e&&t instanceof f&&(t=t.get(e)),this.widget.value(t)},destroy:function(){this.widget.unbind(_,this._change)}})};var T=v.extend({init:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n=this.target.nodeName.toLowerCase(),i=m[n]||{};for(t in e)this.applyBinding(t,e,i)},applyBinding:function(e,t,n){var i,r=n[e]||m[e],a=this.toDestroy,o=t[e];if(r)if(r=new r(this.target,t,this.options),a.push(r),o instanceof w)r.bind(o),a.push(o);else for(i in o)r.bind(o,i),a.push(o[i]);else if("template"!==e)throw new Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;e<t;e++)n[e].destroy()}}),S=T.extend({bind:function(e){var t,n=this,i=!1,r=!1;for(t in e)t==b?i=!0:"source"==t?r=!0:n.applyBinding(t,e);r&&n.applyBinding("source",e),i&&n.applyBinding(b,e)},applyBinding:function(e,t){var n,i=m.widget[e],r=this.toDestroy,a=t[e];if(!i)throw new Error("The "+e+" binding is not supported by the "+this.target.options.name+" widget");if(i=new i(this.target,t,this.target.options),r.push(i),a instanceof w)i.bind(a),r.push(a);else for(n in a)i.bind(a,n),r.push(a[n])}}),F=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,D=/\s/g;u.unbind=function(t){var n,i;for(n=0,i=(t=e(t)).length;n<i;n++)d(t[n])},u.bind=s,u.data.binders=m,u.data.Binder=C,u.notify=function(e,t){var n=e.element,i=n[0].kendoBindingTarget;i&&s(n,i.source,t)},u.observable=function(e){return e instanceof f||(e=new f(e)),e}}(jQuery),function(e,t){function n(t){var n,i=r.ui.validator.ruleResolvers||{},a={};for(n in i)e.extend(!0,a,i[n].resolve(t));return a}function i(e){return e.replace(/&amp/g,"&amp;").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}var r=window.kendo,a=r.ui.Widget,o="k-tooltip-validation input-validation-error",s=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,l=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,d=e.proxy,c=function(e,t){return"string"==typeof t&&(t=new RegExp("^(?:"+t+")$")),t.test(e)},u=function(e,t,n){var i=e.val();return!e.filter(t).length||""===i||c(i,n)},p=function(e,t){return!!e.length&&void 0!==e[0].attributes[t]},f=/(\[|\]|\$|\.|\:|\+)/g;r.ui.validator||(r.ui.validator={rules:{},messages:{}});var h=a.extend({init:function(t,i){var o=this,s=n(t);(i=i||{}).rules=e.extend({},r.ui.validator.rules,s.rules,i.rules),i.messages=e.extend({},r.ui.validator.messages,s.messages,i.messages),a.fn.init.call(o,t,i),o._errorTemplate=r.template(o.options.errorTemplate),o.element.is("form")&&o.element.attr("novalidate","novalidate"),o._errors={},o._attachEvents()},options:{name:"Validator",errorTemplate:'<span style="width:100px;"><span class="k-widget k-tooltip k-tooltip-validation"><span class="k-warning" style="cursor:pointer;"> ${message}</span></span></span>',messages:{required:"{0} is required",pattern:"{0} is not valid",min:"{0} should be greater than or equal to {1}",max:"{0} should be smaller than or equal to {1}",step:"{0} is not valid",email:"{0} is not valid email",url:"{0} is not valid URL",date:"{0} is not valid date"},rules:{required:function(e){var t=e.filter("[type=checkbox]").length&&"checked"!==e.attr("checked"),n=e.val();return!(p(e,"data-val-required")&&(""===n||!n||t))},pattern:function(e){return!e.filter("[type=text],[type=email],[type=url],[type=tel],[type=search],[type=password]").filter("[pattern]").length||""===e.val()||c(e.val(),e.attr("pattern"))},min:function(e){return!e.filter("[type=number],[type=range],["+r.attr("type")+"=number]").filter("[min]").length||""===e.val()||(parseFloat(e.attr("min"))||0)<=parseFloat(e.val())},max:function(e){return!e.filter("[type=number],[type=range],["+r.attr("type")+"=number]").filter("[max]").length||""===e.val()||(parseFloat(e.attr("max"))||0)>=parseFloat(e.val())},step:function(e){if(e.filter("[type=number],[type=range],["+r.attr("type")+"=number]").filter("[step]").length&&""!==e.val()){var t=parseFloat(e.attr("min"))||0,n=parseFloat(e.attr("step"))||0;return 10*(parseFloat(e.val())-t)%(10*n)/100==0}return!0},email:function(e){return u(e,"[type=email],["+r.attr("type")+"=email]",s)},url:function(e){return u(e,"[type=url],["+r.attr("type")+"=url]",l)},date:function(e){return!e.filter("[type^=date],["+r.attr("type")+"=date]").length||""===e.val()||null!==r.parseDate(e.val(),e.attr(r.attr("format")))}},validateOnBlur:!0,pageErrorIcon:!0},_submit:function(e){return!!this.validate()||(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1)},_attachEvents:function(){var t=this;t.element.is("form")&&t.element.submit(d(t._submit,t)),t.options.validateOnBlur&&(t.element.is(":[data-val-required]")?t.element.bind("blur",function(){t.validateInput(t.element)}):t.element.delegate(":[data-val-required]","blur",function(){t.validateInput(e(this))}))},validate:function(){var e,t,n,i=this,r=!1;if(i._errors={},!i.element.is(":[data-val-required]")){for(t=0,n=(e=i.element.find(":[data-val-required]")).length;t<n;t++)i.validateInput(e.eq(t))||(r=!0);return!r}return i.validateInput(i.element)},validateInput:function(t){t=e(t);var n,r=this,a=r._errorTemplate,s=r._checkValidity(t),l=s.valid,d=t.attr("name")||"",c=r._findMessageContainer(d).add(t.next(".k-invalid-msg")).hide();if("true"===r.options.pageErrorIcon&&!l&&void 0==t.attr("HideErrorIcon")){n=r._extractMessage(t,s.key),r._errors[d]=n;var u=e(a({message:i(n)}));r._decorateMessageContainer(u,d),c.replaceWith(u).length||(void 0!=t.attr("DateType")?(e('<span class="span-space">**</span>').insertAfter(t.closest("td").find("span.k-select")),u.insertAfter(t.closest("td").find("span.span-space"))):void 0!=t.attr("AutoComplete")?(e('<span class="span-space">**</span>').insertAfter(t.closest("td").find("span.k-header")),u.insertAfter(t.closest("td").find("span.span-space"))):(e('<span class="span-space">**</span>').insertAfter(t),u.insertAfter(t.closest("td").find("span.span-space")))),u.show()}return void 0!=t.attr("NumberType")?t.closest("td").find("input:[id='_temp"+t.attr("name")+"']").toggleClass(o,!l):t.toggleClass(o,!l),l},_findMessageContainer:function(e){var t,n=r.ui.validator.messageLocators,i=this.element.find(".k-invalid-msg["+r.attr("for")+"="+e.replace(f,"\\$1")+"]");for(t in n)i=i.add(n[t].locate(this.element,e));return i},_decorateMessageContainer:function(e,t){var n,i=r.ui.validator.messageLocators;e.addClass("k-invalid-msg").attr(r.attr("for"),t||"");for(n in i)i[n].decorate(e,t)},_extractMessage:function(t,n){var i=this.options.messages[n],a=void 0!=t.attr("title")?t.attr("title"):t.attr("name");return i=e.isFunction(i)?i(t):i,r.format(t.attr(r.attr(n+"-msg"))||t.attr("validationMessage")||i||"",a,t.attr(n))},_checkValidity:function(e){var t,n=this.options.rules;for(t in n)if(!n[t](e))return{valid:!1,key:t};return{valid:!0}},errors:function(){var e,t=[],n=this._errors;for(e in n)t.push(n[e]);return t}});r.ui.plugin(h)}(jQuery),function(e,t){function n(t,n){try{return e.contains(t,n)||t==n}catch(e){return!1}}function i(e){return f.elementFromPoint(e.x.client,e.y.client)}function r(e,t){return parseInt(e.css(t),10)||0}function a(e,t){return Math.min(Math.max(e,t.min),t.max)}function o(e,t){var n=e.offset(),i=n.left+r(e,"borderLeftWidth")+r(e,"paddingLeft"),a=n.top+r(e,"borderTopWidth")+r(e,"paddingTop");return{x:{min:i,max:i+e.width()-t.outerWidth(!0)},y:{min:a,max:a+e.height()-t.outerHeight(!0)}}}function s(e,t){return e.replace(/ /g,t+" ")}function l(t){t.preventDefault();var n=e(t.target),i=n.closest(".k-widget").parent();i[0]||(i=n.parent()),i.trigger(t.type)}var d,c=window.kendo,u=c.support,p=u.pointers,f=window.document,h=e(f.documentElement),g=c.Class,m=c.ui.Widget,v=c.Observable,k=e.proxy,b=e.now,_=e.extend,w=c.getOffset,y={},x={},C=u.mobileOS&&u.mobileOS.android,T="mousedown",S="mousemove",F="mouseup mouseleave";u.touch&&(T="touchstart",S="touchmove",F="touchend touchcancel"),p&&(T="MSPointerDown",S="MSPointerMove",F="MSPointerUp MSPointerCancel");var D,A=g.extend({init:function(e){this.axis=e},start:function(e,t){var n=this,i=e["page"+n.axis];n.startLocation=n.location=i,n.client=e["client"+n.axis],n.velocity=n.delta=0,n.timeStamp=t},move:function(e,t){var n=this,i=e["page"+n.axis];!i&&C||(n.delta=i-n.location,n.location=i,n.client=e["client"+n.axis],n.initialDelta=i-n.startLocation,n.velocity=n.delta/(t-n.timeStamp),n.timeStamp=t)}}),H=v.extend({init:function(t,n){var i,r,a=this,o={},d="."+c.guid();if(n=n||{},i=a.filter=n.filter,a.threshold=n.threshold||0,t=e(t),v.fn.init.call(a),o[s(S,d)]=k(a._move,a),o[s(F,d)]=k(a._end,a),_(a,{x:new A("X"),y:new A("Y"),element:t,surface:n.global?h:n.surface||t,stopPropagation:n.stopPropagation,pressed:!1,eventMap:o,ns:d}),t.on(T,i,k(a._start,a)).on("dragstart",i,c.preventDefault),p&&t.css("-ms-touch-action","pinch-zoom double-tap-zoom"),!n.allowSelection){var f=["mousedown selectstart",i,l];i instanceof e&&f.splice(2,0,null),t.on.apply(t,f)}u.eventCapture&&(r=function(e){a.moved&&e.preventDefault()},a.surface[0].addEventListener(u.mouseup,r,!0)),a.bind(["tap","start","move","end","cancel"],n)},capture:function(){H.captured=!0},cancel:function(){this._cancel(),this.trigger("cancel")},skip:function(){this._cancel()},_cancel:function(){var e=this;e.moved=e.pressed=!1,e.surface.off(e.ns)},_start:function(t){var n,i=this,r=i.filter,a=t.originalEvent,o=t;i.pressed||(i.target=r?e(t.target).is(r)?e(t.target):e(t.target).closest(r):i.element,i.target.length&&(i.currentTarget=t.currentTarget,i.stopPropagation&&t.stopPropagation(),i.pressed=!0,i.moved=!1,i.startTime=null,u.touch&&(n=a.changedTouches[0],i.touchID=n.identifier,o=n),p&&(i.touchID=a.pointerId,o=a),i._perAxis("start",o,b()),i.surface.off(i.eventMap).on(i.eventMap),H.captured=!1))},_move:function(e){var t,n,i,r=this;r.pressed&&r._withEvent(e,function(a){if(r._perAxis("move",a,b()),!r.moved){if(t=r.x.initialDelta,n=r.y.initialDelta,(i=Math.sqrt(t*t+n*n))<=r.threshold)return;if(H.captured)return r._cancel();r.startTime=b(),r._trigger("start",e),r.moved=!0}r.pressed&&r._trigger("move",e)})},_end:function(e){var t=this;t.pressed&&t._withEvent(e,function(){t.moved?(t.endTime=b(),t._trigger("end",e),t.moved=!1):t._trigger("tap",e),t._cancel()})},_perAxis:function(e,t,n){this.x[e](t,n),this.y[e](t,n)},_trigger:function(e,t){var n={x:this.x,y:this.y,target:this.target,event:t};this.trigger(e,n)&&t.preventDefault()},_withEvent:function(e,t){var n,i,r=this.touchID,a=e.originalEvent;if(u.touch){for(i=(n=a.changedTouches).length;i;)if(i--,n[i].identifier===r)return t(n[i])}else{if(!p)return t(e);if(r===a.pointerId)return t(a)}}}),I=v.extend({init:function(t,n){var i=this,r=t[0];i.capture=!1,r.addEventListener(T,k(i._press,i),!0),e.each(F.split(" "),function(){r.addEventListener(this,k(i._release,i),!0)}),v.fn.init.call(i),i.bind(["press","release"],n||{})},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1}}),E=v.extend({init:function(t){var n=this;v.fn.init.call(n),e.extend(n,t),n.max=0,n.horizontal?(n.measure="width",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="height",n.scrollSize="scrollHeight",n.axis="y")},outOfBounds:function(e){return e>this.max||e<this.min},present:function(){return this.max-this.min},getSize:function(){return this.container[this.measure]()},getTotal:function(){return this.element[0][this.scrollSize]},update:function(e){var t=this;t.size=t.getSize(),t.total=t.getTotal(),t.min=Math.min(t.max,t.size-t.total),e||t.trigger("change",t)}}),z=v.extend({init:function(e){var t=this,n=k(t.refresh,t);v.fn.init.call(t),t.x=new E(_({horizontal:!0},e)),t.y=new E(_({horizontal:!1},e)),t.bind("change",e),c.onResize(n)},present:function(){return this.x.present()||this.y.present()},refresh:function(){this.x.update(),this.y.update(),this.trigger("change")}}),N=v.extend({init:function(e){var t=this;_(t,e),v.fn.init.call(t)},dragMove:function(e){var t=this,n=t.dimension,i=t.axis,r=t.movable,a=r[i]+e;n.present()&&((a<n.min&&e<0||a>n.max&&e>0)&&(e*=t.resistance),r.translateAxis(i,e),t.trigger("change",t))}}),R=g.extend({init:function(e){var t,n,i,r=this;_(r,{elastic:!0},e),i=r.elastic?.5:0,r.x=t=new N({axis:"x",dimension:r.dimensions.x,resistance:i,movable:r.movable}),r.y=n=new N({axis:"y",dimension:r.dimensions.y,resistance:i,movable:r.movable}),r.drag.bind(["move","end"],{move:function(e){t.dimension.present()||n.dimension.present()?(t.dragMove(e.x.delta),n.dragMove(e.y.delta),e.preventDefault()):r.drag.skip()},end:function(e){e.preventDefault()}})}}),M=u.transitions.prefix+"Transform",O=Math.round;D=u.hasHW3D?function(e,t){return"translate3d("+O(e)+"px,"+O(t)+"px,0)"}:function(e,t){return"translate("+O(e)+"px,"+O(t)+"px)"};var P=v.extend({init:function(t){var n=this;v.fn.init.call(n),n.element=e(t),n.x=0,n.y=0,n._saveCoordinates(D(n.x,n.y))},translateAxis:function(e,t){this[e]+=t,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){_(this,e),this.refresh()},refresh:function(){var e=this,t=D(e.x,e.y);t!=e.coordinates&&(e.element[0].style[M]=t,e._saveCoordinates(t),e.trigger("change"))},_saveCoordinates:function(e){this.coordinates=e}}),L=m.extend({init:function(e,t){var n=this;m.fn.init.call(n,e,t);var i=n.options.group;i in x?x[i].push(n):x[i]=[n]},events:["dragenter","dragleave","drop"],options:{name:"DropTarget",group:"default"},_trigger:function(e,t){var n=this,i=y[n.options.group];if(i)return n.trigger(e,_({},t.event,{draggable:i}))},_over:function(e){this._trigger("dragenter",e)},_out:function(e){this._trigger("dragleave",e)},_drop:function(e){var t=this,n=y[t.options.group];n&&(n.dropped=!t._trigger("drop",e))}}),B=m.extend({init:function(e,t){var n=this;m.fn.init.call(n,e,t),n.drag=new H(n.element,{global:!0,stopPropagation:!0,filter:n.options.filter,threshold:n.options.distance,start:k(n._start,n),move:k(n._drag,n),end:k(n._end,n),cancel:k(n._cancel,n)}),n.destroy=k(n._destroy,n),n.captureEscape=function(e){e.keyCode===c.keys.ESC&&(n._trigger("dragcancel",{event:e}),n.drag.cancel())}},events:["dragstart","drag","dragend","dragcancel"],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,dropped:!1},_start:function(t){var n=this,i=n.options,r=i.container,a=i.hint;if(n.currentTarget=n.drag.target,n.currentTargetOffset=w(n.currentTarget),a){n.hint=e.isFunction(a)?e(a(n.currentTarget)):a;var s=w(n.currentTarget);n.hintOffset=s,n.hint.css({position:"absolute",zIndex:2e4,left:s.left,top:s.top}).appendTo(f.body)}y[i.group]=n,n.dropped=!1,r&&(n.boundaries=o(r,n.hint)),n._trigger("dragstart",t)&&(n.drag.cancel(),n.destroy()),e(f).on("keyup",n.captureEscape)},updateHint:function(t){var n,i=this,r=i.options,o=i.boundaries,s=r.axis,l=i.options.cursorOffset;l?n={left:t.x.location+l.left,top:t.y.location+l.top}:(i.hintOffset.left+=t.x.delta,i.hintOffset.top+=t.y.delta,n=e.extend({},i.hintOffset)),o&&(n.top=a(n.top,o.y),n.left=a(n.left,o.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_drag:function(e){var t=this;e.preventDefault(),t._withDropTarget(e,function(t){if(t){if(d){if(t.element[0]===d.element[0])return;d._trigger("dragleave",e)}t._trigger("dragenter",e),d=t}else d&&(d._trigger("dragleave",e),d=null)}),t._trigger("drag",e),t.hint&&t.updateHint(e)},_end:function(e){var t=this;t._withDropTarget(e,function(t){t&&(t._drop(e),d=null)}),t._trigger("dragend",e),t._cancel(e.event)},_cancel:function(e){var t=this;t.hint&&!t.dropped?t.hint.animate(t.currentTargetOffset,"fast",t.destroy):t.destroy()},_trigger:function(e,t){var n=this;return n.trigger(e,_({},t.event,{x:t.x,y:t.y,currentTarget:n.currentTarget}))},_withDropTarget:function(e,t){var r,a,o,s=this,l=s.options,d=x[l.group],c=0,u=d&&d.length;if(u){r=i(e),s.hint&&n(s.hint,r)&&(s.hint.hide(),r=i(e),s.hint.show());e:for(;r;){for(c=0;c<u;c++)if((a=d[c]).element[0]===r){o=a;break e}r=r.parentNode}t(o)}},_destroy:function(){var t=this;t.hint&&t.hint.remove(),delete y[t.options.group],t.trigger("destroy"),e(f).off("keyup",t.captureEscape)}});c.ui.plugin(L),c.ui.plugin(B),c.Drag=H,c.Tap=I,c.containerBoundaries=o,_(c.ui,{Pane:R,PaneDimensions:z,Movable:P})}(jQuery),function(e,t){var n=window.kendo,i=n.mobile,r=n.fx,a=i.ui,o=e.proxy,s=e.extend,l=a.Widget,d=n.Class,c=n.ui.Movable,u=n.ui.Pane,p=n.ui.PaneDimensions,f=r.Transition,h=r.Animation,g=h.extend({init:function(e){var t=this;h.fn.init.call(t),s(t,e,{transition:new f({axis:e.axis,movable:e.movable,onEnd:function(){t._end()}})}),t.tap.bind("press",function(){t.cancel()}),t.drag.bind("end",o(t.start,t)),t.drag.bind("tap",o(t.onEnd,t))},onCancel:function(){this.transition.cancel()},freeze:function(e){var t=this;t.cancel(),t._moveTo(e)},onEnd:function(){var e=this;e._outOfBounds()?e._snapBack():e._end()},done:function(){return Math.abs(this.velocity)<1},start:function(){var e=this;e.dimension.present()&&(e._outOfBounds()?e._snapBack():(e.velocity=16*e.drag[e.axis].velocity,e.velocity&&(e.tap.captureNext(),h.fn.start.call(e))))},tick:function(){var e=this,t=e.dimension,n=e._outOfBounds()?.5:.93,i=e.velocity*=n,r=e.movable[e.axis]+i;!e.elastic&&t.outOfBounds(r)&&(r=Math.max(Math.min(r,t.max),t.min),e.velocity=0),e.movable.moveAxis(e.axis,r)},_end:function(){this.tap.cancelCapture(),this.end()},_outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},_snapBack:function(){var e=this,t=e.dimension,n=e.movable[e.axis]>t.max?t.max:t.min;e._moveTo(n)},_moveTo:function(e){this.transition.moveTo({location:e,duration:500,ease:f.easeOutExpo})}}),m=d.extend({init:function(t){var n=this,i="x"===t.axis,r=e('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');s(n,t,{element:r,elementSize:0,movable:new c(r),scrollMovable:t.movable,size:i?"width":"height"}),n.scrollMovable.bind("change",o(n._move,n)),n.container.append(r)},_move:function(){var e=this,t=e.axis,n=e.dimension,i=n.size,r=e.scrollMovable,a=i/n.total,o=Math.round(-r[t]*a),s=Math.round(i*a);o+s>i?s=i-o:o<0&&(s+=o,o=0),e.elementSize!=s&&(e.element.css(e.size,s+"px"),e.elementSize=s),e.movable.moveAxis(t,o)},show:function(){this.element.css({opacity:.7,visibility:"visible"})},hide:function(){this.element.css({opacity:0})}}),v=l.extend({init:function(t,i){var r=this;l.fn.init.call(r,t,i),(t=r.element).css("overflow","hidden").addClass("km-scroll-wrapper").wrapInner('<div class="km-scroll-container"/>').prepend('<div class="km-scroll-header"/>');var a=t.children().eq(1),o=new n.Tap(t),d=new c(a),f=new p({element:a,container:t,change:function(){r.trigger("resize")}}),h=new n.Drag(t,{allowSelection:!0,start:function(e){f.refresh(),f.present()?h.capture():h.cancel()}}),g=new u({movable:d,dimensions:f,drag:h,elastic:r.options.elastic});d.bind("change",function(){r.scrollTop=-d.y,r.scrollLeft=-d.x,r.trigger("scroll",{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft})}),s(r,{movable:d,dimensions:f,drag:h,pane:g,tap:o,pulled:!1,scrollElement:a,fixedContainer:t.children().first()}),r._initAxis("x"),r._initAxis("y"),f.refresh(),r.options.pullToRefresh&&r._initPullToRefresh(),n.onResize(e.proxy(r.reset,r))},scrollHeight:function(){return this.scrollElement[0].scrollHeight},scrollWidth:function(){return this.scrollElement[0].scrollWidth},options:{name:"Scroller",pullOffset:140,elastic:!0,pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"},events:["pull","scroll","resize"],setOptions:function(e){var t=this;l.fn.setOptions.call(t,e),e.pullToRefresh&&t._initPullToRefresh()},reset:function(){this.movable.moveTo({x:0,y:0})},scrollTo:function(e,t){this.movable.moveTo({x:e,y:t})},pullHandled:function(){var e=this;e.refreshHint.removeClass("km-scroller-refresh"),e.hintContainer.html(e.pullTemplate({})),e.yinertia.onEnd(),e.xinertia.onEnd()},_initPullToRefresh:function(){var e=this;e.pullTemplate=n.template(e.options.pullTemplate),e.releaseTemplate=n.template(e.options.releaseTemplate),e.refreshTemplate=n.template(e.options.refreshTemplate),e.scrollElement.prepend('<span class="km-scroller-pull"><span class="km-icon"></span><span class="km-template">'+e.pullTemplate({})+"</span></span>"),e.refreshHint=e.scrollElement.children().first(),e.hintContainer=e.refreshHint.children(".km-template"),e.pane.y.bind("change",o(e._paneChange,e)),e.drag.bind("end",o(e._dragEnd,e))},_dragEnd:function(){var e=this;e.pulled&&(e.pulled=!1,e.refreshHint.removeClass("km-scroller-release").addClass("km-scroller-refresh"),e.hintContainer.html(e.refreshTemplate({})),e.trigger("pull"),e.yinertia.freeze(e.options.pullOffset/2))},_paneChange:function(){var e=this;e.movable.y/.5>e.options.pullOffset?e.pulled||(e.pulled=!0,e.refreshHint.removeClass("km-scroller-refresh").addClass("km-scroller-release"),e.hintContainer.html(e.releaseTemplate({}))):e.pulled&&(e.pulled=!1,e.refreshHint.removeClass("km-scroller-release"),e.hintContainer.html(e.pullTemplate({})))},_initAxis:function(e){var t=this,n=t.movable,i=t.dimensions[e],r=t.tap,a=new m({axis:e,movable:n,dimension:i,container:t.element}),o=new g({axis:e,movable:n,tap:r,drag:t.drag,dimension:i,elastic:t.options.elastic,end:function(){a.hide()}});t[e+"inertia"]=o,t.pane[e].bind("change",function(){a.show()})}});a.plugin(v)}(jQuery),function(e,t){function n(e){return e.position().top+3}var i=window.kendo,r=i.ui.Widget,a=e.proxy,o=i.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-si-arrow-${(data.dir || "asc") == "asc" ? "n" : "s"}">(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})</span>${data.title ? data.title: data.field}</a><a class="k-button k-button-icon k-button-bare"><span class="k-icon k-group-delete"></span></a></div>',{useWithBlock:!1}),s=function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(i.attr("title"))||t.attr(i.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')},l=e('<div class="k-grouping-dropclue"/>'),d=/(\[|\]|\$|\.|\:|\+)/g,c=r.extend({init:function(t,o){var d,c,u=this,p=i.guid(),f=a(u._intializePositions,u),h=u._dropCuePositions=[];r.fn.init.call(u,t,o),c=u.options.draggable||new i.ui.Draggable(u.element,{filter:u.options.filter,hint:s,group:p}),d=u.groupContainer=e(u.options.groupContainer,u.element).kendoDropTarget({group:c.options.group,dragenter:function(e){u._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add"),l.css({top:n(d),left:0}).appendTo(d))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-add").addClass("k-denied"),l.remove()},drop:function(t){var n,r=t.draggable.currentTarget,a=r.attr(i.attr("field")),o=r.attr(i.attr("title")),s=u.indicator(a),d=u._dropCuePositions,c=d[d.length-1];(r.hasClass("k-group-indicator")||u._canDrag(r))&&(c?(n=u._dropCuePosition(l.offset().left+parseInt(c.element.css("marginLeft"),10)+parseInt(c.element.css("marginRight"),10)))&&u._canDrop(e(s),n.element,n.left)&&(n.before?n.element.before(s||u.buildIndicator(a,o)):n.element.after(s||u.buildIndicator(a,o)),u._change()):(u.groupContainer.append(u.buildIndicator(a,o)),u._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:s,group:c.options.group,dragcancel:a(u._dragCancel,u),dragstart:function(e){var t=e.currentTarget,i=parseInt(t.css("marginLeft"),10),r=t.position().left-i;f(),l.css({top:n(d),left:r}).appendTo(d),this.hint.find(".k-drag-status").removeClass("k-denied").addClass("k-add")},dragend:function(){u._dragEnd(this)},drag:a(u._drag,u)}).delegate(".k-button","click",function(t){t.preventDefault(),u._removeIndicator(e(this).parent())}).delegate(".k-link","click",function(t){var n=e(this).parent(),r=u.buildIndicator(n.attr(i.attr("field")),n.attr(i.attr("title")),"asc"==n.attr(i.attr("dir"))?"desc":"asc");n.before(r).remove(),u._change(),t.preventDefault()}),c.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){u._dragEnd(this)},dragcancel:a(u._dragCancel,u),dragstart:function(e){var t,n;u.options.allowDrag||u._canDrag(e.currentTarget)?(f(),h.length&&(t=h[h.length-1].element,n=parseInt(t.css("marginRight"),10),t.position().left,t.outerWidth())):e.preventDefault()},drag:a(u._drag,u)}),u.dataSource=u.options.dataSource,u.dataSource&&(u._refreshHandler=a(u.refresh,u),u.dataSource.bind("change",u._refreshHandler))},refresh:function(){var t=this,n=t.dataSource;t.groupContainer.empty().append(e.map(n.group()||[],function(e){var n=e.field.replace(d,"\\$1"),r=t.element.find(t.options.filter).filter("["+i.attr("field")+"="+n+"]");return t.buildIndicator(e.field,r.attr(i.attr("title")),e.dir)}).join("")),t._invalidateGroupContainer()},destroy:function(){var e=this;e.dataSource&&e._refreshHandler&&e.dataSource.unbind("change",e._refreshHandler)},options:{name:"Groupable",filter:"th",messages:{empty:"Drag a column header and drop it here to group by that column"}},indicator:function(t){var n=e(".k-group-indicator",this.groupContainer);return e.grep(n,function(n){return e(n).attr(i.attr("field"))===t})[0]},buildIndicator:function(e,t,n){return o({field:e,dir:n,title:t,ns:i.ns})},descriptors:function(){var t,n,r,a,o,s=this,l=e(".k-group-indicator",s.groupContainer);return t=s.element.find(s.options.filter).map(function(){var t=e(this),r=t.attr(i.attr("aggregates")),s=t.attr(i.attr("field"));if(r&&""!==r)for(n=r.split(","),r=[],a=0,o=n.length;a<o;a++)r.push({field:s,aggregate:n[a]});return r}).toArray(),e.map(l,function(n){return n=e(n),r=n.attr(i.attr("field")),{field:r,dir:n.attr(i.attr("dir")),aggregates:t||[]}})},_removeIndicator:function(e){var t=this;e.remove(),t._invalidateGroupContainer(),t._change()},_change:function(){var e=this;e.dataSource&&e.dataSource.group(e.descriptors())},_dropCuePosition:function(t){var n=this._dropCuePositions;if(l.is(":visible")&&0!==n.length){t=Math.ceil(t);var i=n[n.length-1],r=i.right,a=parseInt(i.element.css("marginLeft"),10),o=parseInt(i.element.css("marginRight"),10);return t>=r?t={left:i.element.position().left+i.element.outerWidth()+o,element:i.element,before:!1}:(t=e.grep(n,function(e){return e.left<=t&&t<=e.right})[0])&&(t={left:t.element.position().left-a,element:t.element,before:!0}),t}},_drag:function(e){var t=i.touchLocation(e),n=this._dropCuePosition(t.x);n&&l.css({left:n.left})},_canDrag:function(e){return"false"!=e.attr(i.attr("groupable"))&&(e.hasClass("k-group-indicator")||!this.indicator(e.attr(i.attr("field"))))},_canDrop:function(e,t,n){var i=e.next();return e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||n>i.position().left)},_dragEnd:function(t){var n=this,r=t.currentTarget.attr(i.attr("field")),a=n.indicator(r);t!==n.options.draggable&&!t.dropped&&a&&n._removeIndicator(e(a)),n._dragCancel()},_dragCancel:function(){l.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,n=this,i=e(".k-group-indicator",n.groupContainer);n._dropCuePositions=e.map(i,function(n){return n=e(n),t=n.offset().left,{left:parseInt(t,10),right:parseInt(t+n.outerWidth(),10),element:n}})},_invalidateGroupContainer:function(){var e=this.groupContainer;e.is(":empty")&&e.html(this.options.messages.empty)}});i.ui.plugin(c)}(jQuery),function(e,t){function n(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-add").addClass("k-denied"):t.find(".k-drag-status").removeClass("k-denied").addClass("k-add")}var i=window.kendo,r=i.ui.Widget,a=r.extend({init:function(t,a){var o,s=this,l=i.guid()+"-reorderable";r.fn.init.call(s,t,a),t=s.element.addClass("k-reorderable"),a=s.options,o=a.draggable||new i.ui.Draggable(t,{group:l,filter:a.filter,hint:a.hint}),s.reorderDropCue=e('<div class="k-reorder-cue"><div class="k-icon k-i-arrow-s"></div><div class="k-icon k-i-arrow-n"></div></div>'),t.find(o.options.filter).kendoDropTarget({group:o.options.group,dragenter:function(e){if(s._draggable){var i=this.element,r=i[0]===s._draggable[0];n(e.draggable.hint,r),r||s.reorderDropCue.css({height:i.outerHeight(),top:t.offset().top,left:i.offset().left+(i.index()>s._draggable.index()?i.outerWidth():0)}).appendTo(document.body)}},dragleave:function(e){n(e.draggable.hint,!0),s.reorderDropCue.remove()},drop:function(){if(s._draggable){var e,n=s._draggable[0],i=this.element[0];n!==i&&(e=t.find(o.options.filter),s.trigger("change",{element:s._draggable,oldIndex:e.index(n),newIndex:e.index(i)}))}}}),o.bind(["dragcancel","dragend","dragstart"],{dragcancel:function(){s.reorderDropCue.remove(),s._draggable=null},dragend:function(){s.reorderDropCue.remove(),s._draggable=null},dragstart:function(e){s._draggable=e.currentTarget}})},options:{name:"Reorderable",filter:"*"},events:["change"]});i.ui.plugin(a)}(jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.Widget,a=e.proxy,o=e.isFunction,s=e.extend,l=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.orientation="vertical"!=n.options.orientation.toLowerCase()?"horizontal":"vertical",n._positionMouse="horizontal"==n.orientation?"x":"y",n._position="horizontal"==n.orientation?"left":"top",n._sizingDom="horizontal"==n.orientation?"outerWidth":"outerHeight",new i.Draggable(e,{distance:0,filter:t.handle,drag:a(n._resize,n),dragstart:a(n._start,n),dragend:a(n._stop,n)})},events:["resize","resizeend","start"],options:{name:"Resizable",orientation:"horizontal"},_max:function(e){var t=this,n=t.hint?t.hint[t._sizingDom]():0,i=t.options.max;return o(i)?i(e):void 0!==i?t._initialElementPosition+i-n:i},_min:function(e){var t=this,n=t.options.min;return o(n)?n(e):void 0!==n?t._initialElementPosition+n:n},_start:function(t){var n=this,i=n.options.hint,r=e(t.currentTarget);n._initialMousePosition=t[n._positionMouse].location,n._initialElementPosition=r.position()[n._position],i&&(n.hint=o(i)?e(i(r)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger("start",t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",r.css("cursor"))},_resize:function(t){var n,i=this,r=(e(t.currentTarget),i._maxPosition),a=i._minPosition,o=i._initialElementPosition+(t[i._positionMouse].location-i._initialMousePosition);n=void 0!==a?Math.max(a,o):o,i.position=n=void 0!==r?Math.min(r,n):n,i.hint&&i.hint.toggleClass(i.options.invalidClass||"",n==r||n==a).css(i._position,n),i.trigger("resize",s(t,{position:n}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.trigger("resizeend",s(t,{position:n.position})),e(document.body).css("cursor","")}});n.ui.plugin(l)}(jQuery),function(e,t){var n=window.kendo,i=e.proxy,r="data-dir",a=n.ui.Widget,o=a.extend({init:function(e,t){var n,r=this;a.fn.init.call(r,e,t),r.dataSource=r.options.dataSource.bind("change",i(r.refresh,r)),(n=r.element.find(".k-link"))[0]||(n=r.element.wrapInner('<a class="k-link" href="#"/>').find(".k-link")),r.link=n,r.element.click(i(r._click,r))},options:{name:"Sortable",mode:"single",allowUnsort:!0},refresh:function(){var t,n,i,a,o=this,s=o.dataSource.sort()||[],l=o.element,d=l.attr("data-field");for(l.removeAttr(r),t=0,n=s.length;t<n;t++)d==(i=s[t]).field&&l.attr(r,i.dir);a=l.attr(r),l.find(".k-i-arrow-n,.k-i-arrow-s").remove(),"asc"===a?e('<span class="k-icon k-i-arrow-n" />').appendTo(o.link):"desc"===a&&e('<span class="k-icon k-i-arrow-s" />').appendTo(o.link)},_click:function(e){var t,n,i=this,a=i.element,o=a.attr("data-field"),s=a.attr(r),l=i.options,d=i.dataSource.sort()||[];if(s="asc"===s?"desc":"desc"===s&&l.allowUnsort?void 0:"asc","single"===l.mode)d=[{field:o,dir:s}];else if("multiple"===l.mode){for(t=0,n=d.length;t<n;t++)if(d[t].field===o){d.splice(t,1);break}d.push({field:o,dir:s})}e.preventDefault(),i.dataSource.sort(d)}});n.ui.plugin(o)}(jQuery),function(e,t){var n=window.kendo,i=n.support.touch,r=n.ui.Widget,a=e.proxy,o=i?"touchend":"mouseup",s=i?"touchstart":"mousedown",l=i?"touchmove":"mousemove",d="k-state-selected",c="k-state-selecting",u=e(document),p="k-state-unselecting",f=r.extend({init:function(t,n){var i=this;r.fn.init.call(i,t,n),i._marquee=e("<div class='k-marquee'></div>"),i._lastActive=null,i._moveDelegate=a(i._move,i),i._upDelegate=a(i._up,i),i.element.addClass("k-selectable"),i.element.delegate(".k-selectable "+i.options.filter,s,a(i._down,i))},events:["change"],options:{name:"Selectable",filter:">*",multiple:!1},_collide:function(e,t){var n=e.offset(),i={left:n.left,top:n.top,right:n.left+e.outerWidth(),bottom:n.top+e.outerHeight()};return!(i.left>t.right||i.right<t.left||i.top>t.bottom||i.bottom<t.top)},_position:function(e){var t,n=this._originalPosition,i=n.x,r=n.y,a=e.pageX,o=e.pageY;return i>a&&(t=a,a=i,i=t),r>o&&(t=o,o=r,r=t),{top:r,right:a,left:i,bottom:o}},_down:function(t){var i,r=this,a=t.ctrlKey,s=t.shiftKey,f=!r.options.multiple;r._downTarget=e(t.currentTarget),r._shiftPressed=s,r._downTarget.closest(".k-selectable")[0]===r.element[0]&&(u.unbind(o,r._upDelegate).bind(o,r._upDelegate),r._originalPosition={x:t.pageX,y:t.pageY},!f&&e(t.target).is(":not(:input, a)")&&(u.unbind(l,r._moveDelegate).bind(l,r._moveDelegate).unbind("selectstart",!1).bind("selectstart",!1),n.support.touch||t.preventDefault()),f||(e("body").append(r._marquee),r._marquee.css({left:t.clientX+1,top:t.clientY+1,width:0,height:0})),i=r._downTarget.hasClass(d),(f||!a&&!s)&&r.element.find(r.options.filter+"."+d).not(r._downTarget).removeClass(d),a&&(r._lastActive=r._downTarget),i&&(a||s)?(r._downTarget.addClass(d),s||r._downTarget.addClass(p)):n.support.touch&&f||(r._downTarget.addClass(c),f&&r._downTarget.hasClass(d)&&r._downTarget.removeClass(c)))},_move:function(t){var n,i,r=this,a=r._position(t),o=t.ctrlKey;r._marquee.css({left:a.left,top:a.top,width:a.right-a.left,height:a.bottom-a.top}),r.element.find(r.options.filter).each(function(){n=e(this),(i=r._collide(n,a))?n.hasClass(d)?r._downTarget[0]!==n[0]&&o&&n.removeClass(d).addClass(p):n.hasClass(c)||n.hasClass(p)||n.addClass(c):n.hasClass(c)?n.removeClass(c):o&&n.hasClass(p)&&n.removeClass(p).addClass(d)})},_up:function(e){var t=this,i=t.options,r=!i.multiple;u.unbind("selectstart",!1).unbind(l,t._moveDelegate).unbind(o,t._upDelegate),r||t._marquee.remove(),n.support.touch&&r&&t._downTarget.addClass(c),r||!0!==t._shiftPressed?(t.element.find(i.filter+"."+p).removeClass(p).removeClass(d),t.value(t.element.find(i.filter+"."+c))):t.selectRange(t._firstSelectee(),t._downTarget),t._shiftPressed||(t._lastActive=t._downTarget),t._downTarget=null,t._shiftPressed=!1},value:function(e){var t=this,n=a(t._selectElement,t);return e?(e.each(function(){n(this)}),void t.trigger("change",{})):t.element.find(t.options.filter+"."+d)},_firstSelectee:function(){var e,t=this;return null!==t._lastActive?t._lastActive:(e=t.value(),e.length>0?e[0]:t.element.find(t.options.filter))},_selectElement:function(t){var n=e(t),i=this.trigger("select",{element:t});n.removeClass(c),i||n.addClass(d)},clear:function(){var e=this;e.element.find(e.options.filter+"."+d).removeClass(d)},selectRange:function(t,n){var i,r=this,o=!1,s=a(r._selectElement,r);t=e(t)[0],n=e(n)[0],r.element.find(r.options.filter).each(function(){if(i=e(this),o)s(this),o=this!==n;else if(this===t)o=t!==n,s(this);else if(this===n){var r=t;t=n,n=r,o=!0,s(this)}else i.removeClass(d)}),r.trigger("change",{})}});n.ui.plugin(f)}(jQuery),function(e,t){function n(e,t,n,i){return e({idx:t,text:n,ns:d.ns,numeric:i})}function i(e,t){return v({className:e.substring(1),text:t})}function r(e,t,n,i){e.find(t).parent().attr(d.attr("page"),n).toggleClass("k-state-disabled",i)}function a(e,t,n){r(e,f,1,t<=1)}function o(e,t,n){r(e,g,Math.max(1,t-1),t<=1)}function s(e,t,n){r(e,m,Math.min(n,t+1),t>=n)}function l(e,t,n){r(e,h,n,t>=n)}var d=window.kendo,c=d.ui,u=c.Widget,p=e.proxy,f=".k-i-seek-w",h=".k-i-seek-e",g=".k-i-arrow-w",m=".k-i-arrow-e",v=d.template('<a href="\\#" title="#=text#" class="k-link"><span class="k-icon #= className #">#=text#</span></a>'),k=u.extend({init:function(t,n,r){var c,v,k=this;u.fn.init.call(k,t,n),n=k.options,k.dataSource=n.dataSource,k.linkTemplate=d.template(k.options.linkTemplate),k.selectTemplate=d.template(k.options.selectTemplate),c=k.page(),v=k.totalPages(),k._refreshHandler=p(k.refresh,k),k.dataSource.bind("change",k._refreshHandler),n.previousNext&&(k.element.find(f).length||(k.element.append(i(f,n.messages.first)),a(k.element,c,v)),k.element.find(g).length||(k.element.append(i(g,n.messages.previous)),o(k.element,c,v))),n.numeric&&(k.list=k.element.find(".k-pager-numbers"),k.list.length||(k.list=e('<ul class="k-pager-numbers k-reset" />').appendTo(k.element))),n.input&&(k.element.find(".k-pager-input").length||k.element.append('<span class="k-pager-input k-label">'+n.messages.page+'<input class="k-textbox">'+d.format(n.messages.of,v)+"</span>"),k._keydownHandler=p(k._keydown,k),k.element.on("keydown",".k-pager-input input",k._keydownHandler)),n.previousNext&&(k.element.find(m).length||(k.element.append(i(m,n.messages.next)),s(k.element,c,v)),k.element.find(h).length||(k.element.append(i(h,n.messages.last)),l(k.element,c,v))),n.pageSizes&&(k.element.find(".k-pager-sizes").length||e('<span class="k-pager-sizes k-label"><select/>'+n.messages.itemsPerPage+"</span>").appendTo(k.element).find("select").html(e.map(e.isArray(n.pageSizes)?n.pageSizes:[5,10,15,20],function(e){return"<option>"+e+"</option>"}).join("")).end().appendTo(k.element),k.element.find(".k-pager-sizes select").val(k.pageSize()),d.ui.DropDownList&&k.element.find(".k-pager-sizes select").kendoDropDownList(),k._changeHandler=p(k._change,k),k.element.on("change",".k-pager-sizes select",k._changeHandler)),n.refresh&&(k.element.find(".k-pager-refresh").length||(r&&(k.element.append('<a href="#" rel="clearfilter" style="display:none;" class="k-icon k-i-funnel-clear"  title="Clear Filters">&nbsp;&nbsp;&nbsp;</a>'),e("a.k-i-funnel-clear").click(function(){e("form.k-filter-menu button[type=reset]").trigger("click")})),k.element.append('<span style="padding-left:20px;"><a href="#" class=" k-icon k-i-refresh"  title="'+n.messages.refresh+'"></a><span>'),k.element.append('<a href="#" class="k-pager-refresh k-link"  title="'+n.messages.refresh+'"><span class="k-icon k-i-refresh">'+n.messages.refresh+"</span></a>")),k._reloadHandler=p(k._refreshClick,k),k.element.on("click",".k-i-refresh,.k-pager-refresh",k._reloadHandler)),n.info&&(k.element.find(".k-pager-info").length||k.element.append('<span class="k-pager-info k-label" />')),k._clickHandler=p(k._click,k),k.element.on("click","a",k._clickHandler),n.autoBind&&k.refresh()},destroy:function(){var e=this;e.element.off("click","a",e._clickHandler),e.element.off("keydown",".k-pager-input input",e._keydownHandler),e.element.off("change",".k-pager-sizes select",e._changeHandler),e.element.off("click",".k-pager-refresh",e._reloadHandler),e.dataSource.unbind("change",e._refreshHandler)},events:["change"],options:{name:"Pager",selectTemplate:'<li><span class="k-state-selected">#=text#</span></li>',linkTemplate:'<li><a href="\\#" class="k-link" data-#=ns#page="#=idx#">#=text#</a></li>',buttonCount:10,autoBind:!0,numeric:!1,info:!0,input:!0,previousNext:!0,pageSizes:!0,refresh:!0,messages:{display:"{0} - {1} of {2} Records ",empty:"No Records Found.",page:"Page",of:"of {0}",itemsPerPage:"Records per page",first:"First page",previous:"Previous page",next:"Next page",last:"Last page",refresh:"Refresh Grid"}},refresh:function(){var e,t,i,r=this,c=1,u="",p=r.page(),f=r.options,h=r.pageSize(),g=r.dataSource.total(),m=r.totalPages(),v=r.linkTemplate,k=f.buttonCount;if(f.numeric){for(p>k&&(c=0===(i=p%k)?p-k+1:p-i+1),t=Math.min(c+k-1,m),c>1&&(u+=n(v,c-1,"...",!1)),e=c;e<=t;e++)u+=n(e==p?r.selectTemplate:v,e,e,!0);t<m&&(u+=n(v,e,"...",!1)),""===u&&(u=r.selectTemplate({text:0})),r.list.html(u)}f.info&&(u=g>0?d.format(f.messages.display,(p-1)*h+1,Math.min(p*h,g),g):f.messages.empty,r.element.find(".k-pager-info").html(u)),f.input&&r.element.find(".k-pager-input").html(r.options.messages.page+'<input class="k-textbox">'+d.format(f.messages.of,m)).find("input").val(p).attr("disabled",g<1).toggleClass("k-state-disabled",g<1),f.previousNext&&(a(r.element,p,m),o(r.element,p,m),s(r.element,p,m),l(r.element,p,m)),f.pageSizes&&r.element.find(".k-pager-sizes select").val(h)},_keydown:function(e){if(e.keyCode===d.keys.ENTER||e.keyCode===d.keys.TAB){var t=this.element.find(".k-pager-input").find("input"),n=parseInt(t.val(),10);(isNaN(n)||n<1||n>this.totalPages())&&(n=this.page()),t.val(n),this.page(n),e.preventDefault()}},_refreshClick:function(e){e.preventDefault(),this.dataSource.read()},_change:function(e){var t=parseInt(e.currentTarget.value,10);isNaN(t)||this.dataSource.pageSize(t)},_click:function(t){var n=e(t.currentTarget);t.preventDefault(),n.is(".k-state-disabled")||this.page(n.attr(d.attr("page")))},totalPages:function(){return Math.ceil((this.dataSource.total()||0)/this.pageSize())},pageSize:function(){return this.dataSource.pageSize()||this.dataSource.total()},page:function(e){if(void 0===e)return this.dataSource.total()>0?this.dataSource.page():0;this.dataSource.page(e),this.trigger("change",{index:e})}});c.plugin(k)}(jQuery),function(e,t){function n(t,n){return t===n||e.contains(t,n)}var i=window.kendo,r=i.ui,a=r.Widget,o=i.support,s=o.touch,l=i.getOffset,d=e.browser.msie&&e.browser.version<9,c=s?"touchstart":"mousedown",u=e(document),p=e(window),f=e(document.documentElement),h=o.transitions.css+"transform",g=e.extend,m=["font-family","font-size","font-stretch","font-style","font-weight","line-height"],v=a.extend({init:function(t,n){var r,o=this;a.fn.init.call(o,t,n),t=o.element,n=o.options,o.collisions=n.collision?n.collision.split(" "):[],1===o.collisions.length&&o.collisions.push(o.collisions[0]),r=e(o.options.anchor).closest(".k-popup,.k-group"),n.appendTo=e(e(n.appendTo)[0]||r[0]||"body"),o.element.hide().addClass("k-popup k-group k-reset").css({position:"absolute"}).appendTo(n.appendTo).bind("mouseenter mouseleave",function(e){o._hovered="mouseenter"===e.type}),o.wrapper=e(),!1===n.animation&&(n.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),g(n.animation.open,{complete:function(){o.wrapper.css({overflow:"visible"}),o.trigger("activate")}}),g(n.animation.close,{complete:function(){o.wrapper.hide();var r,a,s=o.wrapper.data("location"),l=e(n.anchor);s&&o.wrapper.css(s),"body"!=n.anchor&&(a="k-state-border-"+(r=l.hasClass("k-state-border-down")?"down":"up"),l.removeClass(a).children(".k-picker-wrap, .k-dropdown-wrap, .k-link").removeClass("k-state-active").removeClass(a),t.removeClass("k-state-border-"+i.directions[r].reverse)),o._closing=!1,o.trigger("deactivate")}}),o._mousedownProxy=function(e){o._mousedown(e)},o._currentWidth=u.width(),o._resizeProxy=function(e){o._resize(e)},n.toggleTarget&&e(n.toggleTarget).bind(n.toggleEvent,e.proxy(o.toggle,o))},events:["open","activate","close","deactivate"],options:{name:"Popup",toggleEvent:"click",origin:"bottom left",position:"top left",anchor:"body",collision:"flip fit",viewport:window,animation:{open:{effects:"slideIn:down",transition:!0,duration:200,show:!0},close:{duration:100,show:!1,hide:!0}}},open:function(t,n){var r,a,l,d,u=this,v={isFixed:!isNaN(parseInt(n,10)),x:t,y:n},k=u.element,b=u.options,_="down",w=e(b.anchor);if(!u.visible()){for(d=0;d<m.length;d++)l=m[d],k.css(l,w.css(l));if(k.data("animating")||u.trigger("open"))return;if(f.unbind(c,u._mousedownProxy).bind(c,u._mousedownProxy),s||p.unbind("resize scroll",u._resizeProxy).bind("resize scroll",u._resizeProxy),u.wrapper=a=i.wrap(k).css({overflow:"hidden",display:"block",position:"absolute"}),o.mobileOS.android&&a.add(w).css(h,"translatez(0)"),a.css("position"),"body"==b.appendTo&&a.css("top","-10000px"),r=g(!0,{},b.animation.open),u.flipped=u._position(v),r.effects=i.parseEffects(r.effects,u.flipped),_=r.effects.slideIn?r.effects.slideIn.direction:_,"body"!=b.anchor){var y="k-state-border-"+_;k.addClass("k-state-border-"+i.directions[_].reverse),w.addClass(y).children(".k-picker-wrap, .k-dropdown-wrap, .k-link").addClass("k-state-active").addClass(y)}k.data("effects",r.effects).kendoStop(!0).kendoAnimate(r)}},toggle:function(){var e=this;e[e.visible()?"close":"open"]()},visible:function(){return this.element.is(":visible")},close:function(){var t,n,r,a=this,o=a.options;if(a.visible()){if(a._closing||a.trigger("close"))return;a.element.find(".k-popup").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),f.unbind(c,a._mousedownProxy),p.unbind("resize scroll",a._resizeProxy),t=g(!0,{},o.animation.close),n=a.element.data("effects"),r=t.effects,a.wrapper=i.wrap(a.element).css({overflow:"hidden"}),!r&&!i.size(r)&&n&&i.size(n)&&(t.effects=n,t.reverse=!0),a._closing=!0,a.element.kendoStop(!0).kendoAnimate(t)}},_resize:function(e){var t=this;if(d){var n=u.width();if(n==t._currentWidth)return;t._currentWidth=n}},_mousedown:function(t){var r=this,a=r.element[0],o=r.options,s=e(o.anchor)[0],l=o.toggleTarget,d=i.eventTarget(t),c=e(d).closest(".k-popup")[0];c&&c!==r.element[0]||n(a,d)||n(s,d)||l&&n(e(l)[0],d)||r.close()},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),e<0&&(i=-e),i},_flip:function(e,t,n,i,r,a,o){var s=0;return o=o||t,a!==r&&"center"!==a&&"center"!==r&&(e+o>i&&(s+=-(n+t)),e+s<0&&(s+=n+t)),s},_position:function(t){var n=this,i=n.element,r=n.wrapper,a=n.options,s=e(a.viewport),d=e(s).offset(),c=e(a.anchor),u=a.origin.toLowerCase().split(" "),p=a.position.toLowerCase().split(" "),f=n.collisions,h=o.zoomLevel(),m=10050,v=c.parents().filter(r.siblings());if(v[0]){var k=Number(e(v).css("zIndex"));k&&(m=k+1)}r.css("zIndex",m),t&&t.isFixed?r.css({left:t.x,top:t.y}):r.css(n._align(u,p));var b=l(r,"position"),_=l(r),w=c.offsetParent().parent(".k-animation-container");w.length&&w.data("fitted")&&(b=l(r,"position"),_=l(r)),s[0]===window?(_.top-=window.pageYOffset||document.documentElement.scrollTop||0,_.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(_.top-=d.top,_.left-=d.left),n.wrapper.data("location")||r.data("location",g({},b));var y=g({},_),x=g({},b);"fit"===f[0]&&(x.top+=n._fit(y.top,r.outerHeight(),s.height()/h)),"fit"===f[1]&&(x.left+=n._fit(y.left,r.outerWidth(),s.width()/h)),x.left!=b.left||x.top!=b.top?r.data("fitted",!0):r.removeData("fitted");var C=g({},x);return"flip"===f[0]&&(x.top+=n._flip(y.top,i.outerHeight(),c.outerHeight(),s.height()/h,u[0],p[0],r.outerHeight())),"flip"===f[1]&&(x.left+=n._flip(y.left,i.outerWidth(),c.outerWidth(),s.width()/h,u[1],p[1],r.outerWidth())),r.css(x),x.left!=C.left||x.top!=C.top},_align:function(t,n){var i,r=this,a=r.wrapper,o=e(r.options.anchor),s=t[0],d=t[1],c=n[0],u=n[1],p=l(o),f=e(r.options.appendTo),h=a.outerWidth(),g=a.outerHeight(),m=o.outerWidth(),v=o.outerHeight(),k=p.top,b=p.left,_=Math.round;return f[0]!=document.body&&(k-=(i=l(f)).top,b-=i.left),"bottom"===s&&(k+=v),"center"===s&&(k+=_(v/2)),"bottom"===c&&(k-=g),"center"===c&&(k-=_(g/2)),"right"===d&&(b+=m),"center"===d&&(b+=_(m/2)),"right"===u&&(b-=h),"center"===u&&(b-=_(h/2)),{top:k,left:b}}});r.plugin(v)}(jQuery),function(e,t){function n(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return n(e,i),e.filters?e.filters.length:e.field!=i}))}var i=window.kendo,r=i.ui,a=r.Widget,o=i.keys,s=i.support.touch,l=s?"touchend":"click",d="k-state-hover",c=e.extend,u=e.proxy,p=e.browser.msie&&parseInt(e.browser.version,10)<9,f=/"/g,h=a.extend({init:function(t,n){var r,o,s=this;a.fn.init.call(s,t,n),s._template(),s.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:i.support.touch?"":"auto"}).delegate("li","mouseenter",function(){e(this).addClass(d)}).delegate("li","mouseleave",function(){e(this).removeClass(d)}).delegate("li",l,u(s._click,s)),s.list=o=e("<div class='k-list-container'/>").append(s.ul).mousedown(function(e){e.preventDefault()}),(r=s.element.attr("id"))&&o.attr("id",r+"-list"),e(document.documentElement).bind("mousedown",u(s._mousedown,s))},items:function(){return this.ul[0].children},current:function(e){var t=this;if(void 0===e)return t._current;t._current&&t._current.removeClass("k-state-focused"),e&&(e.addClass("k-state-focused"),t._scroll(e)),t._current=e},dataItem:function(e){var t=this;return void 0===e&&(e=t.selectedIndex),t._data()[e]},_accessors:function(){var e=this,t=e.element,n=e.options,r=i.getter,a=t.attr(i.attr("text-field")),o=t.attr(i.attr("value-field"));a&&(n.dataTextField=a),o&&(n.dataValueField=o),e._text=r(n.dataTextField),e._value=r(n.dataValueField)},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var t,n=this,i=n.selectedIndex,r=n.value();r!==n._old?""!=n._old&&r!=n._old+" -[NEW]"&&(t=!0):void 0!==i&&i!==n._oldIndex?t=!0:1==n.options.IsChangeOnBlankValue&&""==r&&this.options.addOnFunction&&this.options.addOnFunction(e(n.element).attr("id"),n.value(),n.options.valueControlId,n.key()),t&&(n._old=r,n._oldIndex=i,n.trigger("change"),n.element.trigger("change"))},_click:function(t){t.isDefaultPrevented()||(this._accept(e(t.currentTarget)),"touchend"===t.type&&t.preventDefault())},_data:function(){return this.dataSource.view()},_enable:function(){var e=this,t=e.options;e.element.prop("disabled")&&(t.enable=!1),e.enable(t.enable)},_focus:function(t){var n=this;if(n.popup.visible()&&t&&n.trigger("select",{item:t}))n.close();else{if(n._select(t),"string"==typeof n.options.select&&0==n.options.select.indexOf("return ")&&0==e(n.element).attr("id").indexOf("tbl")){var i=n.options.select.replace("return ","").split("(")[0],r=window[i];"function"==typeof r&&r(n.element)}n._blur()}},_height:function(t){if(t){var n=this,i=n.list,r=n.popup.visible(),a=n.options.height;-1!=e(i).attr("class").indexOf("k-state-border-down")?i=i.add(i.parent(".k-animation-container")).show().height(e(i).parent("div").height()-2):(e(n.ul[0]).css("max-height","200px"),i=i.add(i.parent(".k-animation-container")).show().height(n.ul[0].scrollHeight>=a?a:"auto").css("max-height","200px")),r||i.hide()}},_adjustListWidth:function(){var t,n,i=this.list,r=i[0].style.width,a=this.wrapper;return r||(n=(t=window.getComputedStyle?window.getComputedStyle(a[0],null):0)?parseFloat(t.width):a.outerWidth(),t&&(e.browser.mozilla||e.browser.msie)&&(n+=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth)),r=n-(i.outerWidth()-i.width())),i.css({fontFamily:a.css("font-family"),width:r}),!0},_popup:function(){var e=this,t=e.list,n=e.options,a=e.wrapper,o=!1;e.popup=new r.Popup(t,c({},n.popup,{anchor:a,open:function(t){o||(o=e._adjustListWidth()),e.trigger("open")&&t.preventDefault()},close:function(t){e.trigger("close")&&t.preventDefault()},animation:n.animation})),e._touchScroller=i.touchScroller(e.popup.element)},_makeUnselectable:function(e){p&&this.list.find("*").attr("unselectable","on")},_toggleHover:function(t){s||e(t.currentTarget).toggleClass(d,"mouseenter"===t.type)},_toggle:function(e){var t=this;e=void 0!==e?e:!t.popup.visible(),s||t._focused[0]===document.activeElement||t._focused.focus(),t[e?"open":"close"]()},_scroll:function(e){if(e){e[0]&&(e=e[0]);var t=this.ul[0],n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,a=t.clientHeight,o=n+i;t.scrollTop=r>n?n:o>r+a?o-a:r}},_template:function(){var e=this,t=e.options,n=t.template,r=t.dataSource;e.element.is("select")&&e.element[0].length&&(r||(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value")),n?(n=i.template(n),e.template=function(e){return'<li unselectable="on" class="k-item">'+n(e)+"</li>"}):e.template=i.template('<li unselectable="on" class="k-item">${data'+(t.dataTextField?".":"")+t.dataTextField+"}</li>",{useWithBlock:!1})}});c(h,{caret:function(e){var t=e.ownerDocument.selection;return t?Math.abs(t.createRange().moveStart("character",-e.value.length)):e.selectionStart},selectText:function(e,t,n){try{if(e.createTextRange){e.focus();var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t),i.moveEnd("character",n-t),i.select()}else e.setSelectionRange(t,n)}catch(e){}},inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;n<i;n++)if(e===r[n])return n;return-1}}),i.ui.List=h,r.Select=h.extend({init:function(e,t){h.fn.init.call(this,e,t)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&this._selectItem()},close:function(){this.popup.close()},_accessor:function(e,t){var n,i,r=this.element,a=r.is("select");if(r=r[0],void 0===e)return a?(i=r.selectedIndex)>-1&&(n=r.options[i])&&(e=n.value):e=r.value,e;a?r.selectedIndex=t:r.value=e},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass("k-loading"),e._busy=null},_showBusy:function(){var e=this;e._busy||(e._busy=setTimeout(function(){e._arrow.addClass("k-loading")},100))},_dataSource:function(){var t,n=this,r=n.element,a=n.options,o=a.dataSource||{};o=e.isArray(o)?{data:o}:o,r.is("select")&&((t=r[0].selectedIndex)>-1&&(a.index=t),o.select=r,o.fields=[{field:a.dataTextField},{field:a.dataValueField}]),n.dataSource&&n._refreshHandler?n.dataSource.unbind("change",n._refreshHandler).unbind("requestStart",n._requestStartHandler):(n._refreshHandler=u(n.refresh,n),n._requestStartHandler=u(n._showBusy,n)),n.dataSource=i.data.DataSource.create(o).bind("change",n._refreshHandler).bind("requestStart",n._requestStartHandler)},_index:function(e){var t,n,i,r=this,a=r._data();for(t=0,n=a.length;t<n;t++)if(void 0===(i=r._value(a[t]))&&(i=r._text(a[t])),i==e)return t;return-1},_get:function(t){var n,i,r=this,a=r._data();if("function"==typeof t)for(n=0,i=a.length;n<i;n++)if(t(a[n])){t=n;break}if("number"==typeof t){if(t<0)return e();t=e(r.ul[0].children[t])}return t&&t.nodeType&&(t=e(t)),t},_move:function(e){var t,n=this,i=e.keyCode,r=n.ul[0],a=n._current,s=i===o.DOWN;return i===o.UP||s?(e.altKey?n.toggle(s):s?(n._select(a?a[0].nextSibling:r.firstChild),e.preventDefault()):(n._select(a?a[0].previousSibling:r.lastChild),e.preventDefault()),t=!0):i===o.ENTER||i===o.TAB?(n.popup.visible()&&e.preventDefault(),n._accept(a),t=!0):i===o.ESC&&(n.close(),t=!0),t},_valueOnFetch:function(e){var t=this;if(!t.ul[0].firstChild&&!t._fetch)return t.dataSource.one("change",function(){t._fetch=!0,t.value(e)}).fetch(),!0;t._fetch=!1},_options:function(e,t){var n,i,r,a,o=this,s=o.element,l=s[0].selectedIndex,d=e.length,c="",u=0;for(t&&(c=t,u=1);u<d;u++)n="<option",i=e[u],r=o._text(i),void 0!==(a=o._value(i))&&(-1!==(a+="").indexOf('"')&&(a=a.replace(f,"&quot;")),n+=' value="'+a+'"'),n+=">",void 0!==r&&(n+=r),c+=n+="</option>";s.html(c),s[0].selectedIndex=l},_reset:function(){var e=this,t=e.element;t.closest("form").bind("reset",function(){setTimeout(function(){e.value(t[0].value)})})},_cascade:function(){var t,i,r,a,o,s,l=this,d=l.options,c=d.cascadeFrom;if(c){if(!(t=e("#"+c).data("kendo"+d.name)))return;s=l.dataSource,r=t.options.dataValueField,a=function(){l.value(""),l.enable(!1)},o=function(){var e=l.value();e?(l.value(e),-1==l.selectedIndex&&l.value("")):l.select(d.index),l.trigger("selected"),l.enable()},i=function(){var e,i,l=t.dataItem(),d=l?t._value(l):null;d?(n(e=s.filter()||{},r),(i=e.filters||[]).push({field:r,operator:"eq",value:d}),s.one("change",o).filter(i)):a()},t.bind("cascade",a).bind("change",function(){i(),l.trigger("cascade")}).one("selected",function(){i()}),i()}}}),r.Select.removeFiltersForField=n}(jQuery),function(e,t){function n(e){for(var t,n=0,i=e.min,r=e.max,o=e.start,s=e.setter,l=e.build,d=e.cells||12,c=e.perRow||4,u=e.content||C,p=e.empty||T,f=e.html||'<table class="k-content k-meta-view" cellspacing="0"><tbody><tr>';n<d;n++)n>0&&n%c==0&&(f+="</tr><tr>"),t=l(o,n),f+=a(o,i,r)?u(t):p(t),s(o,1);return f+"</tr></tbody></table>"}function i(e,t,n){var i=e.getFullYear(),r=t.getFullYear(),a=r,o=0;return n&&(a=(r-=r%n)-r%n+n-1),i>a?o=1:i<r&&(o=-1),o}function r(e,t,n){var i=new R;return i=new R(i.getFullYear(),i.getMonth(),i.getDate()),e&&(i=new R(e)),t>i?i=new R(t):n<i&&(i=new R(n)),i}function a(e,t,n){return+e>=+t&&+e<=+n}function o(e,t){return e.slice(t).concat(e.slice(0,t))}function s(e,t,n){t=t instanceof R?t.getFullYear():e.getFullYear()+n*t,e.setFullYear(t)}function l(t){t.stopImmediatePropagation(),e(this).toggleClass(A,"mouseenter"==t.type)}function d(e){e.preventDefault()}function c(e){return _(e).calendars.standard}function u(e){var n=M[e.start],i=M[e.depth],r=_(e.culture);e.format=k(e.format||r.calendars.standard.patterns.d),isNaN(n)&&(n=0,e.start=D),(i===t||i>n)&&(e.depth=D)}function p(e){S&&e.find("*").attr("unselectable","on")}function f(e,t){for(var n=0,i=t.length;n<i;n++)if(e===+t[n])return!0;return!1}var h=window.kendo,g=h.ui,m=g.Widget,v=h.parseDate,k=h._extractFormat,b=h.template,_=h.getCulture,w=h.support.touch,y=h.support.transitions,x=y?y.css+"transform-origin":"",C=b('<td#=data.cssClass#><a class="k-link" href="\\#" data-#=data.ns#value="#=data.dateString#">#=data.value#</a></td>',{useWithBlock:!1}),T=b("<td>&nbsp;</td>",{useWithBlock:!1}),S=e.browser.msie&&parseInt(e.browser.version,10)<9,F=w?"touchend":"click",D="month",A="k-state-hover",H="k-state-disabled",I=w?"touchstart":"mouseenter",E=w?"touchend":"mouseleave",z=e.proxy,N=e.extend,R=Date,M={month:0,year:1,decade:2,century:3},O=m.extend({init:function(e,t){var n,i=this;m.fn.init.call(i,e,t),e=i.wrapper=i.element,(t=i.options).url=window.unescape(t.url),e.addClass("k-widget k-calendar"),i._templates(),i._header(),i._footer(i.footer),e.delegate("td:has(.k-link)",I+" "+E,l).delegate("td:has(.k-link)",F,z(i._click,i)),n=t.value,u(t),i._index=M[t.start],i._current=new R(r(n,t.min,t.max)),i.value(n),h.notify(i)},options:{name:"Calendar",value:null,min:new R(1900,0,1),max:new R(2099,11,31),dates:[],url:"",culture:"",footer:"",format:"",month:{},start:D,depth:D,animation:{horizontal:{effects:"slide",duration:500,divisor:2},vertical:{effects:"zoomIn",duration:400}}},events:["change","navigate"],setOptions:function(e){u(e),m.fn.setOptions.call(this,e)},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},navigateToPast:function(){this._navigate("_prevArrow",-1)},navigateToFuture:function(){this._navigate("_nextArrow",1)},navigateUp:function(){var e=this,t=e._index;e._title.hasClass(H)||e.navigate(e._current,++t)},navigateDown:function(e){var t=this,n=t._index,i=t.options.depth;e&&(n!==M[i]?t.navigate(e,--n):+t._value!=+e&&(t.value(e),t.trigger("change")))},navigate:function(n,i){i=isNaN(i)?M[i]:i;var a,o,s,l=this,d=l.options,c=d.culture,u=d.min,f=d.max,h=l._title,g=l._table,m=l._value,v=l._current,k=n&&+n>+v,b=i!==t&&i!==l._index;n?l._current=n=new R(r(n,u,f)):n=v,i===t?i=l._index:l._index=i,l._view=o=P.views[i],s=o.compare,h.toggleClass(H,i===M.century),l._prevArrow.toggleClass(H,s(n,u)<1),l._nextArrow.toggleClass(H,s(n,f)>-1),g&&!l._changeView||(h.html(o.title(n,c)),l._table=a=e(o.content(N({min:u,max:f,date:n,url:d.url,dates:d.dates,format:d.format,culture:c},l[o.name]))),p(a),l._animate({from:g,to:a,vertical:b,future:k}),l.trigger("navigate")),i===M[d.depth]&&m&&l._class("k-state-selected",o.toDateString(m)),l._changeView=!0},value:function(e){var n=this,i=n._view,r=n.options,o=r.min,s=r.max;if(e===t)return n._value;null!==(e=v(e,r.format,r.culture))&&(a(e=new R(e),o,s)||(e=null)),n._value=e,n._changeView=!e||i&&0!==i.compare(e,n._current),n.navigate(e)},_animate:function(e){var t=this,n=e.from,i=e.to;n?n.parent().data("animating")?(n.parent().kendoStop(!0,!0).remove(),n.remove(),i.insertAfter(t.element[0].firstChild)):n.is(":visible")&&!1!==t.options.animation?t[e.vertical?"_vertical":"_horizontal"](n,i,e.future):(i.insertAfter(n),n.remove()):i.insertAfter(t.element[0].firstChild)},_horizontal:function(e,t,n){var i=this.options.animation.horizontal,r=i.effects,a=e.outerWidth();r&&-1!=r.indexOf("slide")&&(e.add(t).css({width:a}),e.wrap("<div/>"),e.parent().css({position:"relative",width:2*a,float:"left",left:n?0:-a}),t[n?"insertAfter":"insertBefore"](e),N(i,{effects:"slide:"+(n?"left":"right"),complete:function(){e.remove(),t.unwrap()}}),e.parent().kendoStop(!0,!0).kendoAnimate(i))},_vertical:function(e,t){var n,i,r=this,a=r.options.animation.vertical,o=a.effects;o&&-1!=o.indexOf("zoom")&&(t.css({position:"absolute",top:e.prev().outerHeight(),left:0}).insertBefore(e),x&&(i=(i=(n=r._cellByDate(r._view.toDateString(r._current))).position()).left+parseInt(n.width()/2,10)+"px "+(i.top+parseInt(n.height()/2,10))+"px",t.css(x,i)),e.kendoStop(!0,!0).kendoAnimate({effects:"fadeOut",duration:600,complete:function(){e.remove(),t.css({position:"static",top:0,left:0})}}),t.kendoStop(!0,!0).kendoAnimate(a))},_cellByDate:function(t){return this._table.find("td:not(.k-other-month)").filter(function(){return e(this.firstChild).attr(h.attr("value"))===t})},_class:function(t,n){this._table.find("td:not(.k-other-month)").removeClass(t).filter(function(){return e(this.firstChild).attr(h.attr("value"))===n}).addClass(t)},_click:function(t){var n=this,i=n.options,a=n._current,o=e(t.currentTarget.firstChild),s=o.attr(h.attr("value")).split("/");s=new R(s[0],s[1],s[2]),-1!=o[0].href.indexOf("#")&&t.preventDefault(),o.parent().hasClass("k-other-month")?a=s:n._view.setDate(a,s),n.navigateDown(r(a,i.min,i.max))},_focus:function(e){var t=this,n=t._view;0!==n.compare(e,t._current)?t.navigate(e):t._current=e,t._class("k-state-focused",n.toDateString(e))},_footer:function(t){var n=this,i=n.element,r=new R,a=i.find(".k-footer");if(!t)return n._toggle(!1),void a.hide();a[0]||(a=e('<div class="k-footer"><a href="#" class="k-link k-nav-today"></a></div>').appendTo(i)),n._today=a.show().find(".k-link").html(t(r)).attr("title",h.toString(r,"D",n.options.culture)),n._toggle()},_header:function(){var e,t=this,n=t.element;n.find(".k-header")[0]||n.html('<div class="k-header"><a href="#" class="k-link k-nav-prev"><span class="k-icon k-i-arrow-w"></span></a><a href="#" class="k-link k-nav-fast"></a><a href="#" class="k-link k-nav-next"><span class="k-icon k-i-arrow-e"></span></a></div>'),e=n.find(".k-link").bind(I+" "+E,l).click(!1),t._title=e.eq(1).bind(F,z(t.navigateUp,t)),t._prevArrow=e.eq(0).bind(F,z(t.navigateToPast,t)),t._nextArrow=e.eq(2).bind(F,z(t.navigateToFuture,t))},_navigate:function(e,t){var n=this,i=n._index+1,r=new R(n._current);(e=n[e]).hasClass(H)||(i>3?r.setFullYear(r.getFullYear()+100*t):P.views[i].setDate(r,t),n.navigate(r))},_option:function(e,n){var i,r,a=this,o=a.options,s=+a._value;if(n===t)return o[e];(n=v(n,o.format,o.culture))&&(o[e]=new R(n),r=a._view.compare(n,a._current),"min"===e?(i=+n>s,r=r>-1):(i=s>+n,r=r<1),i?a.value(null):r&&a.navigate(),a._toggle())},_toggle:function(e){var n=this,i=n.options,r=n._today;e===t&&(e=a(new R,i.min,i.max)),r&&(r.unbind(F),e?r.addClass("k-nav-today").removeClass(H).bind(F,z(n._todayClick,n)):r.removeClass("k-nav-today").addClass(H).bind(F,d))},_todayClick:function(e){var t=this,n=M[t.options.depth],i=new R;e.preventDefault(),0===t._view.compare(t._current,i)&&t._index==n&&(t._changeView=!1),t._value=i,t.navigate(i,n),t.trigger("change")},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month,r=i.content,a=i.empty;e.month={content:b('<td#=data.cssClass#><a class="k-link#=data.linkClass#" href="#=data.url#" '+h.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:b("<td>"+(a||"&nbsp;")+"</td>",{useWithBlock:!!a})},!1!==n&&(e.footer=b(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}))}});g.plugin(O);var P={firstDayOfMonth:function(e){return new R(e.getFullYear(),e.getMonth(),1)},firstVisibleDay:function(e,t){for(var n=(t=t||h.culture().calendar).firstDay,i=new R(e.getFullYear(),e.getMonth(),0,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds());i.getDay()!=n;)P.setTime(i,-864e5);return i},setTime:function(e,t){var n=e.getTimezoneOffset(),i=new R(e.getTime()+t),r=i.getTimezoneOffset()-n;e.setTime(i.getTime()+6e4*r)},views:[{name:D,title:function(e,t){return c(t).months.names[e.getMonth()]+" "+e.getFullYear()},content:function(e){for(var t=this,i=0,r=e.min,a=e.max,s=e.date,l=e.dates,d=e.format,u=e.culture,p=e.url,g=p&&l[0],m=c(u),v=m.firstDay,k=m.days,b=o(k.names,v),_=o(k.namesShort,v),w=P.firstVisibleDay(s,m),y=t.first(s),x=t.last(s),C=t.toDateString,T=new R,S='<table class="k-content" cellspacing="0"><thead><tr>';i<7;i++)S+='<th scope="col" title="'+b[i]+'">'+_[i]+"</th>";return T=+new R(T.getFullYear(),T.getMonth(),T.getDate()),n({cells:42,perRow:7,html:S+="</tr></thead><tbody><tr>",start:new R(w.getFullYear(),w.getMonth(),w.getDate()),min:new R(r.getFullYear(),r.getMonth(),r.getDate()),max:new R(a.getFullYear(),a.getMonth(),a.getDate()),content:e.content,empty:e.empty,setter:t.setDate,build:function(e,t){var n=[],i=e.getDay(),r="",a="#";return(e<y||e>x)&&n.push("k-other-month"),+e===T&&n.push("k-today"),0!==i&&6!==i||n.push("k-weekend"),g&&f(+e,l)&&(a=p.replace("{0}",h.toString(e,d,u)),r=" k-action-link"),{date:e,dates:l,ns:h.ns,title:h.toString(e,"D",u),value:e.getDate(),dateString:C(e),cssClass:n[0]?' class="'+n.join(" ")+'"':"",linkClass:r,url:a}}})},first:function(e){return P.firstDayOfMonth(e)},last:function(e){return new R(e.getFullYear(),e.getMonth()+1,0)},compare:function(e,t){var n=e.getMonth(),i=e.getFullYear(),r=t.getMonth(),a=t.getFullYear();return i>a?1:i<a?-1:n==r?0:n>r?1:-1},setDate:function(e,t){t instanceof R?e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):P.setTime(e,864e5*t)},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()}},{name:"year",title:function(e){return e.getFullYear()},content:function(e){var t=c(e.culture).months.namesAbbr,i=this.toDateString,r=e.min,a=e.max;return n({min:new R(r.getFullYear(),r.getMonth(),1),max:new R(a.getFullYear(),a.getMonth(),1),start:new R(e.date.getFullYear(),0,1),setter:this.setDate,build:function(e){return{value:t[e.getMonth()],ns:h.ns,dateString:i(e),cssClass:""}}})},first:function(e){return new R(e.getFullYear(),0,e.getDate())},last:function(e){return new R(e.getFullYear(),11,e.getDate())},compare:function(e,t){return i(e,t)},setDate:function(e,t){if(t instanceof R)e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate());else{var n=e.getMonth()+t;e.setMonth(n),n>11&&(n-=12),n>0&&e.getMonth()!=n&&e.setDate(0)}},toDateString:function(e){return e.getFullYear()+"/"+e.getMonth()+"/1"}},{name:"decade",title:function(e){var t=e.getFullYear();return(t-=t%10)+"-"+(t+9)},content:function(e){var t=e.date.getFullYear(),i=this.toDateString;return n({start:new R(t-t%10-1,0,1),min:new R(e.min.getFullYear(),0,1),max:new R(e.max.getFullYear(),0,1),setter:this.setDate,build:function(e,t){return{value:e.getFullYear(),ns:h.ns,dateString:i(e),cssClass:0===t||11==t?' class="k-other-month"':""}}})},first:function(e){var t=e.getFullYear();return new R(t-t%10,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new R(t-t%10+9,e.getMonth(),e.getDate())},compare:function(e,t){return i(e,t,10)},setDate:function(e,t){s(e,t,1)},toDateString:function(e){return e.getFullYear()+"/0/1"}},{name:"century",title:function(e){var t=e.getFullYear();return(t-=t%100)+"-"+(t+99)},content:function(e){var t=e.date.getFullYear(),i=e.min.getFullYear(),r=e.max.getFullYear(),a=this.toDateString;return i-=i%10,(r-=r%10)-i<10&&(r=i+9),n({start:new R(t-t%100-10,0,1),min:new R(i,0,1),max:new R(r,0,1),setter:this.setDate,build:function(e,t){var n=e.getFullYear();return{value:n+" - "+(n+9),ns:h.ns,dateString:a(e),cssClass:0===t||11==t?' class="k-other-month"':""}}})},first:function(e){var t=e.getFullYear();return new R(t-t%100,e.getMonth(),e.getDate())},last:function(e){var t=e.getFullYear();return new R(t-t%100+99,e.getMonth(),e.getDate())},compare:function(e,t){return i(e,t,100)},setDate:function(e,t){s(e,t,10)},toDateString:function(e){var t=e.getFullYear();return t-t%10+"/0/1"}}]};P.isEqualDatePart=function(e,t){return!!e&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},P.makeUnselectable=p,P.restrictValue=r,P.isInRange=a,P.normalize=u,P.viewsEnum=M,h.calendar=P}(jQuery),function(e,t){function n(t){var n=t.parseFormats;h.normalize(t),(n=e.isArray(n)?n:[n]).splice(0,0,t.format),t.parseFormats=n}function i(e){e.preventDefault()}var r=window.kendo,a=r.ui,o=r.support.touch,s=a.Widget,l=r.parseDate,d=r.keys,c=r.template,u=o?"touchend":"click",p=u+".datepicker",f=o?"touchstart":"mousedown",h=r.calendar,g=h.isInRange,m=h.restrictValue,v=h.isEqualDatePart,k=e.extend,b=e.proxy,_=Date,w=function(t){var n=this,i=document.body,r=y.sharedCalendar;r||(r=y.sharedCalendar=new a.Calendar(e("<div />").hide().appendTo(i)),h.makeUnselectable(r.element)),n.calendar=r,n.options=t=t||{},n.popup=new a.Popup(e("<div />").addClass("k-calendar-container").appendTo(i),k(t.popup,t,{name:"Popup"})),n._templates(),n.value(t.value)};w.prototype={_calendar:function(){var e=this,t=e.popup,n=e.options,r=e.calendar,a=r.element;a.data("dateView")!==e&&(a.appendTo(t.element).data("dateView",e).undelegate(p).delegate("td:has(.k-link)",p,b(e._click,e)).unbind(f).bind(f,i).show(),r.unbind("change").bind("change",n),o||r.unbind("navigate").bind("navigate",b(e._navigate,e)),r.month=e.month,r.options.depth=n.depth,r.options.culture=n.culture,r._footer(e.footer),r.min(n.min),r.max(n.max),r.navigate(e._value,n.start),e.value(e._value))},open:function(){var e=this;e._calendar(),e.popup.open()},close:function(){this.popup.close()},min:function(e){this._option("min",e)},max:function(e){this._option("max",e)},toggle:function(){var e=this;e[e.popup.visible()?"close":"open"]()},move:function(e){var t,n,i,r=this,a=r.options,o=new _(r._current),s=r.calendar,l=s._index,c=s._view,u=e.keyCode;u!=d.ESC?e.altKey?u==d.DOWN?(r.open(),n=!0):u==d.UP&&(r.close(),n=!0):r.popup.visible()&&!s._table.parent().data("animating")&&(e.ctrlKey?u==d.RIGHT?(s.navigateToFuture(),n=!0):u==d.LEFT?(s.navigateToPast(),n=!0):u==d.UP?(s.navigateUp(),n=!0):u==d.DOWN&&(r._navigateDown(),n=!0):(u==d.RIGHT?(t=1,n=!0):u==d.LEFT?(t=-1,n=!0):u==d.UP?(t=0===l?-7:-4,n=!0):u==d.DOWN?(t=0===l?7:4,n=!0):u==d.ENTER?(r._navigateDown(),n=!0):u==d.HOME||u==d.END?(o=c[i=u==d.HOME?"first":"last"](o),n=!0):u==d.PAGEUP?(n=!0,s.navigateToPast()):u==d.PAGEDOWN&&(n=!0,s.navigateToFuture()),(t||i)&&(i||c.setDate(o,t),r._current=o=m(o,a.min,a.max),s._focus(o))),n&&e.preventDefault()):r.close()},value:function(e){var t=this,n=t.calendar,i=t.options;t._value=e,t._current=new _(m(e,i.min,i.max)),n.element.data("dateView")===t&&(n._focus(t._current),n.value(e))},_click:function(e){-1!==e.currentTarget.className.indexOf("k-state-selected")&&this.close()},_navigate:function(){var e=this,t=e.calendar;e._current=new _(t._current),t._focus(t._current)},_navigateDown:function(){var e=this,t=e.calendar,n=t._current,i=t._table.find("."),a=i.children(":first").attr(r.attr("value")).split("/");a=new _(a[0],a[1],a[2]),i[0]&&!i.hasClass("k-state-selected")?(t._view.setDate(n,a),t.navigateDown(n)):e.close()},_option:function(e,t){var n=this,i=n.options,r=n.calendar;i[e]=t,r.element.data("dateView")===n&&r[e](t)},_templates:function(){var e=this,t=e.options,n=t.footer,i=t.month||{},a=i.content,o=i.empty;e.month={content:c('<td#=data.cssClass#><a class="k-link" href="\\#" '+r.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(a||"#=data.value#")+"</a></td>",{useWithBlock:!!a}),empty:c("<td>"+(o||"&nbsp;")+"</td>",{useWithBlock:!!o})},!1!==n&&(e.footer=c(n||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}))}},w.normalize=n,r.DateView=w;var y=s.extend({init:function(t,i){var a=this;s.fn.init.call(a,t,i),t=a.element,(i=a.options).format=void 0!=e("label[for='dateFormat']").text()&&""!=e("label[for='dateFormat']").text()?e("label[for='dateFormat']").text():i.format,n(i),i.wrap&&(i.placeholder=i.placeholder||t.attr("placeholder"),a._wrapper(),a.dateView=new w(k({},i,{anchor:a.wrapper,change:function(){a._change(this.value()),a.close()},close:function(e){a.trigger("close")&&e.preventDefault()},open:function(e){a.trigger("open")&&e.preventDefault()}})),a._icon(),o||(t[0].type="text"),t.addClass("k-input").attr("sqlDateValue","").attr("formattedValue","").css("width",i.width).bind({keydown:b(a._keydown,a),focus:function(e){this.value==a.options.placeholder&&(this.value=""),a._inputWrapper.addClass("")},blur:b(a._blur,a)}).closest("form").bind("reset",function(){a.value(t[0].defaultValue)}),t.bind("keyup",function(n){8!=n.keyCode&&46!=n.keyCode||1!=e(t).val().length||a._blur()}),a.enable(!t.is("[disabled]")));var d=l(a.element.val()||i.value,i.format,"in-IN");i.wrap?(a.element.css("color","black"),null!=d&&(a.element.val(d?r.toString(d,i.format,i.culture):value),""==a.element.val()||null==d?(a.element.val(a.options.placeholder),a.element.attr("sqlDateValue",""),a.element.attr("formattedValue","")):(a.element.attr("sqlDateValue",r.toString(d,i.format,i.culture)),a.element.attr("formattedValue",r.toString(d,i.format,i.culture)))),a.value(a.element.val()||i.value),a.element.val()==a.options.placeholder&&a.element.css("color","gray")):(a.element.css("color","gray"),null!=d&&(a.element.text(d?r.toString(d,i.format,i.culture):value),""==a.element.text()||null==d?(a.element.text(a.options.placeholder),a.element.attr("sqlDateValue",""),a.element.attr("formattedValue","")):(a.element.attr("sqlDateValue",r.toString(d,"MM/dd/yyyy",i.culture)),a.element.attr("formattedValue",r.toString(d,i.format,i.culture))))),r.notify(a)},events:["open","close","change","focusin"],options:{name:"DatePicker",value:r.toString(new Date,"dd-MMM-yyyy"),footer:"",format:"dd-MMM-yyyy",culture:"",placeholder:"",parseFormats:[],min:new Date(2010,0,1),max:new Date(2099,11,31),start:"month",depth:"month",animation:{},month:{},wrap:!0},setOptions:function(e){var t=this;s.fn.setOptions.call(t,e),n(t.options),k(t.dateView.options,t.options)},enable:function(e){var t=this,n=t._dateIcon.unbind(u+" "+f),r=t._inputWrapper.unbind("mouseenter mouseleave"),a=t.element;!1===e?(r.removeClass("k-state-default").addClass("k-state-disabled"),a.attr("disabled","disabled")):(r.addClass("k-state-default").removeClass("k-state-disabled").bind("mouseenter mouseleave",t._toggleHover),a.removeAttr("disabled"),n.bind(u,b(t._click,t)).bind(f,i))},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var t=this;if(void 0===e)return t._value;t._old=t._update(e)},sqlDateValue:function(){var e=this;return new Date(e.element.attr("sqlDateValue"))},_toggleHover:function(t){o||e(t.currentTarget).toggleClass("","mouseenter"===t.type)},_blur:function(){var e=this;e.close(),e._change(e.element.val()),e._inputWrapper.removeClass("")},_click:function(){var e=this,t=e.element;t.val()==e.options.placeholder&&t.val(""),e.dateView.toggle(),o||t[0]===document.activeElement||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t.trigger("change"),t.element.trigger("change"))},_keydown:function(e){var t=this,n=t.dateView;n.popup.visible()||e.keyCode!=d.ENTER?n.move(e):t._change(t.element.val())},_icon:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(i)),n._dateIcon=t},_option:function(e,t){var n=this,i=n.options;if(void 0===t)return i[e];(t=l(t,i.parseFormats,i.culture))&&(i[e]=new _(t),n.dateView[e](t))},_update:function(e){var t=this,n=t.options,i=n.min,a=n.max,o=l(e,n.parseFormats,n.culture);return+o==+t._value&&null!=o?o:(null!==o&&v(o,i)?o=m(o,i,a):g(o,i,a)||(o=null),t._value=o,t.dateView.value(o),t.element.val(o?r.toString(o,n.format,n.culture):e),""==t.element.val()||null==o?(t.element.val(t.options.placeholder),t.element.attr("sqlDateValue",""),t.element.attr("formattedValue","")):(t.element.attr("sqlDateValue",r.toString(o,"yyyy-MM-dd",n.culture)),t.element.attr("formattedValue",r.toString(o,n.format,n.culture))),o)},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-datepicker"))[0]||(t=i.wrap("<span />").parent().addClass("k-picker-wrap k-state-default").css("width",n.options.width),t=i.parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(i[0].className),n._inputWrapper=e(t[0].firstChild)}});a.plugin(y)}(jQuery),function(e,t){function n(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function i(e,t,i){return t.split(i)[n(e,t,i)]}function r(e,t,i,r){var a=t.split(r);return a.splice(n(e,t,r),1,i),r&&""!==a[a.length-1]&&a.push(""),a.join(r)}function a(e){var t=e.value.length;f(e,t,t)}var o=window.kendo,s=o.support.placeholder,l=o.ui,d=o.keys,c=o.data.DataSource,u=l.List,p=u.caret,f=u.selectText,h=e.proxy,g=u.extend({init:function(t,n){var i=this;if(n=e.isArray(n)?{dataSource:n}:n,u.fn.init.call(i,t,n),t=i.element,n=i.options,n.placeholder=n.placeholder||t.attr("placeholder"),s&&t.attr("placeholder",n.placeholder),i._wrapper(),i._accessors(),i._dataSource(),t[0].type="text",i.wrapper,void 0!=i.options.separator){i.options.minLength=1;var r=t.attr("data-valid");t.attr("data-valid-msg");void 0!=r&&i.options.valueControlID.attr("explicitValid","1")}t.attr("autocomplete","off").addClass("k-input").css("text-transform","uppercase").bind({keydown:h(i._keydown,i),paste:function(){setTimeout(function(){i.search(i.value())},0)},focus:function(){i._prev=i.value(),i._placeholder(!1),clearTimeout(i._bluring)},blur:function(){i.element.val()!=i.options.placeholder&&i._valid(),void 0==i.options.separator&&""==i.element.val()&&(""==n.valueControlID&&void 0==n.valueControlID||e(n.valueControlID).val("")),i._change(),i._placeholder()},change:function(){i._setValue()}}),i._enable(),i._popup(),i._old=i.value(),i._placeholder(),o.notify(i)},options:{name:"AutoComplete",suggest:!1,template:"",filterField:"",rightAlign:!1,dataTextField:"",dataValueField:"",valueControlID:"",minLength:0,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!0,separator:null,placeholder:"",animation:{},addOnFunction:null,newAllowed:!1,confirmOnAdd:!0,IsChangeOnBlankValue:!1},setDefaultValue:function(e,t){this._key=e,this._value=t,this.key(e),this.value(t),this.options.defaultValue=!0},setAddOnFunction:function(e){void 0!=this.options.addOnFunction&&null!==this.options.addOnFunction&&(this.options.textControlId="Text_"+e,this.options.valueControlId=e,this.options.addOnFunction(this.options.textControlId,this.value(),this.options.valueControlId,this.key()))},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e.dataSource.unbind("change",e._refreshHandler):e._refreshHandler=h(e.refresh,e),e.dataSource=c.create(e.options.dataSource).bind("change",e._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","dataBinding","dataBound"],setOptions:function(e){u.fn.setOptions.call(this,e),this._template(),this._accessors()},enable:function(e){var t=this,n=t.element,i=t.wrapper;!1===e?(i.removeClass("k-state-default").addClass("k-state-disabled").unbind("mouseenter mouseleave"),i.find(".k-i-arrow-s").unbind("click"),n.attr("disabled","disabled")):(i.removeClass("k-state-disabled").addClass("k-state-default").bind("mouseenter mouseleave",t._toggleHover),n.removeAttr("disabled"),i.find(".k-i-arrow-s").bind({click:function(){current=t._current,visible=!1,t._search(0)}}))},close:function(){var e=this;e._setValue(),e._current=null,e.popup.close()},refresh:function(){var t=this,n=t.ul[0],i=t.popup,r=t.options,a=t._data(),s=a.length;t.trigger("dataBinding"),n.innerHTML=o.render(t.template,a),t._height(s),s<=2&&(r.highlightFirst&&t.current(e(n.firstChild)),r.suggest&&t.suggest(e(n.firstChild))),t._open&&(t._open=!1,i[s?"open":"close"]()),t._touchScroller&&t._touchScroller.reset(),t._makeUnselectable(),t.trigger("dataBound")},select:function(e){this._select(e)},search:function(e,t){var n,r=this,a=r.options,o=a.ignoreCase,s=a.separator;e=void 0==t?e||r.value():"",r._current=null,clearTimeout(r._typing),s&&(e=i(p(r.element[0]),e,s)),!(n=e.length)&&n<0?r.popup.close():n>=("0"==t?0:r.options.minLength)&&(r._open=!0,r.dataSource.filter({value:o?e.toLowerCase():e,operator:a.filter,field:a.filterField,ignoreCase:o}))},suggest:function(e){var t,i=this,r=i._last,a=i.value(),o=i.element[0],s=p(o),l=i.options.separator,c=a.split(l),h=n(s,a,l),g=s;r!=d.BACKSPACE&&r!=d.DELETE?("string"!=typeof(e=e||"")&&(e=(t=u.inArray(e[0],i.ul[0]))>-1?i._text(i._data()[t]):""),s<=0&&(s=a.toLowerCase().indexOf(e.toLowerCase())+1),t=(t=a.substring(0,s).lastIndexOf(l))>-1?s-(t+l.length):s,a=c[h].substring(0,t),e&&((t=e.toLowerCase().indexOf(a.toLowerCase()))>-1&&(g=s+(e=e.substring(t+a.length)).length,a+=e),l&&""!==c[c.length-1]&&c.push("")),c[h]=a,i.value(c.join(l||"")),f(o,s,g)):i._last=void 0},value:function(e){var t=this,n=t.element[0];if(void 0===e)return e=n.value,n.className.indexOf("k-readonly")>-1&&e===t.options.placeholder?"":e;n.value=e,t._placeholder()},key:function(e){var t=this,n=t.options.valueControlID[0];if(void 0===e)return e=n.value,n.className.indexOf("k-readonly")>-1&&e===t.options.placeholder?"":e;n.value=e,t._placeholder()},_accept:function(e){var t=this;t._focus(e),a(t.element[0])},_keydown:function(t){var n=this,i=n.ul[0],r=t.keyCode,a=n._current,o=n.popup.visible();n._last=r,r===d.DOWN?(n.popup.visible()?n._move(a?a.next():e(i.firstChild)):n._search(),t.preventDefault()):r===d.UP?(o&&n._move(a?a.prev():e(i.lastChild)),t.preventDefault()):222===r?t.preventDefault():r===d.ENTER||r===d.TAB||16===r?(n.popup.visible()&&t.preventDefault(),n._accept(a),null!==n.options.addOnFunction&&n.options.addOnFunction(n.element.attr("id"),n.value(),n.options.valueControlID.attr("id"),n.key())):r===d.ESC?n.close():n._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_placeholder:function(e){if(!s){var t,n=this,i=n.element,r=n.options.placeholder;if(r){if(t=i.val(),void 0===e&&(e=!t),e||(r=t!==r?t:""),t===n._old&&!e)return;i.toggleClass("k-readonly",e).val(r)}}},_search:function(e){var t=this;clearTimeout(t._typing),t._typing=setTimeout(function(){t._prev!==t.value()||t._prev==t.options.placeholder?(t._prev=t._prev==t.options.placeholder?"":t.value(),t.search(void 0,e)):(t._prev==t.value()&&""==t._prev||void 0!=e)&&t.search(null,e)},t.options.delay)},_select:function(t){var n,i,a=this,o=a.options.separator,s=a._data();(t=e(t))[0]&&!t.hasClass("k-state-selected")&&(i=u.inArray(t[0],a.ul[0]))>-1&&(s=s[i],n=a._text(s),o&&(n=r(p(a.element[0]),a.value(),n,o)),a.value(n),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(s[a.options.dataValueField]),a.current(t.addClass("k-state-selected")),null!==a.options.addOnFunction&&a.options.addOnFunction(a.element.attr("id"),a.value(),a.options.valueControlID.attr("id"),a.key()))},_toggleHover:function(e){},_wrapper:function(){var t,n=this,i=n.element,r=i[0];(t=i.parent()).is("span.k-widget")||(e(i).hasClass("k-input")&&(i.unwrap(".k-widget k-combobox k-header"),i.unwrap(".k-dropdown-wrap k-state-default"),e(i).next().remove()),t=i.wrap("<span class='k-widget k-combobox k-header'/>").wrap("<span class='k-dropdown-wrap k-state-default' unselectable='on'/>").parent(),e('<span class="k-select" unselectable="on"><span class="k-icon k-i-arrow-s" unselectable="on" style="cursor:pointer;">select</span></span>').insertAfter(i).find(".k-i-arrow-s").bind({click:function(){current=n._current,visible=!1,n._search(0)}})),t[0].style.cssText=r.style.cssText,i.css({width:"100%",height:r.style.height}),n._focused=n.element,n.wrapper=t,void 0!=n.options.separator&&i.closest("td").append("<div style='display:none;overflow: auto;' id='divMulti"+n.element[0].name.replace("Text_","")+"'><ul style='padding:3px 2px 2px 0px;margin-top:0px;'><li class='k-button' style='display:none;margin-bottom:10px !important;'><input type='hidden' id='Multi_"+n.element[0].name.replace("Text_","")+"' name='Multi_"+n.element[0].name.replace("Text_","")+"'/><span style='display:none;' id='FieldKeyValues"+n.element[0].name.replace("Text_","")+"' name='FieldKeyValues"+n.element[0].name.replace("Text_","")+"'></span></li></ul></div>")},_valid:function(){var t,n,i,a=this,o=a.options.separator,s=a.options.dataSource,l=a.options.newAllowed,d=a.options.confirmOnAdd,c=!1;if(void 0==s.length&&(s=a.options.dataSource._data),""!=a.value())if(void 0==o){for(i=0;i<s.length;i++)if(t=s[i],n=a._text(t),o&&(n=r(p(a.element[0]),a.value(),n,o)),a.value().toUpperCase()==n.toUpperCase()&&a.key()==t.Key){c=!0;break}if(c)a.value(a.value().toUpperCase()),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(t[a.options.dataValueField]);else if(0==s.length)a.value(a._prev),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(e(a.options.valueControlID).val());else if(l){m=!0;d&&(m=confirm("'"+a._prev.replace(" -[NEW]","").toUpperCase()+"' is not exist in our system. Do you wish to create this?")),m&&(a.value(a._prev.replace(" -[NEW]","").toUpperCase()+" -[NEW]"),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val("0"))}else a.value(""),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val("")}else{var u=a.value().split(o),f=0,h="",g="";for(f=0;f<u.length;f++)if(""!=u[f])for(i=0;i<s.length;i++)if(t=s[i],n=a._text(t),o&&(n=r(p(a.element[0]),u[f],n,o)),0==n.toUpperCase().indexOf(u[f].toUpperCase())){if(c=!0,h.indexOf(t[a.options.dataValueField])>-1)break;h=h+(""==h?"":",")+t[a.options.dataValueField],g=g+""+n;break}""!=h?(a.value(g),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(h)):(a.value(""),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(""))}else if(l&&""!=a._prev){var m=!0;d&&(m=confirm("'"+a._prev.replace(" -[NEW]","").toUpperCase()+"' is not exist in our system. Do you wish to create this?")),m?(a.value(a._prev.replace(" -[NEW]","").toUpperCase()+" -[NEW]"),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val("0")):(a.value(""),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(""))}null!==a.options.addOnFunction&&a.options.addOnFunction(a.element.attr("id"),a.value(),a.options.valueControlID.attr("id"),a.key())},_setValue:function(){var t,n,i,a=this,o=a.options.separator,s=a.options.dataSource,l=!1;if(void 0==s.length&&(s=a.options.dataSource._data),""!=a.value())if(void 0==o){for(i=0;i<s.length;i++)if(t=s[i],n=a._text(t),o&&(n=r(p(a.element[0]),a.value(),n,o)),n.trim().toUpperCase()==a.value().trim().toUpperCase()&&a.key()==t.Key){l=!0;break}l?(a.value(n),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(t[a.options.dataValueField])):0==s.length?(a.value(a._prev),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(e(a.options.valueControlID).val()),a._typing>0&&a.value("")):(a.value(""),a.popup.close(),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(""))}else{var d=a.value().split(o),c=0,u="",f="";for(c=0;c<d.length;c++)if(""!=d[c])for(i=0;i<s.length;i++)if(t=s[i],n=a._text(t),o&&(n=r(p(a.element[0]),d[c],n,o)),n.toUpperCase()==a.value().toUpperCase()){if(l=!0,u.indexOf(t[a.options.dataValueField])>-1)break;u=u+(""==u?"":",")+t[a.options.dataValueField],f=f+""+n;break}if(""!=u){a.value("");var h=a.element[0].name.replace("Text_","");if(e("div[id='divMulti"+h+"']").show(),e("div[id='divMulti"+h+"']").find("span[name^='FieldKeyValues"+h+"']").text().match(new RegExp("(?:^|,)"+u+"(?:,|$)")))ShowMessage("error","",'Selected item "'+f.replace(",","")+'" already exists');else{var g=a.element.closest("td").find("li").length;if(2==(g+=1))a.options.rightAlign?e("div[id='divMulti"+h+"']").find("ul").append("<li class='k-button' style='margin-right:3px;margin-bottom:3px;'><span>"+f.replace(",","")+"</span><span id='"+u+"' class='k-icon k-delete'></span></li>"):e("div[id='divMulti"+h+"']").find("ul").prepend("<li class='k-button' style='margin-right:3px;margin-bottom:3px;'><span>"+f.replace(",","")+"</span><span id='"+u+"' class='k-icon k-delete'></span></li>"),e("div[id='divMulti"+h+"']").find("span[id^='FieldKeyValues"+h+"']").text(u),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(u);else{a.options.rightAlign?e("div[id='divMulti"+h+"']").find("ul").append("<li class='k-button' style='margin-right:3px;margin-bottom:3px;'><span>"+f.replace(",","")+"</span><span id='"+u+"' class='k-icon k-delete'></span></li>"):e("div[id='divMulti"+h+"']").find("ul").prepend("<li class='k-button' style='margin-right:3px;margin-bottom:3px;'><span>"+f.replace(",","")+"</span><span id='"+u+"' class='k-icon k-delete'></span></li>");var m=e("div[id='divMulti"+h+"']").find("span[name^='FieldKeyValues"+h+"']").text();m=m+","+u,""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(m),e("div[id='divMulti"+h+"']").find("span[name^='FieldKeyValues"+h+"']").text(m)}e("div[id='divMulti"+h+"']").find("span[id='"+u+"'].k-delete").click(function(t){var n="divMulti"+h,i="Text_"+h;AutoCompleteDeleteCallBack(t,n,i),e(this).parent().remove();var r=e("div[id='divMulti"+h+"']").find("span[name^='FieldKeyValues"+h+"']").text().split(",").filter(function(e){return""!=e}),o=r.indexOf(e(this)[0].id);r.splice(o,1),e("div[id='divMulti"+h+"']").find("span[name^='FieldKeyValues"+h+"']").text(r.join(",")),e("div[id='divMulti"+h+"']").find("input:hidden[name^='Multi_"+a.element[0].name.replace("Text_","")+"']").val(r.join(",")),""==a.options.valueControlID&&void 0==a.options.valueControlID||e(a.options.valueControlID).val(r.join(",")),""==e(a.options.valueControlID).val()&&e("div[id='divMulti"+h+"']").hide()}),e("div[id='divMulti"+h+"']").find("input:hidden[name^='Multi_"+a.element[0].name.replace("Text_","")+"']").val(e("div[id='divMulti"+h+"']").find("span[name^='FieldKeyValues"+h+"']").text()),g>0&&"required"==e("#"+a.element[0].name.replace("Text_","")).attr("required")&&e("#"+a.element[0].name.replace("Text_","")).removeAttr("required")}}else a.value("")}}});l.plugin(g)}(jQuery),function(e,t){function n(e,t,n){for(var i,r=0,a=t.length-1;r<a;++r)(i=t[r])in e||(e[i]={}),e=e[i];e[t[a]]=n}var i=window.kendo,r=i.ui,a=r.Select,o=i.support.mobileOS,s="k-state-selected",l=e.proxy,d=a.extend({init:function(t,n){var r,o,s,l=this,d=n&&n.index;n=e.isArray(n)?{dataSource:n}:n,a.fn.init.call(l,t,n),n=l.options,t=l.element.focus(function(){l.wrapper.focus()}),l._reset(),l._word="",l._wrapper(),l._span(),l._popup(),l._mobile(),l._accessors(),l._dataSource(),l._enable(),l._cascade(),l.selectedIndex=-1,void 0!==d&&(n.index=d),n.autoBind?l._selectItem():((s=n.text)||(o=(r=l._optionLabelText(n.optionLabel))&&0===n.index,t.is("select")?s=o?r:t.children(":selected").text():!t[0].value&&o&&(s=r)),l.text(s)),i.notify(l)},options:{name:"DropDownList",enable:!0,index:0,autoBind:!0,text:"",template:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",ignoreCase:!0,animation:{}},events:["open","close","change","select","dataBinding","dataBound"],setOptions:function(e){a.fn.setOptions.call(this,e),this._template(),this._accessors()},enable:function(e){var t=this,n=t.element,i=t.wrapper.unbind(".dropdownlist"),r=t._inputWrapper.unbind("mouseenter mouseleave");!1===e?(n.attr("disabled","disabled"),r.removeClass("k-state-default").addClass("k-state-disabled")):(n.removeAttr("disabled","disabled"),r.addClass("k-state-default").removeClass("k-state-disabled").bind("mouseenter mouseleave",t._toggleHover),i.bind({"click.dropdownlist":function(e){e.preventDefault(),t.toggle()},"keydown.dropdownlist":l(t._keydown,t),"keypress.dropdownlist":l(t._keypress,t),"focusin.dropdownlist":function(){r.addClass("k-state-focused")},"focusout.dropdownlist":function(e){t._blur(),r.removeClass("k-state-focused")}}))},open:function(){var e=this;e.ul[0].firstChild?(e.popup.open(),e._scroll(e._current)):(e._open=!0,e._selectItem())},toggle:function(e){this._toggle(e)},refresh:function(){var e=this,t=e._data(),n=t.length,r=e.options.optionLabel;e.trigger("dataBinding"),e._current&&e.current(null),e.ul[0].innerHTML=i.render(e.template,t),e._height(n),e.element.is("select")&&(r&&n&&(r='<option value="">'+(r=e._optionLabelText(r))+"</option>"),e._options(t,r)),e._open&&(e._open=!1,e.toggle(!!n)),e._hideBusy(),e._makeUnselectable(),e.trigger("dataBound")},search:function(e){if(e){var t=this,n=t.options.ignoreCase;n&&(e=e.toLowerCase()),t._select(function(i){var r=t._text(i);if(void 0!==r)return r+="",n&&(r=r.toLowerCase()),0===r.indexOf(e)})}},select:function(e){var t=this;if(void 0===e)return t.selectedIndex;t._select(e),t._old=t._accessor(),t._oldIndex=t.selectedIndex},text:function(e){var t=this.span;if(void 0===e)return t.text();t.text(e)},value:function(e){var t,n=this;if(void 0===e)return n._accessor();null!==e&&(e=e.toString()),e&&n._valueOnFetch(e)||(t=n._index(e),n.select(t>-1?t:0))},_selectItem:function(){var e=this;e.dataSource.one("change",function(){var t=e.options.value||e.value();t?e.value(t):e.select(e.options.index),e.trigger("selected")}).fetch()},_accept:function(e){this._focus(e)},_optionLabelText:function(){var e=this.options,t=e.dataTextField,n=e.optionLabel;return n&&t&&"object"==typeof n?this._text(n):n},_data:function(){var e=this,t=e.options,r=t.optionLabel,a=t.dataTextField,o=t.dataValueField,s=e.dataSource.view(),l=s.length,d=r,c=0;if(r&&l){for("object"==typeof r?d=r:a&&(d={},a=a.split("."),n(d,o=o.split("."),""),n(d,a,r)),d=new i.data.ObservableArray([d]);c<l;c++)d.push(s[c]);s=d}return s},_keydown:function(e){var t=this,n=e.keyCode,r=i.keys,a=t.ul[0];t._move(e),n===r.HOME?(e.preventDefault(),t._select(a.firstChild)):n===r.END&&(e.preventDefault(),t._select(a.lastChild))},_keypress:function(e){var t=this;setTimeout(function(){t._word+=String.fromCharCode(e.keyCode||e.charCode),t._search()})},_popup:function(){a.fn._popup.call(this),this.popup.one("open",function(){this.wrapper=i.wrap(this.element).addClass("km-popup")})},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._word=""},e.options.delay),e.search(e._word)},_select:function(e){var t,n,i,a=this,o=a._current,l=a._data();(e=a._get(e))&&e[0]&&!e.hasClass(s)&&(o&&o.removeClass(s),(i=r.List.inArray(e[0],a.ul[0]))>-1&&(l=l[i],n=a._text(l),t=a._value(l),a.selectedIndex=i,a.text(n),a._accessor(void 0!==t?t:n,i),a.current(e.addClass(s))))},_mobile:function(){var e=this.popup;e.element.parents(".km-root").eq(0).length&&o&&(e.options.animation.open.effects=o.android||o.meego?"fadeIn":o.ios?"slideIn:up":e.options.animation.open.effects)},_span:function(){var t,n=this,i=n.wrapper;(t=i.find(".k-input"))[0]||(i.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span class="k-select"><span class="k-icon k-i-arrow-s">select</span></span></span>').append(n.element),t=i.find(".k-input")),n.span=t,n._inputWrapper=e(i[0].firstChild),n._arrow=i.find(".k-icon").mousedown(function(e){e.preventDefault()})},_wrapper:function(){var e,t=this,n=t.element,i=n[0],r=n.attr("tabIndex");(e=n.parent()).is("span.k-widget")||(e=n.wrap("<span />").parent()),e.attr("tabIndex",r||0),e[0].style.cssText=i.style.cssText,n.hide(),t._focused=t.wrapper=e.attr("unselectable","on").addClass("k-widget k-dropdown k-header").addClass(i.className)}});r.plugin(d)}(jQuery),function(e,t){var n=window.kendo,i=n.ui,r=i.List,a=i.Select,o=n.support,s=o.placeholder,l=a.removeFiltersForField,d=n.keys,c=o.touch?"touchend":"click",u=e.proxy,p=a.extend({init:function(t,i){var r,o,s=this;i=e.isArray(i)?{dataSource:i}:i,a.fn.init.call(s,t,i),i=s.options,t=s.element.focus(function(){s.input.focus()}),i.placeholder=i.placeholder||t.attr("placeholder"),s._reset(),s._wrapper(),s._input(),s._popup(),s._accessors(),s._dataSource(),s._enable(),s._cascade(),r=s._inputWrapper,s.input.bind({keydown:u(s._keydown,s),focus:function(){r.addClass("k-state-focused"),s._placeholder(!1)},blur:function(){r.removeClass("k-state-focused"),clearTimeout(s._typing),s.text(s.text()),s._placeholder(),s._blur()}}),s._oldIndex=s.selectedIndex=-1,s._old=s.value(),i.autoBind?s._selectItem():(!(o=i.text)&&t.is("select")&&(o=t.children(":selected").text()),o&&s.input.val(o)),o||s._placeholder(),n.notify(s)},options:{name:"ComboBox",enable:!0,index:-1,autoBind:!0,delay:200,dataTextField:"",dataValueField:"",minLength:0,height:200,highlightFirst:!0,template:"",filter:"none",placeholder:"",suggest:!1,ignoreCase:!0,animation:{}},events:["open","close","change","select","dataBinding","dataBound"],setOptions:function(e){a.fn.setOptions.call(this,e),this._template(),this._accessors()},current:function(e){var t=this,n=t._current;if(void 0===e)return n;n&&n.removeClass("k-state-selected"),a.fn.current.call(t,e)},enable:function(e){var t=this,n=t.input.add(t.element),i=t._inputWrapper.unbind("mouseenter mouseleave"),r=t._arrow.parent().unbind(c+" mousedown");!1===e?(i.removeClass("k-state-default").addClass("k-state-disabled"),n.attr("disabled","disabled")):(i.removeClass("k-state-disabled").addClass("k-state-default").bind("mouseenter mouseleave",t._toggleHover),n.removeAttr("disabled"),r.bind(c,function(){t.toggle()}).bind("mousedown",function(e){e.preventDefault()}))},open:function(){var e=this,t=e.dataSource.options.serverFiltering;e.popup.visible()||(!e.ul[0].firstChild||"accept"===e._state&&!t?(e._open=!0,e._state="rebind",e._selectItem()):(e.popup.open(),e._scroll(e._current)))},refresh:function(){var t=this,i=t.ul[0],r=t.options,a=t.value(),o=t._data(),s=o.length;t.trigger("dataBinding"),i.innerHTML=n.render(t.template,o),t._height(s),t.element.is("select")&&(t._options(o),a&&"rebind"===t._state&&(t._state="",t.value(a))),s&&(r.highlightFirst&&t.current(e(i.firstChild)),r.suggest&&t.input.val()&&t.suggest(e(i.firstChild))),t._open&&(t._open=!1,t.toggle(!!s)),t._touchScroller&&t._touchScroller.reset(),t._makeUnselectable(),t._hideBusy(),t.trigger("dataBound")},select:function(e){var t=this;if(void 0===e)return t.selectedIndex;t._select(e),t._old=t._accessor(),t._oldIndex=t.selectedIndex},search:function(e){var t,n,i=this,r=(e="string"==typeof e?e:this.text()).length,a=i.options,o=a.ignoreCase,s=a.filter,d=a.dataTextField;clearTimeout(i._typing),r>=a.minLength&&("none"===s?i._filter(e):(i._open=!0,i._state="filter",n=i.dataSource.filter()||{},l(n,d),(t=n.filters||[]).push({value:o?e.toLowerCase():e,field:d,operator:s,ignoreCase:o}),i.dataSource.filter(t)))},suggest:function(e){var t,n=this,i=n.input[0],a=n.text(),o=r.caret(i),s=n._last;s!=d.BACKSPACE&&s!=d.DELETE?("string"!=typeof(e=e||"")&&(e=(t=r.inArray(e[0],n.ul[0]))>-1?n._text(n.dataSource.view()[t]):""),o<=0&&(o=a.toLowerCase().indexOf(e.toLowerCase())+1),e?(t=e.toLowerCase().indexOf(a.toLowerCase()))>-1&&(a+=e.substring(t+a.length)):a=a.substring(0,o),a.length===o&&e||(i.value=a,r.selectText(i,o,a.length))):n._last=void 0},text:function(e){e=null===e?"":e;var t,n=this,i=n._text,r=n.input[0],a=n.options.ignoreCase,o=e;if(void 0===e)return r.value;(t=n.dataItem())&&i(t)===e||(a&&(o=o.toLowerCase()),n._select(function(e){return e=i(e),a&&(e=(e+"").toLowerCase()),e===o}),n.selectedIndex<0&&(n._custom(e),r.value=e))},toggle:function(e){this._toggle(e)},value:function(e){var t,n=this;if(void 0===e)return n._accessor();null!==e&&(e=e.toString()),e&&n._valueOnFetch(e)||((t=n._index(e))>-1?n.select(t):(n.current(null),n._custom(e),n.text(e),n._placeholder()),n._old=n._accessor(),n._oldIndex=n.selectedIndex)},_accept:function(e){var t=this;e&&t.popup.visible()?("filter"===t._state&&(t._state="accept"),t._focus(e)):(t.text(t.text()),t._change())},_custom:function(t){var n=this,i=n.element,r=n._option;i.is("select")?(r||(r=n._option=e("<option/>"),i.append(r)),r.text(t),r[0].selected=!0):i.val(t)},_filter:function(e){var t=this,n=t.options,i=t.dataSource,r=n.ignoreCase;r&&(e=e.toLowerCase()),t.ul[0].firstChild?(-1!==t._highlight(function(n){var i=t._text(n);if(void 0!==i)return(""==(i+="")||""!==e)&&(r&&(i=i.toLowerCase()),0===i.indexOf(e))})&&(n.suggest&&t._current&&t.suggest(t._current),t.open()),t._hideBusy()):i.one("change",function(){i.data()[0]&&t.search(e)}).fetch()},_highlight:function(t){var n,i=this;return void 0===t||null===t?-1:(t=i._get(t),-1==(n=r.inArray(t[0],i.ul[0]))&&(t=i.options.highlightFirst&&!i.text()?e(i.ul[0].firstChild):null),i.current(t),n)},_input:function(){var t,n,i=this,r=i.element[0],a=r.tabIndex,o=i.wrapper,l=r.name||"";l&&(l='name="'+l+'_input" '),(t=o.find(".k-input"))[0]||(o.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><input '+l+'class="k-input" type="text" autocomplete="off"/><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(i.element),t=o.find(".k-input")),(n=t[0]).tabIndex=a,n.style.cssText=r.style.cssText,r.maxLength>-1&&(n.maxLength=r.maxLength),t.addClass(r.className).val(r.value).css({width:"100%",height:r.style.height}).show(),s&&t.attr("placeholder",i.options.placeholder),i._focused=i.input=t,i._arrow=o.find(".k-icon"),i._inputWrapper=e(o[0].firstChild)},_keydown:function(e){var t=this,n=e.keyCode,i=t.input;t._last=n,clearTimeout(t._typing),n==d.TAB?(t.text(i.val()),"filter"===t._state&&t.selectedIndex>-1&&(t._state="accept")):t._move(e)||t._search()},_placeholder:function(e){if(!s){var t,n=this,i=n.input,r=n.options.placeholder;if(r){if(t=n.value(),void 0===e&&(e=!t),i.toggleClass("k-readonly",e),!e){if(t)return;r=""}i.val(r)}}},_search:function(){var e=this;e._typing=setTimeout(function(){var t=e.text();e._prev!==t&&(e._prev=t,e.search(t))},e.options.delay)},_select:function(e){var t,n,i=this,r=i._highlight(e),a=i._data();i.selectedIndex=r,-1!==r&&(i._current.addClass("k-state-selected"),a=a[r],t=i._text(a),n=i._value(a),i._prev=i.input[0].value=t,i._accessor(void 0!==n?n:t,r),i._placeholder())},_selectItem:function(){var e=this,t=e.options,n=e.dataSource.filter()||{};l(n,e.options.dataTextField),e.dataSource.one("change",function(){var n=t.value||e.value();n?e.value(n):e.select(t.index),e.trigger("selected")}).filter(n)},_wrapper:function(){var e,t=this,n=t.element;(e=n.parent()).is("span.k-widget")||(e=n.hide().wrap("<span />").parent()),e[0].style.cssText=n[0].style.cssText,t.wrapper=e.addClass("k-widget k-combobox k-header").addClass(n[0].className).show()}});i.plugin(p)}(jQuery),function(e,t){function n(e){return(e=String.prototype.trim?e.trim():e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")).replace(/&nbsp;/gi,"")}var i=window.kendo,r=i.ui,a=e.proxy,o=e.extend,s=e.grep,l=e.map,d=e.inArray,c="k-state-selected",u="kendoPopup",p="kendoMenu",f=r.Widget,h=f.extend({init:function(t,n){var r,o=this;f.fn.init.call(o,t,n),t=o.element,n=o.options,o.owner=n.owner,o.field=t.attr(i.attr("field")),(r=t.find(".k-header-column-menu"))[0]||(r=t.prepend('<a class="k-header-column-menu" href="#"><span class="k-icon k-i-arrowhead-s"/></a>').find(".k-header-column-menu")),o._clickHandler=a(o._click,o),r.click(o._clickHandler),o.link=r,o.wrapper=e('<div class="k-column-menu"/>'),o.wrapper.html(i.template(g)({ns:i.ns,messages:n.messages,sortable:n.sortable,filterable:n.filterable,columns:o._ownerColumns(),showColumns:n.columns})),o.popup=o.wrapper[u]({anchor:r,open:a(o._open,o)}).data(u),o._menu(),o._sort(),o._columns(),o._filter()},options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",columns:"Columns"},columns:!0,sortable:!0,filterable:!0},destroy:function(){var e=this;e.filterMenu&&(e.filterMenu.destroy(),e.filterMenu=null),e.wrapper.children().removeData(p),e.wrapper.removeData(u).remove(),e.link.unbind("click",e._clickHandler),e.element.removeData("kendoColumnMenu"),e.columns=null},close:function(){this.menu.close(),this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup.toggle()},_open:function(){e(".k-column-menu").not(this.wrapper).each(function(){e(this).data(u).close()})},_ownerColumns:function(){var e=this.owner.columns,t=s(e,function(e){var t=!0,i=n(e.title||"");return!1!==e.menu&&(e.field||i.length)||(t=!1),t});return l(t,function(t){return{field:t.field,title:t.title||t.field,hidden:t.hidden,index:d(t,e)}})},_menu:function(){this.menu=this.wrapper.children()[p]({orientation:"vertical",closeOnClick:!1}).data(p)},_sort:function(){var t=this;t.options.sortable&&(t.refresh(),t.options.dataSource.bind("change",a(t.refresh,t)),t.menu.element.delegate(".k-sort-asc, .k-sort-desc","click",function(){var n=e(this),i=n.hasClass("k-sort-asc")?"asc":"desc";n.parent().find(".k-sort-"+("asc"==i?"desc":"asc")).removeClass(c),t._sortDataSource(n,i),t.close()}))},_sortDataSource:function(e,t){var n,i,r=this,a=r.options.sortable,o=r.options.dataSource,s=o.sort()||[];if(e.hasClass(c)&&a&&!1!==a.allowUnsort?(e.removeClass(c),t=void 0):e.addClass(c),!0===a||"single"===a.mode)s=[{field:r.field,dir:t}];else{for(n=0,i=s.length;n<i;n++)if(s[n].field===r.field){s.splice(n,1);break}s.push({field:r.field,dir:t})}o.sort(s)},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t.owner.bind(["columnHide","columnShow"],function(){t._updateColumnsMenu()}),t.wrapper.delegate("[type=checkbox]","change",function(n){var r=e(this),a=parseInt(r.attr(i.attr("index")),10);r.is(":checked")?t.owner.showColumn(a):t.owner.hideColumn(a)}))},_updateColumnsMenu:function(){var e=this._ownerColumns(),t=l(e,function(e){return"["+i.attr("index")+"="+e.index+"]"}).join(","),n=s(e,function(e){return!e.hidden}),r=l(n,function(e){return"["+i.attr("index")+"="+e.index+"]"}).join(",");this.wrapper.find(t).attr("checked",!1),this.wrapper.find(r).attr("checked",!0).attr("disabled",1==n.length)},_filter:function(){var e=this,t=e.options;!1!==t.filterable&&(e.filterMenu=e.wrapper.find(".k-filterable").kendoFilterMenu(o(!0,{},{appendToElement:!0,dataSource:t.dataSource,values:t.values,field:e.field},t.filterable)).data("kendoFilterMenu"))},refresh:function(){var e,t,n,i=this,r=i.options.dataSource.sort()||[],a=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(c),t=0,n=r.length;t<n;t++)a==(e=r[t]).field&&i.wrapper.find(".k-sort-"+e.dir).addClass(c)}}),g='<ul>#if(sortable){#<li class="k-item k-sort-asc"><span class="k-link"><span class="k-sprite k-i-sort-asc"></span>${messages.sortAscending}</span></li><li class="k-item k-sort-desc"><span class="k-link"><span class="k-sprite k-i-sort-desc"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator"></li>#}##}##if(showColumns){#<li class="k-item k-columns-item"><span class="k-link"><span class="k-sprite k-i-columns"></span>${messages.columns}</span><ul>#for (var col in columns) {#<li><label><input type="checkbox" data-#=ns#field="#=columns[col].field#" data-#=ns#index="#=columns[col].index#"/>#=columns[col].title#</label></li>#}#</ul></li>#if(filterable){#<li class="k-separator"></li>#}##}##if(filterable){#<li class="k-item k-filter-item"><span class="k-link"><span class="k-sprite k-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#}#</ul>';r.plugin(h)}(jQuery),function(e,t){function n(e){return new Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===O)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t){var n=0;return e("> .k-grouping-header, > .k-grid-toolbar",t).each(function(){n+=this.offsetHeight}),n}function a(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function o(e){var t,n,i={},r={};if(!A(e))for(T(e)||(e=[e]),t=0,n=e.length;t<n;t++)i[e[t].aggregate]=0,r[e[t].field]=i;return r}function s(e,t,n){var i=e.eq(t),r=e.eq(n);i[t>n?"insertBefore":"insertAfter"](r)}function l(e,t,n){var i,r,a,o;for(i=0,r=(n=T(n)?n:[n]).length;i<r;i++)a=n[i],w(a)&&a.click&&(o=a.name||a.text,t.on(M,"a.k-grid-"+o,{commandName:o},F(a.click,e)))}function d(e){return C(e,function(e){return!e.hidden})}function c(e){var t=(e=e||{}).style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"))===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1")):t="display:none",y({},e,{style:t})}function u(e){var t=(e=e||{}).style;return t&&(e.style=t.replace(/((.*)?)(display\s*:\s*none)\s*;?/i,"$1")),e}function p(t,n,i,r){var a,o=t.find(">colgroup"),s=x(n,function(e){return a=e.width,a&&0!==parseInt(a,10)?h.format('<col style="width:{0}"/>',typeof a===O?a:a+"px"):"<col />"});(i||o.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),o.length&&o.remove(),o=e("<colgroup/>").append(e(new Array(r+1).join('<col class="k-group-col">')+s.join(""))),t.prepend(o)}function f(e,t){var n,i,r;if(typeof e===O&&e===t)return e;if(w(e)&&e.name===t)return e;if(T(e))for(n=0,i=e.length;n<i;n++)if(typeof(r=e[n])===O&&r===t||r.name===t)return r;return null}var h=window.kendo,g=h.ui,m=h.data.DataSource,v=g.Groupable,k=h.support.tbodyInnerHtml,b=g.Widget,_=h.keys,w=e.isPlainObject,y=e.extend,x=e.map,C=e.grep,T=e.isArray,S=e.inArray,F=e.proxy,D=e.isFunction,A=e.isEmptyObject,H=Math,I="tbody>tr:not(.k-grouping-row,.k-detail-row,.k-group-footer):visible",E=":not(.k-group-cell,.k-hierarchy-cell):visible",z=I+">td"+E,N=z+":first",R="k-state-focused",M="click",O="string",P=/(\}|\#)/gi,L=/#/gi,B=b.extend({init:function(e,t){var n=this;b.fn.init.call(n,e,t),n._refreshHandler=F(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind("change",t._refreshHandler),t.dataSource=e,t.dataSource.bind("change",t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop},wrap:function(){var t=this,n=h.support.scrollbar()+1,i=t.element;i.css({width:"auto",paddingRight:n,overflow:"hidden"}),t.content=i.children().first(),t.wrapper=t.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll",F(t._wheelScroll,t)).bind("mousewheel",F(t._wheelScroll,t)),h.support.touch&&(t.drag=new h.Drag(t.wrapper,{global:!0,move:function(e){t.verticalScrollbar.scrollTop(t.verticalScrollbar.scrollTop()-e.y.delta),e.preventDefault()}})),t.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:n}).appendTo(i).bind("scroll",F(t._scroll,t))},_wheelScroll:function(t){var n,i=this,r=i.verticalScrollbar.scrollTop(),a=t.originalEvent;t.preventDefault(),a.wheelDelta?n=a.wheelDelta:a.detail?n=10*-a.detail:e.browser.opera&&(n=-a.wheelDelta),i.verticalScrollbar.scrollTop(r+-n)},_scroll:function(e){var t=this,n=e.currentTarget.scrollTop,i=t.dataSource,r=t.itemHeight,a=i.skip()||0,o=t._rangeStart||a,s=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>n),d=H.max(H.floor(n/r),0),c=H.max(d+H.floor(s/r),0);t._scrollTop=n-o*r,t._scrollbarTop=n,t._fetch(d,c,l)||(t.wrapper[0].scrollTop=t._scrollTop)},_fetch:function(e,t,n){var i=this,r=i.dataSource,a=i.itemHeight,o=r.take(),s=i._rangeStart||r.skip()||0,l=H.floor(e/o)*o,d=!1;return e<s?(d=!0,s=H.max(0,t-o),i._scrollTop=(e-s)*a,i._page(s,o)):t>=s+o&&!n?(d=!0,s=e,i._scrollTop=a,i._page(s,o)):i._fetching||(e<l+o-.33*o&&e>o&&r.prefetch(l-o,o),t>l+.33*o&&r.prefetch(l+o,o)),d},_page:function(e,t){var n=this,i=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,i.inRange(e,t)?i.range(e,t):(h.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){i.range(e,t)},100))},refresh:function(){var e,t,n,i=this,r="",a=i.dataSource,o=i._rangeStart,s=h.support.scrollbar(),l=i.wrapper[0];h.ui.progress(i.wrapper.parent(),!1),clearTimeout(i._timeout),n=i.itemHeight=i.options.itemHeight()||0;var d=l.scrollWidth>l.offsetWidth?s:0;for(e=a.total()*n+d,t=0;t<H.floor(e/25e4);t++)r+='<div style="width:1px;height:250000px"></div>';e%25e4&&(r+='<div style="width:1px;height:'+e%25e4+'px"></div>'),i.verticalScrollbar.html(r),l.scrollTop=i._scrollTop,i.drag&&i.drag.cancel(),o&&!i._fetching&&(i._rangeStart=a.skip()),i._fetching=!1}}),q={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"}},W=b.extend({init:function(t,n){var i=this;(n=T(n)?{dataSource:n}:n).allexcel&&(n.allexcel=e.extend({cssClass:"k-i-expand"},n.allexcel),n.toolbar=e.merge([{name:"export",template:h.format("<a class='k-button k-button-icontext k-grid-exportAll' title='Export All to Excel'><div class='{0}'></div></a>",n.allexcel.cssClass)}],n.toolbar||[])),n.excel&&(n.excel=e.extend({cssClass:"k-i-expand"},n.excel),n.toolbar=e.merge([{name:"export",template:h.format("<a class='k-button k-button-icontext k-grid-export' title='Export to Excel'><div class='{0}'></div></a>",n.excel.cssClass)}],n.toolbar||[])),b.fn.init.call(i,t,n),i._element(),void 0!=n.dataSource.parentValue&&i.element.attr("id","div__"+n.dataSource.parentValue),i._columns(i.options.columns),i._dataSource(),i._tbody(),i._pageable(),i._thead(),i._groupable(),i._toolbar(),i._setContentHeight(),i._templates(),i._navigatable(),i._selectable(),i._details(),i._editable(),i._attachCustomCommandsEvent(),i.options.autoBind&&i.dataSource.fetch(),h.notify(i)},events:["change","dataBinding","dataBound","detailExpand","detailCollapse","detailInit","edit","save","remove","saveChanges","columnResize","columnReorder","columnShow","columnHide"],setDataSource:function(e){var t=this;t.options.dataSource=e,t._dataSource(),t._pageable(),t.options.groupable&&t._groupable(),t._thead(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!0,scrollable:!0,sortable:!1,selectable:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,parentValue:"",storedparentValue:"",whereCondition:"",AddSlashInColumn:"",ExcludeColumnsFromExcel:""},setOptions:function(e){var t=this;b.fn.setOptions.call(this,e),t._templates()},items:function(){return this.tbody.children(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=i.columns||[];for(t=0,n=r.length;t<n;t++)(e=r[t].command)&&l(i,i.wrapper,e)},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table")).length||(n=e("<table />").appendTo(t.element)),t.table=n.attr("cellspacing",0),t._wrapper()},_positionColumnResizeHandle:function(t){var n,i=this,o=i.options.scrollable,s=i.resizeHandle;i.thead.on("mousemove","th:not(.k-group-cell,.k-hierarchy-cell)",function(l){var d=e(this),c=d.offset().left+this.offsetWidth;l.clientX>c-3&&l.clientX<c+3?(a(i.wrapper,d.css("cursor")),s||(s=i.resizeHandle=e('<div class="k-resize-handle"/>'),t.append(s)),n=this.offsetWidth,d.prevAll().each(function(){n+=this.offsetWidth}),s.css({top:o?0:r(i.wrapper),left:n-3,height:d.outerHeight(),width:9}).data("th",d).show()):(a(i.wrapper,""),s&&s.hide())})},_resizable:function(){var t,n,i,r,o,s=this,l=s.options;l.resizable&&(t=l.scrollable?s.wrapper.find(".k-grid-header-wrap"):s.wrapper,s._positionColumnResizeHandle(t),t.kendoResizable({handle:".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+s.tbody.attr("clientHeight")})},start:function(t){var d=e(t.currentTarget).data("th"),c=e.inArray(d[0],d.parent().children(":visible")),u=s.tbody.parent(),p=s.footer||e();a(s.wrapper,d.css("cursor")),o=l.scrollable?s.thead.parent().find("col:eq("+c+")").add(u.children("colgroup").find("col:eq("+c+")")).add(p.find("colgroup").find("col:eq("+c+")")):u.children("colgroup").find("col:eq("+c+")"),n=t.x.location,i=d.outerWidth(),r=s.tbody.outerWidth()},resize:function(t){var a=i+t.x.location-n,d=s.footer||e();a>10&&(o.css("width",a),l.scrollable&&(s._footerWidth=r+t.x.location-n,s.tbody.parent().add(s.thead.parent()).add(d.find("table")).css("width",s._footerWidth)))},resizeend:function(t){var n,r=e(t.currentTarget).data("th"),o=r.outerWidth();a(s.wrapper,""),i!=o&&((n=s.columns[r.parent().find("th:not(.k-group-cell,.k-hierarchy-cell)").index(r)]).width=o,s.trigger("columnResize",{column:n,oldWidth:i,newWidth:o})),s.resizeHandle.hide()}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance=t.thead.kendoDraggable({group:h.guid(),filter:".k-header:not(.k-group-cell,.k-hierarchy-cell):visible["+h.attr("field")+"]",hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(h.attr("title"))||t.attr(h.attr("field"))).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var e=this;e.options.reorderable&&e.thead.kendoReorderable({draggable:e._draggableInstance,change:function(t){var n=d(e.columns)[t.oldIndex];e.trigger("columnReorder",{newIndex:t.newIndex,oldIndex:t.oldIndex,column:n}),e.reorderColumn(t.newIndex,n)}})},reorderColumn:function(t,n){var i,r,a,o=this,l=e.inArray(n,o.columns),c=e.inArray(n,d(o.columns)),u=o.footer||o.wrapper.find(".k-grid-footer");if(l!==t)for(o.columns.splice(l,1),o.columns.splice(t,0,n),o._templates(),s(o.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),c,t),o.options.scrollable&&s(o.tbody.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),c,t),s(o.thead.find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),l,t),u&&u.length&&(s(u.find(".k-grid-footer-wrap>table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),c,t),s(u.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),l,t)),r=0,a=(i=o.tbody.children(":not(.k-grouping-row,.k-detail-row)")).length;r<a;r+=1)s(i.eq(r).find(">td:not(.k-group-cell,.k-hierarchy-cell)"),l,t)},cellIndex:function(t){return e(t).parent().find("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)},_modelForContainer:function(t){(!(t=e(t)).is("tr")&&"popup"!==this._editMode()||"true"==t.attr("cellEditable"))&&(t=t.closest("tr"));var n=t.attr(h.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t=this,n=t.options.editable,i=function(){var n=document.activeElement,i=t._editContainer;!i||e.contains(i[0],n)||i[0]===n||e(n).closest(".k-animation-container").length||t.editable.end()&&t.closeCell()};n&&("incell"===t._editMode()?!1!==n.update&&(t.wrapper.delegate("tr:not(.k-grouping-row) > td:not(.k-hierarchy-cell,.k-detail-cell,.k-group-cell,:has(a.k-grid-delete))",M,function(n){var i=e(this);if(void 0!=i.attr("editMode")){if(i.closest("tbody")[0]!==t.tbody[0]||e(n.target).is(":input"))return;t.editable?t.editable.end()&&(t.closeCell(),t.editCell(i)):t.editCell(i)}}),t.wrapper.bind("focusin",function(e){clearTimeout(t.timer),t.timer=null}),t.wrapper.bind("focusout",function(e){t.timer=setTimeout(i,1)})):!1!==n.update&&t.wrapper.delegate("tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",M,function(n){n.preventDefault(),t.editRow(e(this).closest("tr"))}),!1!==n.destroy&&t.wrapper.delegate("tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-delete",M,function(n){n.preventDefault(),t.removeRow(e(this).closest("tr"))}))},editCell:function(e){var t=this,n=t.columns[t.cellIndex(e)],i=t._modelForContainer(e);i&&(!i.editable||i.editable(n.field))&&!n.command&&n.field&&n.celleditable&&(t._attachModelChange(i),t._editContainer=e,t.editable=e.addClass("k-edit-cell").kendoEditable({fields:{field:n.field,format:n.format,editor:n.editor,values:n.values},model:i,change:function(n){t.trigger("save",{values:n.values,container:e,model:i})&&n.preventDefault()}}).data("kendoEditable"),1!=n.defaulteditable?e.parent().addClass("k-grid-edit-row"):e.parent().removeClass("k-grid-edit-row"),t.trigger("edit",{container:e,model:i}))},_destroyEditable:function(){var e=this;e.editable&&(e._detachModelChange(),e.editable.destroy(),delete e.editable,"popup"===e._editMode()&&void 0!=e._editContainer.data("kendoWindow")&&null!=e._editContainer.data("kendoWindow")&&e._editContainer.data("kendoWindow").close(),e._editContainer=null)},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind("change",e._modelChangeHandler)},closeCell:function(){var t=this,n=t._editContainer.removeClass("k-edit-cell"),i=n.closest("tr").attr(h.attr("uid")),r=t.columns[t.cellIndex(n)],a=t.dataSource.getByUid(i);1!=r.defaulteditable?(n.parent().removeClass("k-grid-edit-row"),t._destroyEditable(),t._displayCell(n,r,a),n.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(n)):(n.parent().removeClass("k-grid-edit-row"),n.addClass("k-edit-cell"))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},a=y({},h.Template,i.options.templateSettings),o=h.template(i._cellTmpl(t,r),a);r.count>0&&(o=F(o,r.storage)),e.empty().html(o(n))},removeRow:function(t){var n,i,r=this;r._confirmation()&&(t=e(t).hide(),(n=r._modelForContainer(t))&&!r.trigger("remove",{row:t,model:n})&&(r.dataSource.remove(n),"inline"!==(i=r._editMode())&&"popup"!==i||r.dataSource.sync()))},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var n,i=this,r=i._modelForContainer(t),a=i._editMode();i.cancelRow(),r&&(i._attachModelChange(r),"popup"===a?i._createPopupEditor(r):"inline"===a?i._createInlineEditor(t,r):"incell"===a&&e(t).children(E).each(function(){var t=e(this),n=i.columns[t.index()];if((r=i._modelForContainer(t))&&(!r.editable||r.editable(n.field))&&n.field)return i.editCell(t),!1}),(n=i._editContainer).delegate("a.k-grid-cancel",M,function(e){e.preventDefault(),i.cancelRow()}),n.delegate("a.k-grid-update",M,function(e){e.preventDefault(),i.saveRow()}))},_createPopupEditor:function(t){var n,i,r,a,o,s,l,d,c=this,u="<div "+h.attr("uid")+'="'+t.uid+'"><div class="k-edit-form-container">',p=[],g=c.options.editable,m=w(g)?g.window:{},v=y({},h.Template,c.options.templateSettings);if(g.template)for(u+=h.template(window.unescape(g.template),v)(t),r=0,a=c.columns.length;r<a;r++)(n=c.columns[r]).command&&(i=f(n.command,"edit"));else for(r=0,a=c.columns.length;r<a;r++)if((n=c.columns[r]).command)n.command&&(i=f(n.command,"edit"));else if(u+='<div class="k-edit-label"><label for="'+n.field+'">'+(n.title||n.field||"")+"</label></div>",t.editable&&!t.editable(n.field)||!n.field){var k={storage:{},count:0};o=h.template(c._cellTmpl(n,k),v),k.count>0&&(o=F(o,k.storage)),u+='<div class="k-edit-field">'+o(t)+"</div>"}else p.push({field:n.field,format:n.format,editor:n.editor,values:n.values}),u+="<div "+h.attr("container-for")+'="'+n.field+'" class="k-edit-field"></div>';i&&w(i)&&(i.text&&w(i.text)&&(s=i.text.update,l=i.text.cancel),i.attr&&(d=i.attr)),u+=c._createButton({name:"update",text:s,attr:d})+c._createButton({name:"canceledit",text:l,attr:d}),u+="</div></div>";var b=c._editContainer=e(u).appendTo(c.wrapper).eq(0).kendoWindow(y({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1},m)),_=b.data("kendoWindow");_.wrapper.delegate(".k-i-close","click",function(){c.cancelRow()}),c.editable=c._editContainer.kendoEditable({fields:p,model:t,clearContainer:!1}).data("kendoEditable"),_.center().open(),c.trigger("edit",{container:b,model:t})},_createInlineEditor:function(t,n){var i,r,a,o=this,s=[];t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),(i=o.columns[o.cellIndex(r)]).command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(a=f(i.command,"edit"))){r.empty();var t,l,d;w(a)&&(a.text&&w(a.text)&&(t=a.text.update,l=a.text.cancel),a.attr&&(d=a.attr)),e(o._createButton({name:"update",text:t,attr:d})+o._createButton({name:"canceledit",text:l,attr:d})).appendTo(r)}}else s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr("data-container-for",i.field),r.empty()}),o._editContainer=t,o.editable=t.addClass("k-grid-edit-row").kendoEditable({fields:s,model:n,clearContainer:!1}).data("kendoEditable"),o.trigger("edit",{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t.dataSource.cancelChanges(e),"popup"!==t._editMode()?t._displayRow(n):t._displayRow(t.items().filter("["+h.attr("uid")+"="+e.uid+"]")),t._destroyEditable())},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger("save",{container:t,model:n})&&("popup"!==e._editMode()&&e._displayRow(t),e._destroyEditable(),e.dataSource.sync())},_displayRow:function(t){var n=this,i=n._modelForContainer(t);i&&t.replaceWith(e((t.hasClass("k-alt")?n.altRowTemplate:n.rowTemplate)(i)))},_showMessage:function(e){return window.confirm(e)},_confirmation:function(){var e=this,t=e.options.editable,n=!0===t||typeof t===O?"Are you sure you want to delete this record?":t.confirmation;return!1===n||null==n||e._showMessage(n)},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger("saveChanges")&&e.dataSource.sync()},addRow:function(){var e,t=this,n=t.dataSource,i=t._editMode(),r=t.options.editable.createAt||"",a=n.pageSize(),o=n.view()||[];if(t.editable&&t.editable.end()||!t.editable){"incell"!=i&&t.cancelRow(),e=n.indexOf(o[0]),"bottom"==r.toLowerCase()&&(e+=o.length,a&&!n.options.serverPaging&&a<=o.length&&(e-=1)),e<0&&(e=0);var s=n.insert(e,{}).uid,l=t.table.find("tr["+h.attr("uid")+"="+s+"]"),d=l.children("td:not(.k-group-cell,.k-hierarchy-cell)").first();"inline"!==i&&"popup"!==i||!l.length?d.length&&t.editCell(d):t.editRow(l)}},_toolbar:function(){var t,n,i=this,r=i.wrapper,a=i.options.toolbar,o=i.options.editable;a&&((t=i.wrapper.find(".k-grid-toolbar")).length||(a=D(a)?a({}):typeof a===O?a:i._toolbarTmpl(a).replace(L,"\\#"),n=F(h.template(a),i),t=e('<div class="k-toolbar k-grid-toolbar" />').html(n({})).prependTo(r)),o&&!1!==o.create&&t.delegate(".k-grid-add",M,function(e){e.preventDefault(),i.addRow()}).delegate(".k-grid-cancel-changes",M,function(e){e.preventDefault(),i.cancelChanges()}).delegate(".k-grid-save-changes",M,function(e){e.preventDefault(),i.saveChanges()}),t.on(M,".k-grid-export",function(e){e.preventDefault(),i.exportToExcel(i)}),t.on(M,".k-grid-exportAll",function(e){e.preventDefault(),i.exportAllToExcel(i)}),t.on(M,".k-grid-pdf",function(e){e.preventDefault(),i.saveAsPDF()}))},exportToExcel:function(t){var n=t,i={title:n.options.excel.title,page:n.dataSource._page,pageSize:n.dataSource._pageSize,storedProcedure:n.dataSource.transport.options.read.storedProcedure,filter:n.dataSource._filter,sort:n.dataSource._sort,skip:n.dataSource._skip,take:n.dataSource._take};e.extend(i,n.dataSource.transport.options.read.data);var r;e.ajax({type:"POST",url:n.options.excel.createUrl,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i),success:function(e){r=e}}).done(function(e){var t="<html><body><table width='100%' cellspacing=0 border='1px'>",i=n.columns;if(i=i.filter(function(e){return"Action"!=e.title}),i=i.filter(function(e){return"true"!=e.hidden}),i=i.filter(function(e){return"Warning!!"!=e.title}),i=i.filter(function(e){return-1==e.template.indexOf("currentProcess")}),n.options.ExcludeColumnsFromExcel)for(var a=n.options.ExcludeColumnsFromExcel.split(","),o=0;o<a.length;o++)i=i.filter(function(e){return e.field!=a[o]});t+="<tr bgcolor='#7bd2f6'>";for(o=0;o<i.length;o++)t+="<td>"+i[o].title+"</td>";t+="</tr>";for(o=0;o<r.Data.length;o++){t+="<tr style='background-color:"+(o%2==0?"#EFF7FA":"#FFFFFF")+"'>";for(var s=0;s<i.length;s++){var l=r.Data[o][i[s].field]||"";if(n.options.AddSlashInColumns&&n.options.AddSlashInColumns==i[s].field&&(l="'"+l),""!=l&&isNaN(l)&&-1!=l.indexOf("/Date(")){var d=-1!=i[s].template.indexOf("HH:mm")?"dd-MMM-yyyy HH:mm":"dd-MMM-yyyy",c=new Date(parseInt(l.split("(")[1].split(")")[0]));l="'"+h.toString(new Date(c.getTime()+6e4*c.getTimezoneOffset()),d)}!("spReservation_GetList_AWB"!=r.StoredProcedure&&"spReservation_GetList"!=r.StoredProcedure||"BookingRefNo"!=i[s].field&&"AWBNo"!=i[s].field)?t+=""!=l?"<td>'"+l+"</td>":"<td>"+l+"</td>":t+="<td>"+l+"</td>"}t+="</tr>"}t+="</table></body></html>";var u=document.createElement("a");u.href="data:application/vnd.ms-excel, "+encodeURIComponent(t),u.download=n.options.excel.fileName+"_.xls",u.click()})},exportAllToExcel:function(t){var n=t,i={title:n.options.allexcel.title,page:1,pageSize:n.dataSource._total>3501?3500:n.dataSource._total,storedProcedure:n.dataSource.transport.options.read.storedProcedure,filter:n.dataSource._filter,sort:n.dataSource._sort};e.extend(i,n.dataSource.transport.options.read.data);var r;e.ajax({type:"POST",url:n.options.allexcel.createUrl,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i),success:function(e){r=e}}).done(function(e){var t="<html><body><table width='100%' cellspacing=0 border='1px'>",i=n.columns;if(i=i.filter(function(e){return"Action"!=e.title}),i=i.filter(function(e){return"true"!=e.hidden}),i=i.filter(function(e){return"Warning!!"!=e.title}),i=i.filter(function(e){return-1==e.template.indexOf("currentProcess")}),n.options.ExcludeColumnsFromExcel)for(var a=n.options.ExcludeColumnsFromExcel.split(","),o=0;o<a.length;o++)i=i.filter(function(e){return e.field!=a[o]});t+="<tr bgcolor='#7bd2f6'>";for(o=0;o<i.length;o++)t+="<td>"+i[o].title+"</td>";t+="</tr>";for(o=0;o<r.Data.length;o++){t+="<tr style='background-color:"+(o%2==0?"#EFF7FA":"#FFFFFF")+"'>";for(var s=0;s<i.length;s++){var l=r.Data[o][i[s].field]||"";if(n.options.AddSlashInColumns&&n.options.AddSlashInColumns==i[s].field&&(l="'"+l),""!=l&&isNaN(l)&&-1!=l.indexOf("/Date(")){var d=-1!=i[s].template.indexOf("HH:mm")?"dd-MMM-yyyy HH:mm":"dd-MMM-yyyy",c=new Date(parseInt(l.split("(")[1].split(")")[0]));l="'"+h.toString(new Date(c.getTime()+6e4*c.getTimezoneOffset()),d)}!("spReservation_GetList_AWB"!=r.StoredProcedure&&"spReservation_GetList"!=r.StoredProcedure||"BookingRefNo"!=i[s].field&&"AWBNo"!=i[s].field)?t+=""!=l?"<td>'"+l+"</td>":"<td>"+l+"</td>":t+="<td>"+l+"</td>"}t+="</tr>"}t+="</table></body></html>";var u=document.createElement("a");u.href="data:application/vnd.ms-excel, "+encodeURIComponent(t),u.download=n.options.allexcel.fileName+"_.xls",u.click()})},_toolbarTmpl:function(e){var t,n,i=this,r="";if(T(e))for(t=0,n=e.length;t<n;t++)r+=i._createButton(e[t]);return r},_createButton:function(e){var t=e.template||'<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',n=typeof e===O?e:e.name||e.text,r={className:"k-grid-"+n,text:n,imageClass:"",attr:"",iconClass:""};if(!(n||w(e)&&e.template))throw new Error("Custom commands should have name specified");return w(e)?(e.className&&(e.className+=" "+r.className),"edit"===n&&w(e.text)&&((e=y(!0,{},e)).text=e.text.edit),e.attr&&w(e.attr)&&(e.attr=i(e.attr)),r=y(!0,r,q[n],e)):r=y(!0,r,q[n]),h.template(t)(r)},_groupable:function(){var t=this,n=t.wrapper,i=t.options.groupable;t.groupable||t.table.delegate(".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",M,function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()}),i&&(n.has("div.k-grouping-header")[0]||e("<div />").addClass("k-grouping-header").html("&nbsp;").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new v(n,y({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,filter:".k-header:not(.k-group-cell,.k-hierarchy-cell):visible["+h.attr("field")+"]",allowDrag:t.options.reorderable})))},_selectable:function(){var e,t,n=this,i=n.options.selectable;i&&(e=typeof i===O&&i.toLowerCase().indexOf("multiple")>-1,t=typeof i===O&&i.toLowerCase().indexOf("cell")>-1,n.selectable=new h.ui.Selectable(n.table,{filter:">"+(t?"tbody>tr:not(.k-grouping-row,.k-detail-row,.k-group-footer) > td:not(.k-group-cell,.k-hierarchy-cell)":"tbody>tr:not(.k-grouping-row,.k-detail-row,.k-group-footer)"),multiple:e,change:function(){n.trigger("change")}}),n.options.navigatable&&n.wrapper.keydown(function(i){var r=n.current();i.keyCode!==_.SPACEBAR||i.target!=n.wrapper[0]||r.hasClass("k-edit-cell")||(i.preventDefault(),i.stopPropagation(),r=t?r:r.parent(),e&&i.ctrlKey?r.hasClass("k-state-selected")&&(r.removeClass("k-state-selected"),r=null):n.selectable.clear(),n.selectable.value(r))}))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger("change")},select:function(t){var n=this.selectable;return t=e(t),t.length?(n.options.multiple||(n.clear(),t=t.first()),void n.value(t)):n.value()},current:function(e){var t=this,n=t.options.scrollable,i=t._current;return void 0!==e&&e.length&&(i&&i[0]===e[0]||(e.addClass(R),i&&i.removeClass(R),t._current=e,e.length&&n&&(t._scrollTo(e.parent()[0],t.content[0]),n.virtual?t._scrollTo(e[0],t.content.find(">.k-virtual-scrollable-wrap")[0]):t._scrollTo(e[0],t.content[0])))),t._current},_scrollTo:function(e,t){var n="td"===e.tagName.toLowerCase(),i=e[n?"offsetLeft":"offsetTop"],r=e[n?"offsetWidth":"offsetHeight"],a=t[n?"scrollLeft":"scrollTop"],o=t[n?"clientWidth":"clientHeight"],s=i+r;t[n?"scrollLeft":"scrollTop"]=a>i?i:s>a+o?s-o:a},_navigatable:function(){var t=this,n=t.wrapper,i=t.table.addClass("k-focusable"),r=F(t.current,t),a=e.browser;t.options.navigatable&&(n.bind({focus:function(){var e=t._current;e&&e.is(":visible")?e.addClass(R):r(t.table.find(N))},focusout:function(e){t._current&&t._current.removeClass(R),e.stopPropagation()},keydown:function(o){var s,l,d=o.keyCode,c=t.current(),u=o.shiftKey,p=t.dataSource,f=t.options.pageable,h=!e(o.target).is(":button,a,:input,a>.t-icon"),g="incell"==t._editMode(),m=!1;h&&_.UP===d?(r(c?c.parent().prevAll(I).last().children(":eq("+c.index()+"),:eq(0)").last():i.find(N)),m=!0):h&&_.DOWN===d?(r(c?c.parent().nextAll(I).first().children(":eq("+c.index()+"),:eq(0)").last():i.find(N)),m=!0):h&&_.LEFT===d?(r(c?c.prevAll(E+":first"):i.find(N)),m=!0):h&&_.RIGHT===d?(r(c?c.nextAll(":visible:first"):i.find(N)),m=!0):h&&f&&_.PAGEDOWN==d?(t._current=null,p.page(p.page()+1),m=!0):h&&f&&_.PAGEUP==d?(t._current=null,p.page(p.page()-1),m=!0):t.options.editable&&(c=c||i.find(N),_.ENTER==d||_.F2==d?(t._handleEditing(c),m=!0):_.TAB==d&&g?((l=u?c.prevAll(E+":first"):c.nextAll(":visible:first")).length||(l=c.parent()[u?"prevAll":"nextAll"]("tr:not(.k-grouping-row,.k-detail-row):visible").children(E+(u?":last":":first"))),l.length&&(t._handleEditing(c,l),m=!0)):_.ESC==d&&t._editContainer&&(t._editContainer.has(c[0])||c[0]===t._editContainer[0])&&(g?t.closeCell():(s=t.items().index(c.parent()),document.activeElement.blur(),t.cancelRow(),s>=0&&t.current(t.items().eq(s).children().filter(E).first())),a.msie&&parseInt(a.version,10)<9&&document.body.focus(),n.focus(),m=!0)),m&&(o.preventDefault(),o.stopPropagation())}}),n.delegate(".k-focusable tbody>tr:not(.k-grouping-row,.k-detail-row,.k-group-footer):visible>td:not(.k-group-cell,.k-hierarchy-cell):visible","mousedown",function(i){var a=e(i.currentTarget);a.closest("tbody")[0]===t.tbody[0]&&(r(a),e(i.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,.k-input")||setTimeout(function(){n.focus()}),i.stopPropagation())}))},_handleEditing:function(t,n){var i,r,a=this,o=a._editMode(),s=a._editContainer;if(r="incell"==o?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),a.editable){if(e.contains(s[0],document.activeElement)&&e(document.activeElement).blur(),!a.editable.end())return"incell"==o?a.current(s):a.current(s.children().filter(E).first()),void s.find(":input:visible:first").focus();"incell"==o?a.closeCell():(i=t.parent()[0]===s[0]?a.items().index(t.parent()):a.items().index(s),a.saveRow(),a.current(a.items().eq(i).children().filter(E).first()),r=!0)}n&&a.current(n),a.wrapper.focus(),(!r&&!n||n)&&("incell"==o?a.editCell(a.current()):a.editRow(a.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget").attr("tabIndex",H.max(t.attr("tabIndex")||0,0)),t.removeAttr("tabIndex"),n&&(e.wrapper.css("height",n),t.css("height","auto"))},_tbody:function(){var t,n=this,i=n.table;(t=i.find(">tbody")).length||(t=e("<tbody/>").appendTo(i)),n.tbody=t},_scrollable:function(){var t,n,i=this,r=i.options.scrollable;h.support.scrollbar();if(r)if((t=i.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(i.table)),(n=e('<table cellspacing="0" />')).append(i.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),i.content=i.table.parent(),i.content.is(".k-virtual-scrollable-wrap")&&(i.content=i.content.parent()),i.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(i.content=i.table.wrap('<div class="k-grid-content" />').parent()),!0!==r&&r.virtual&&!i.virtualScrollable&&(i.virtualScrollable=new B(i.content,{dataSource:i.dataSource,itemHeight:F(i._averageRowHeight,i)})),i.scrollables=t.children(".k-grid-header-wrap"),r.virtual)i.content.find(">.k-virtual-scrollable-wrap").bind("scroll",function(){i.scrollables.scrollLeft(this.scrollLeft)});else{i.content.bind("scroll",function(){i.scrollables.scrollLeft(this.scrollLeft)});var a=h.touchScroller(i.content);a&&a.movable&&a.movable.bind("change",function(e){i.scrollables.scrollLeft(-e.sender.x)})}},_setContentHeight:function(){var e=this,t=e.options,n=e.wrapper.innerHeight(),i=e.wrapper.children(".k-grid-header"),r=h.support.scrollbar();if(t.scrollable){n-=i.outerHeight(),e.pager&&(n-=e.pager.element.outerHeight()),t.groupable&&(n-=e.wrapper.children(".k-grouping-header").outerHeight()),t.toolbar&&(n-=e.wrapper.children(".k-grid-toolbar").outerHeight()),e.footerTemplate&&(n-=e.wrapper.children(".k-grid-footer").outerHeight());(function(e){var t,n;return!!e[0].style.height||(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))})(e.wrapper)&&(n>2*r?e.content.height(n):e.content.height(2*r+1))}},_averageRowHeight:function(){var e=this,t=e._rowHeight;e._rowHeight||(e._rowHeight=t=e.table.outerHeight()/e.table[0].rows.length,e._sum=t,e._measures=1);var n=e.table.outerHeight()/e.table[0].rows.length;return t!==n&&(e._measures++,e._sum+=n,e._rowHeight=e._sum/e._measures),t},_dataSource:function(){var e,t=this,n=t.options,i=n.dataSource;i=T(i)?{data:i}:i,w(i)&&(y(i,{table:t.table,fields:t.columns}),e=n.pageable,w(e)&&void 0!==e.pageSize&&(i.pageSize=e.pageSize)),t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler).unbind("requestStart",t._requestStartHandler).unbind("error",t._errorHandler):(t._refreshHandler=F(t.refresh,t),t._requestStartHandler=F(t._requestStart,t),t._errorHandler=F(t._error,t)),t.dataSource=m.create(i).bind("change",t._refreshHandler).bind("requestStart",t._requestStartHandler).bind("error",t._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,a,o,s=this,l=t.model,d=s.tbody.find("tr["+h.attr("uid")+"="+l.uid+"]"),c=d.hasClass("k-alt");if(d.children(".k-edit-cell").length&&!s.options.rowTemplate)d.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){n=e(this),(i=s.columns[s.cellIndex(n)]).field===t.field&&(n.hasClass("k-edit-cell")?n.addClass("k-dirty-cell"):(s._displayCell(n,i,l),e('<span class="k-dirty"/>').prependTo(n)))});else if(!d.hasClass("k-grid-edit-row")){for(r=e((c?s.altRowTemplate:s.rowTemplate)(l)),d.replaceWith(r),a=0,o=s.columns.length;a<o;a++)(i=s.columns[a]).field===t.field&&(n=r.children(":not(.k-group-cell,.k-hierarchy-cell)").eq(a),e('<span class="k-dirty"/>').prependTo(n));s.trigger("itemChange",{item:r,data:l,ns:g})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&((t=n.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),"object"==typeof i&&i instanceof h.ui.Pager?n.pager=i:n.pager=new h.ui.Pager(t,y({},i,{dataSource:n.dataSource}),n.options.filterable))},_footer:function(){var t,n=this,i=n.dataSource.aggregates(),r="",a=n.footerTemplate,s=n.options;if(a){if(i=A(i)?o(n.dataSource.aggregate()):i,r=e(n._wrapFooter(a(i))),(t=n.footer||n.wrapper.find(".k-grid-footer")).length){var l=r;t.replaceWith(l),n.footer=l}else s.scrollable?n.footer=s.pageable?r.insertBefore(n.wrapper.children("div.k-grid-pager")):r.appendTo(n.wrapper):n.footer=r.insertBefore(n.tbody);if(s.scrollable){var d=!1;n.scrollables.each(function(){e(this).hasClass("k-grid-footer-wrap")&&(d=!0)}),d||(n.scrollables=n.scrollables.add(n.footer.children(".k-grid-footer-wrap")))}s.resizable&&n._footerWidth&&n.footer.find("table").css("width",n._footerWidth)}},_wrapFooter:function(t){var n=this,i="";return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table cellspacing="0"><tbody>'+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var t,n,i,r,a,o,s=this,l=s.columns,d=s.options,c=d.columnMenu;c&&("boolean"==typeof c&&(c={}),s.thead.find("th:not(.k-hierarchy-cell,.k-group-cell)").each(function(u){n=l[u],o=e(this),n.command||!n.field&&!o.attr("data-"+h.ns+"field")||((t=o.data("kendoColumnMenu"))&&t.destroy(),r=!1!==n.sortable&&!1!==c.sortable&&d.sortable,a=!(!d.filterable||!1===n.filterable||!1===c.filterable)&&y({},n.filterable,d.filterable),i={dataSource:s.dataSource,values:n.values,columns:c.columns,sortable:r,filterable:a,messages:c.messages,owner:s},o.kendoColumnMenu(i))}))},_filterable:function(){var t,n,i=this,r=i.columns,a=i.options.filterable;a&&!i.options.columnMenu&&i.thead.find("th:not(.k-hierarchy-cell,.k-group-cell)").each(function(o){t=e(this),!1===r[o].filterable||r[o].command||!r[o].field&&!t.attr("data-"+h.ns+"field")||((n=t.data("kendoFilterMenu"))&&n.destroy(),t.kendoFilterMenu(y(!0,{},a,r[o].filterable,{dataSource:i.dataSource,values:r[o].values})))})},_sortable:function(){var t,n=this,i=n.columns,r=n.options.sortable;r&&n.thead.find("th:not(.k-hierarchy-cell,.k-group-cell)").each(function(a){!1!==(t=i[a]).sortable&&!t.command&&t.field&&e(this).attr("data-"+h.ns+"field",t.field).kendoSortable(y({},r,{dataSource:n.dataSource}))})},_columns:function(t){var n,i=this,r=i.table,a=r.find("col"),o=i.options.dataSource;t=t.length?t:x(r.find("th"),function(t,n){var i=(t=e(t)).attr(h.attr("sortable")),r=t.attr(h.attr("filterable")),o=t.attr(h.attr("type")),s=t.attr(h.attr("groupable")),l=t.attr(h.attr("field")),d=t.attr(h.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:o,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==s,menu:d,template:t.attr(h.attr("template")),width:a.eq(n).css("width")}}),n=!(i.table.find("tbody tr").length>0&&(!o||!o.transport)),i.columns=x(t,function(e){return(e=typeof e===O?{field:e}:e).hidden&&(e.attributes=c(e.attributes),e.footerAttributes=c(e.footerAttributes),e.headerAttributes=c(e.headerAttributes)),y({encoded:n},e)})},_tmpl:function(e,t){var r,a,o=this,s=y({},h.Template,o.options.templateSettings),l=o.columns.length,d={storage:{},count:0},c=o._hasDetails(),u=[],p=o.dataSource.group().length;if(!e){for(e="<tr",t&&u.push("k-alt"),c&&u.push("k-master-row"),u.length&&(e+=' class="'+u.join(" ")+'"'),l&&(e+=" "+h.attr("uid")+'="#=uid#"'),e+=">",p>0&&(e+=n(p)),c&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#"></a></td>'),r=0;r<l;r++){typeof(a=o.columns[r]).template;var f=!1;void 0!=a.celleditable&&(f=a.celleditable);var g=!1;void 0!=a.defaulteditable&&(g=a.defaulteditable),e+="<td "+(void 0!=a.field?"data-column='"+a.field+"'":"")+" "+i(a.attributes)+"cellEditable="+f+" editMode="+g+">",e+=o._cellTmpl(a,d),e+="</td>"}e+="</tr>"}return e=h.template(e,s),d.count>0?F(e,d.storage):e},_headerCellText:function(e){var t=this,n=y({},h.Template,t.options.templateSettings),i=e.headerTemplate,r=typeof i,a=e.title||e.field||"";return"function"===r?a=h.template(i,n)({}):r===O&&(a=i),a},_cellTmpl:function(e,t){var n,i,r=this,a=y({},h.Template,r.options.templateSettings),o=e.template,s=a.paramName,l="",d=e.format,c=typeof o,u=e.values;if(e.command){if(T(e.command)){for(n=0,i=e.command.length;n<i;n++)l+=r._createButton(e.command[n]);return l.replace(L,"\\#")}return r._createButton(e.command).replace(L,"\\#")}return"function"===c?(t.storage["tmpl"+t.count]=o,l+="#=this.tmpl"+t.count+"("+s+")#",t.count++):c===O?l+=o:u&&u.length&&w(u[0])&&"value"in u[0]?(l+="#var v ="+h.stringify(u)+"#",l+="#for (var idx=0,length=v.length;idx<length;idx++) {#",l+="#if (v[idx].value == ",a.useWithBlock||(l+=s+"."),l+=e.field,l+=") { #",l+="${v[idx].text}",l+="#break;#",l+="#}#",l+="#}#"):(l+=e.encoded?"${":"#=",d&&(l+='kendo.format("'+d.replace(P,"\\$1")+'",'),a.useWithBlock||(l+=s+"."),l+=e.field,d&&(l+=")"),l+=e.encoded?"}":"#"),e.showAction&&(l='<a class="k-button k-button-icontext k-grid-View Details" onclick="showoptionbutton(\''+l+'\')" href="javascript:void(0);">'+l+"</a>"),l},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),a=i.aggregate();t.rowTemplate=t._tmpl(n.rowTemplate),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,!0),t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),A(a)&&!C(t.columns,function(e){return e.footerTemplate}).length||(t.footerTemplate=t._footerTmpl(a,"footerTemplate","k-footer-template")),r.length&&C(t.columns,function(e){return e.groupFooterTemplate}).length&&(a=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(a,"groupFooterTemplate","k-group-footer"))},_footerTmpl:function(e,t,r){var a,s,l,d,c,u=this,p=y({},h.Template,u.options.templateSettings),f=p.paramName,g="",m=u.columns,v={},k=0,b={},_=u.dataSource.group().length,w=o(e);for(g+='<tr class="'+r+'">',_>0&&(g+=n(_)),u._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),a=0,s=u.columns.length;a<s;a++)d=typeof(l=(c=m[a])[t]),g+="<td"+i(c.footerAttributes)+">",l?("function"!==d&&(b=w[c.field]?y({},p,{paramName:f+"."+c.field}):{},l=h.template(l,b)),v["tmpl"+k]=l,g+="#=this.tmpl"+k+"("+f+")#",k++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=h.template(g,p),k>0?F(g,v):g},_detailTmpl:function(e){var t=this,i="",r=y({},h.Template,t.options.templateSettings),a=r.paramName,o={},s=0,l=t.dataSource.group().length,c=d(t.columns).length,u=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">","function"===u?(o["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+a+")#",s++):i+=e,i+="</td></tr>",i=h.template(i,r),s>0?F(i,o):i},_hasDetails:function(){var e=this;return void 0!==e.options.detailTemplate||(e._events.detailInit||[]).length},_details:function(){var t=this;t.table.delegate(".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",M,function(n){if(t.options.accordion){var i=e(this).closest("tr").index();e(this).closest("table").find("tr.k-master-row").find("a.k-minus").each(function(){var n=e(this).closest("tr").index();if(i!=n){var r,a,o=e(this),s=o.hasClass("k-plus"),l=o.closest("tr.k-master-row"),d=t.detailTemplate,c=t._hasDetails();o.toggleClass("k-plus",!s).toggleClass("k-minus",s),r=l.next(),a=t.dataItem(l),c&&!r.hasClass("k-detail-row")&&(r=e(d(a)).addClass(l.hasClass("k-alt")?"k-alt":"").insertAfter(l),t.angular("compile",function(){return{elements:r.get(),data:[{dataItem:a}]}}),t.trigger("detailInit",{masterRow:l,detailRow:r,data:a,detailCell:r.find(".k-detail-cell")})),t.trigger(s?"detailExpand":"detailCollapse",{masterRow:l,detailRow:r,data:a}),r.toggle(s),t._current&&t._current.attr("aria-expanded",s)}})}var r,a,o=e(this),s=o.hasClass("k-plus"),l=o.closest("tr.k-master-row"),d=t.detailTemplate,c=t._hasDetails();return o.toggleClass("k-plus",!s).toggleClass("k-minus",s),r=l.next(),a=t.dataItem(l),c&&!r.hasClass("k-detail-row")&&(r=e(d(a)).addClass(l.hasClass("k-alt")?"k-alt":"").insertAfter(l),t.trigger("detailInit",{masterRow:l,detailRow:r,data:a,detailCell:r.find(".k-detail-cell")})),t.trigger(s?"detailExpand":"detailCollapse",{masterRow:l,detailRow:r,data:a}),r.toggle(s),s?(t.options.expandedRowText=l[0].innerText,t.options.parentValue=t.options.storedparentValue):(t.options.expandedRowText="",t.options.parentValue=""),t._current&&t._current.attr("aria-expanded",s),n.preventDefault(),!1})},dataItem:function(t){return this._data[this.tbody.find("> tr:not(.k-grouping-row,.k-detail-row,.k-group-footer)").index(e(t))]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_thead:function(){var t,n,r,a,o,s=this,l=s.columns,d=s._hasDetails()&&l.length,c="",u=s.table.find(">thead");if(u.length||(u=e("<thead/>").insertBefore(s.tbody)),(r=s.element.find("tr:has(th):first")).length||(r=u.children().first()).length||(r=e("<tr/>")),r.children().length)d&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');else{for(d&&(c+='<th class="k-hierarchy-cell">&nbsp;</th>'),t=0,n=l.length;t<n;t++)o=l[t],a=s._headerCellText(o),o.command?c+="<th"+i(o.headerAttributes)+">"+a+"</th>":(c+="<th "+h.attr("field")+"='"+(o.field||"")+"' ",o.title&&(c+=h.attr("title")+'="'+o.title.replace(/'/g,"'")+'" '),void 0!==o.groupable&&(c+=h.attr("groupable")+"='"+o.groupable+"' "),o.aggregates&&(c+=h.attr("aggregates")+"='"+o.aggregates+"'"),c+=i(o.headerAttributes),c+=">"+a+"</th>");r.html(c)}r.find("th").addClass("k-header"),s.options.scrollable||u.addClass("k-grid-header"),r.appendTo(u),s.thead=u,s._sortable(),s._filterable(),s._scrollable(),s._updateCols(),s._resizable(),s._draggable(),s._reorderable(),s._columnMenu()},_updateCols:function(){var e=this;e._appendCols(e.thead.parent().add(e.table))},_appendCols:function(e){var t=this;p(e,d(t.columns),t._hasDetails(),t.dataSource.group().length)},_autoColumns:function(e){if(e&&e.toJSON){var t,n=this;e=e.toJSON();for(t in e)n.columns.push({field:t});n._thead(),n._templates()}},_rowsHtml:function(e){var t,n,i=this,r="",a=i.rowTemplate,o=i.altRowTemplate;for(t=0,n=e.length;t<n;t++)r+=t%2?o(e[t]):a(e[t]),i._data.push(e[t]);return r},_groupRowHtml:function(e,t,i){var r,a,o=this,s="",l=e.field,d=C(o.columns,function(e){return e.field==l})[0]||{},c=d.format?h.format(d.format,e.value):e.value,u=d.groupHeaderTemplate,p=(d.title||l)+": "+c,f=y({},{field:e.field,value:e.value},e.aggregates[e.field]),g=e.items;if(u&&(p="function"==typeof u?u(f):h.template(u)(f)),s+='<tr class="k-grouping-row">'+n(i)+'<td colspan="'+t+'"><p class="k-reset"><a class="k-icon k-i-collapse" href="#"></a>'+p+"</p></td></tr>",e.hasSubgroups)for(r=0,a=g.length;r<a;r++)s+=o._groupRowHtml(g[r],t-1,i+1);else s+=o._rowsHtml(g);return o.groupFooterTemplate&&(s+=o.groupFooterTemplate(e.aggregates)),s},collapseGroup:function(t){var n,i,r=(t=e(t).find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse").end()).find(".k-group-cell").length,a=1;t.nextAll("tr").each(function(){if(i=e(this),n=i.find(".k-group-cell").length,i.hasClass("k-grouping-row")?a++:i.hasClass("k-group-footer")&&a--,n<=r||i.hasClass("k-group-footer")&&a<0)return!1;i.hide()})},expandGroup:function(t){var n,i,r=this,a=(t=e(t).find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand").end()).find(".k-group-cell").length,o=1;t.nextAll("tr").each(function(){if(n=e(this),(i=n.find(".k-group-cell").length)<=a)return!1;i!=a+1||n.hasClass("k-detail-row")||(n.show(),n.hasClass("k-grouping-row")&&n.find(".k-icon").hasClass("k-i-collapse")&&r.expandGroup(n),n.hasClass("k-master-row")&&n.find(".k-icon").hasClass("k-minus")&&n.next().show()),n.hasClass("k-grouping-row")&&o++,n.hasClass("k-group-footer")&&(1==o?n.show():o--)})},_updateHeader:function(t){var n=this,i=n.thead.find("th.k-group-cell"),r=i.length;t>r?e(new Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(n.thead.find("tr")):t<r&&(r-=t,e(C(i,function(e,t){return r>t})).remove())},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},hideColumn:function(t){var n,i,r,a,o,s,l,u,p=this,f=0,h=p.footer||p.wrapper.find(".k-grid-footer"),g=p.columns;if((t="number"==typeof t?g[t]:C(g,function(e){return e.field===t})[0])&&!t.hidden){for(u=S(t,d(g)),t.hidden=!0,t.attributes=c(t.attributes),t.footerAttributes=c(t.footerAttributes),t.headerAttributes=c(t.headerAttributes),p._templates(),p._updateCols(),p.thead.find(">tr>th:not(.k-hierarchy-cell,.k-group-cell):visible").eq(u).hide(),h&&(p._appendCols(h.find("table:first")),h.find(".k-footer-template>td:not(.k-hierarchy-cell,.k-group-cell):visible").eq(u).hide()),a=0,l=(n=p.tbody.children()).length;a<l;a+=1)(i=n.eq(a)).is(".k-grouping-row,.k-detail-row")?(r=i.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(r.attr("colspan"),10)-1):(i.hasClass("k-grid-edit-row")&&(r=i.children(".k-edit-container")[0])&&((r=e(r)).attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(u).remove(),i=r.find("tr:first")),i.children(":not(.k-group-cell,.k-hierarchy-cell):visible").eq(u).hide());for(a=0,l=(o=p.thead.prev().find("col")).length;a<l;a+=1){if(!(s=o[a].style.width)||-1!=s.indexOf("%")){f=0;break}f+=parseInt(s,10)}f&&e(">.k-grid-header table:first,>.k-grid-footer table:first",p.wrapper).add(p.table).width(f),p.trigger("columnHide",{column:t})}},showColumn:function(t){var n,i,r,a,o,s,l,c,f,h,g=this,m=g.columns,v=g.footer||g.wrapper.find(".k-grid-footer");if((t="number"==typeof t?m[t]:C(m,function(e){return e.field===t})[0])&&t.hidden){for(h=S(t,m),t.hidden=!1,t.attributes=u(t.attributes),t.footerAttributes=u(t.footerAttributes),t.headerAttributes=u(t.headerAttributes),g._templates(),g._updateCols(),g.thead.find(">tr>th:not(.k-hierarchy-cell,.k-group-cell)").eq(h).show(),v&&(g._appendCols(v.find("table:first")),v.find(".k-footer-template>td:not(.k-hierarchy-cell,.k-group-cell)").eq(h).show()),i=0,r=(n=g.tbody.children()).length;i<r;i+=1)(a=n.eq(i)).is(".k-grouping-row,.k-detail-row")?(o=a.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(o.attr("colspan"),10)+1):(a.hasClass("k-grid-edit-row")&&(o=a.children(".k-edit-container")[0])&&((o=e(o)).attr("colspan",parseInt(o.attr("colspan"),10)+1),p(o.find(">form>table"),d(m),!1,0),a=o.find("tr:first")),a.children(":not(.k-group-cell,.k-hierarchy-cell)").eq(h).show());if(s=e(">.k-grid-header table:first,>.k-grid-footer table:first",g.wrapper).add(g.table),t.width){for(l=0,i=0,r=(f=g.thead.prev().find("col")).length;i<r;i+=1){if((c=f[i].style.width).indexOf("%")>-1){l=0;break}l+=parseInt(c,10)}l&&s.width(l)}else s.width("");g.trigger("columnShow",{column:t})}},_progress:function(e){var t=this,n=t.element.is("table")?t.element.parent():t.content&&t.content.length?t.content:t.element;h.ui.progress(n,e)},refresh:function(t){var n,i,r,a,o,s=this,l="",c=s.dataSource.view(),u=s.current(),p=(s.dataSource.group()||[]).length,f=p+d(s.columns).length;if(!t||"itemchange"!==t.action||!s.editable){if(s.trigger("dataBinding"),u&&u.hasClass("k-state-focused")&&(o=s.items().index(u.parent())),s._destroyEditable(),s._progress(!1),s._data=[],s.columns.length||(s._autoColumns(s._firstDataItem(c[0],p)),f=p+s.columns.length),s._group=p>0||s._group,s._group&&(s._templates(),s._updateCols(),s._updateHeader(p),s._group=p>0),p>0)for(s.detailTemplate&&f++,i=0,n=c.length;i<n;i++)l+=s._groupRowHtml(c[i],f,0);else l+=s._rowsHtml(c);k?s.tbody[0].innerHTML=l:((a=document.createElement("div")).innerHTML="<table><tbody>"+l+"</tbody></table>",r=a.firstChild.firstChild,s.table[0].replaceChild(r,s.tbody[0]),s.tbody=e(r)),s._footer(),s._setContentHeight(),o>=0&&s.current(s.items().eq(o).children().filter(E).first()),s.trigger("dataBound"),e(s.table).find("tr:not(.k-grouping-row) > td").each(function(){var n=e(this);if("true"==n.attr("editMode")){if(n.closest("tbody")[0]!==s.tbody[0]||e(t.target).is(":input"))return;s.editable?s.editable.end()&&(s.closeCell(),s.editCell(n)):s.editCell(n)}})}}});g.plugin(W),g.plugin(B)}(jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=n.keys,a="k-state-focused",o=e.proxy,s=n.ui.progress,l=n.data.DataSource,d=i.extend({init:function(t,r){var a=this;r=e.isArray(r)?{dataSource:r}:r,i.fn.init.call(a,t,r),r=a.options,a.wrapper=a.element,a._element(),a._dataSource(),a.template=n.template(r.template||""),a.altTemplate=n.template(r.altTemplate||r.template),a.editTemplate=n.template(r.editTemplate||""),a._navigatable(),a._selectable(),a._pageable(),a._crudHandlers(),a.options.autoBind&&a.dataSource.fetch(),n.notify(a)},events:["change","dataBinding","dataBound","edit","remove","save"],options:{name:"ListView",autoBind:!0,selectable:!1,navigatable:!1,template:"",altTemplate:"",editTemplate:""},items:function(){return this.element.find(">*")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e.dataSource.unbind("change",e._refreshHandler).unbind("requestStart",e._requestStartHandler).unbind("error",e._errorHandler):(e._refreshHandler=o(e.refresh,e),e._requestStartHandler=o(e._requestStart,e),e._errorHandler=o(e._error,e)),e.dataSource=l.create(e.options.dataSource).bind("change",e._refreshHandler).bind("requestStart",e._requestStartHandler).bind("error",e._errorHandler)},_requestStart:function(){s(this.element,!0)},_error:function(){s(this.element,!1)},_element:function(){this.element.addClass("k-widget k-listview")},refresh:function(t){var i,r,a,o,s,l=this,d=l.dataSource.view(),c="",u=l.template,p=l.altTemplate;if(t&&"itemchange"===t.action)l.editable||(i=t.items[0],(o=d.indexOf(i))>=0&&(a=e(u(i)),l.items().eq(o).replaceWith(a),l.trigger("itemChange",{item:a,data:i})));else{for(l.trigger("dataBinding"),l._destroyEditable(),o=0,s=d.length;o<s;o++)c+=o%2?p(d[o]):u(d[o]);for(l.element.html(c),r=l.items(),o=0,s=d.length;o<s;o++)r.eq(o).attr(n.attr("uid"),d[o].uid);l.trigger("dataBound")}},_pageable:function(){var t,n,i=this,r=i.options.pageable;e.isPlainObject(r)&&(n=r.pagerId,t=e.extend({},r,{dataSource:i.dataSource,pagerId:null}),e("#"+n).kendoPager(t))},_selectable:function(){var e,t,i=this,a=i.options.selectable,o=i.options.navigatable;a&&(e="string"==typeof a&&a.toLowerCase().indexOf("multiple")>-1,i.selectable=new n.ui.Selectable(i.element,{multiple:e,filter:">*",change:function(){i.trigger("change")}}),o&&i.element.keydown(function(n){n.keyCode===r.SPACEBAR&&(t=i.current(),n.preventDefault(),e&&n.ctrlKey?t.hasClass("k-state-selected")&&(t.removeClass("k-state-selected"),t=null):i.selectable.clear(),i.selectable.value(t))}))},current:function(e){var t=this,n=t._current;return void 0!==e&&e.length&&(n&&n[0]===e[0]||(e.addClass(a),n&&n.removeClass(a),t._current=e)),t._current},_navigatable:function(){var t=this,n=t.options.navigatable,i=t.element,s=o(t.current,t);n&&(i.attr("tabIndex",Math.max(i.attr("tabIndex")||0,0)),i.bind({focus:function(){var e=t._current;e&&e.is(":visible")?e.addClass(a):s(i.find(">*").first())},focusout:function(){t._current&&t._current.removeClass(a)},keydown:function(e){var n=e.keyCode,a=t.current();r.UP===n?t.current(a?a.prev():i.find(">*").first()):r.DOWN===n?t.current(a?a.next():i.find(">*").first()):r.PAGEUP==n?(t._current=null,t.dataSource.page(t.dataSource.page()-1)):r.PAGEDOWN==n&&(t._current=null,t.dataSource.page(t.dataSource.page()+1))}}),i.addClass("k-focusable").delegate(".k-focusable>*","mousedown",function(t){s(e(t.currentTarget)),e(t.target).is(":button,a,:input,a>.k-icon,textarea")||i.focus()}))},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger("change")},select:function(t){var n=this.selectable;return t=e(t),t.length?(n.options.multiple||(n.clear(),t=t.first()),void n.value(t)):n.value()},_destroyEditable:function(){var e=this;e.editable&&(e.editable.destroy(),delete e.editable)},_modelFromElement:function(e){var t=e.attr(n.attr("uid"));return this.dataSource.getByUid(t)},_closeEditable:function(t){var i,r,a=this,o=a.editable,s=!0;return o&&(t&&(s=o.end()),s&&(i=a._modelFromElement(o.element),r=e(a.template(i)).attr(n.attr("uid"),i.uid),a._destroyEditable(),o.element.replaceWith(r))),s},edit:function(t){var i=this,r=i._modelFromElement(t),a=e(i.editTemplate(r)).addClass("k-edit-item");i.cancel(),a.attr(n.attr("uid"),r.uid),t.replaceWith(a),i.editable=a.kendoEditable({model:r,clearContainer:!1,errorTemplate:!1}).data("kendoEditable"),i.trigger("edit",{model:r,item:a})},save:function(){var e=this,t=e.editable.element,n=e._modelFromElement(t);!e.trigger("save",{model:n,item:t})&&e._closeEditable(!0)&&e.dataSource.sync()},remove:function(e){var t=this,n=t.dataSource,i=t._modelFromElement(e);t.trigger("remove",{model:i,item:e})||(e.hide(),n.remove(i),n.sync())},add:function(){var e=this,t=e.dataSource,n=t.indexOf((t.view()||[])[0]);n<0&&(n=0),e.cancel(),t.insert(n,{}),e.edit(e.element.children().first())},cancel:function(){var e=this,t=e.dataSource;e.editable&&(t.cancelChanges(e._modelFromElement(e.editable.element)),e._closeEditable(!1))},_crudHandlers:function(){var t=this;t.element.on("click",".k-edit-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.edit(r),i.preventDefault()}),t.element.on("click",".k-delete-button",function(i){var r=e(this).closest("["+n.attr("uid")+"]");t.remove(r),i.preventDefault()}),t.element.on("click",".k-update-button",function(e){t.save(),e.preventDefault()}),t.element.on("click",".k-cancel-button",function(e){t.cancel(),e.preventDefault()})}});n.ui.plugin(d)}(jQuery),function(e,t){var n=window.kendo,i=n.Class,r=n.ui.Widget,a=n.support.mobileOS,o=e.extend,s=n.deepExtend,l=n.keys,d=i.extend({init:function(e){this.options=e},getHtml:function(){var e=this.options;return n.template(e.template)({cssClass:e.cssClass,tooltip:e.title,initialValue:e.initialValue})}}),c={select:function(e){e.trigger("select",{})},editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header"><tbody><tr><td class="k-editor-toolbar-wrap"><ul class="k-editor-toolbar"></ul></td></tr><tr><td class="k-editable-area"></td></tr></tbody></table>',buttonTemplate:'<li class="k-editor-button"><a href="" class="k-tool-icon #= cssClass #" unselectable="on" title="#= tooltip #">#= tooltip #</a></li>',colorPickerTemplate:'<li class="k-editor-colorpicker"><div class="k-widget k-colorpicker k-header #= cssClass #"><span class="k-tool-icon"><span class="k-selected-color"></span></span><span class="k-icon k-i-arrow-s"></span></div></li>',comboBoxTemplate:'<li class="k-editor-combobox"><select title="#= tooltip #" class="#= cssClass #"></select></li>',dropDownListTemplate:'<li class="k-editor-selectbox"><select title="#= tooltip #" class="#= cssClass #"></select></li>',focusable:".k-colorpicker,a.k-tool-icon:not(.k-state-disabled),.k-selectbox, .k-combobox .k-input",wrapTextarea:function(t){var n=t.width(),i=t.height(),r=c.editorWrapperTemplate,a=e(r).insertBefore(t).width(n).height(i).find(".k-editable-area");return t.appendTo(a).addClass("k-content k-raw-content").hide(),t.closest(".k-editor")},renderTools:function(t,i){var r,a,s,l,d,u={},p=t._nativeTools,f=e(t.element).closest(".k-editor").find(".k-editor-toolbar");if(i)for(s=0;s<i.length;s++)r=i[s],e.isPlainObject(r)?r.name&&t.tools[r.name]?(e.extend(t.tools[r.name].options,r),u[r.name]=t.tools[r.name],d=u[r.name].options):((d=o({cssClass:"k-i-custom",type:"button",tooltip:""},r)).name&&(d.cssClass="k-"+("custom"==d.name?"i-custom":d.name)),d.template||"button"==d.type&&(d.template=c.buttonTemplate)):t.tools[r]&&(u[r]=t.tools[r],d=u[r].options),d&&(l=d.template)&&(l.getHtml?l=l.getHtml():(e.isFunction(l)||(l=n.template(l)),l=l(d)),0!==l.indexOf("<li")&&(l="<li class='k-editor-template'>"+l+"</li>"),a=e(l).appendTo(f),"button"==d.type&&d.exec&&a.find(".k-tool-icon").click(e.proxy(d.exec,t.element[0])));for(s=0;s<p.length;s++)u[p[s]]||(u[p[s]]=t.tools[p[s]]);t.options.tools=u},decorateStyleToolItems:function(t){var i=t.data.closest(".k-editor").find(".k-style").data("kendoSelectBox");if(i){var r=i.dataSource.view();i.list.find(".k-item").each(function(i,a){var o=e(a),s=o.text(),l=n.ui.editor.Dom.inlineStyle(t.data.data("kendoEditor").document,"span",{className:r[i].value});o.html('<span unselectable="on" style="display:block;'+l+'">'+s+"</span>")})}},createContentElement:function(t,n){var i,r,a,o=t.closest(".k-rtl").length?"direction:rtl;":"";return t.hide(),i=e("<iframe />",{src:'javascript:"<html></html>"',frameBorder:"0"}).css("display","").addClass("k-content").insertBefore(t)[0],r=i.contentWindow||i,n.length>0&&e(i).one("load",t,c.decorateStyleToolItems),a=r.document||i.contentDocument,a.designMode="On",a.open(),a.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;font-family:Verdana,Geneva,sans-serif;background:#fff;}html{font-size:100%}body{font-size:.75em;line-height:1.5;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+o+"}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}ul,ol{padding-left:2.5em}a{color:#00a}code{font-size:1.23em}</style>"+e.map(n,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body></body></html>"),a.close(),r},initializeContentElement:function(t){var n=!0;t.window=c.createContentElement(e(t.textarea),t.options.stylesheets),t.document=t.window.contentDocument||t.window.document,t.body=t.document.body,e(t.document).bind({keydown:function(e){if(e.keyCode===l.F10)return setTimeout(function(){var e=t.wrapper,n=e.attr("tabIndex");e.attr("tabIndex",n||0).focus().find("li:has("+p+")").first().focus(),n||0===n||e.removeAttr("tabIndex")},100),void e.preventDefault();var i=t.keyboard.toolFromShortcut(t.options.tools,e);if(i)return e.preventDefault(),/undo|redo/.test(i)||t.keyboard.endTyping(!0),t.exec(i),!1;if(t.keyboard.isTypingKey(e)&&t.pendingFormats.hasPending())if(n)n=!1;else{var r=t.getRange();t.pendingFormats.apply(r),t.selectRange(r)}t.keyboard.clearTimeout(),t.keyboard.keydown(e)},keyup:function(i){var r=[8,9,33,34,35,36,37,38,39,40,40,45,46];if((e.inArray(i.keyCode,r)>-1||65==i.keyCode&&i.ctrlKey&&!i.altKey&&!i.shiftKey)&&(t.pendingFormats.clear(),u(t)),t.keyboard.isTypingKey(i)){if(t.pendingFormats.hasPending()){var a=t.getRange();t.pendingFormats.apply(a),t.selectRange(a)}}else n=!0;t.keyboard.keyup(i)},mousedown:function(n){t.pendingFormats.clear();var i=e(n.target);!e.browser.gecko&&2==n.which&&i.is("a[href]")&&window.open(i.attr("href"),"_new")},mouseup:function(){u(t)}}),e(t.window).bind("blur",function(){var e=t.textarea.value,n=t.encodedValue();t.update(),n!=e&&t.trigger("change")}),e(t.body).bind("cut paste",function(e){t.clipboard["on"+e.type](e)})},formatByName:function(t,n){for(var i=0;i<n.length;i++)if(e.inArray(t,n[i].tags)>=0)return n[i]},registerTool:function(e,t){var n=k.fn._tools;n[e]=t,n[e].options&&n[e].options.template&&(n[e].options.template.options.cssClass="k-"+e)},registerFormat:function(e,t){n.ui.Editor.fn.options.formats[e]=t}},u=c.select,p=c.focusable,f=c.wrapTextarea,h=c.renderTools,g=c.initializeContentElement,m={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertHtml:"Insert HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found."},v=!a||a.ios&&a.flatVersion>=500||!a.ios&&void 0!==document.documentElement.contentEditable,k=r.extend({init:function(t,i){function a(t){var n=e.grep(t.className.split(" "),function(e){return!/^k-(widget|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)});return n[0]?n[0].substring(n[0].lastIndexOf("-")+1):"custom"}function o(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+=t.key+")"}if(v){var d,c,u=this,k=n.ui.editor;r.fn.init.call(u,t,i),u.tools=s({},n.ui.Editor.fn._tools),u.options=s({},u.options,i),(t=e(t)).closest("form").bind("submit",function(){u.update()});for(var b in u.tools)u.tools[b].name=b.toLowerCase();u.textarea=t.attr("autocomplete","off")[0],d=u.wrapper=f(t),h(u,u.options.tools),g(u),u.keyboard=new k.Keyboard([new k.TypingHandler(u),new k.SystemHandler(u)]),u.clipboard=new k.Clipboard(this),u.pendingFormats=new k.PendingFormats(this),u.undoRedoStack=new k.UndoRedoStack,c=i&&i.value?i.value:t.val().replace(/[\r\n\v\f\t ]+/gi," "),u.value(c);var _=".k-editor-toolbar > li > *, .k-editor-toolbar > li select",w=".k-editor-button .k-tool-icon",y=w+":not(.k-state-disabled)";d.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),i=t.keyCode;i==l.RIGHT||i==l.LEFT?n.close():i==l.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),d.delegate(y,"mouseenter",function(){e(this).addClass("k-state-hover")}).delegate(y,"mouseleave",function(){e(this).removeClass("k-state-hover")}).delegate(w,"mousedown",!1).delegate(p,"keydown",function(t){var n,i=e(this).closest("li"),r="li:has("+p+")",a=t.keyCode;if(a==l.RIGHT)n=i.nextAll(r).first().find(p);else if(a==l.LEFT)n=i.prevAll(r).last().find(p);else if(a==l.ESC)n=u;else if(a==l.TAB&&!t.ctrlKey&&!t.altKey)if(t.shiftKey){if(!(n=i.prevAll(r).last().find(p)).length)return;t.preventDefault()}else t.preventDefault(),(n=i.nextAll(r).first().find(p)).length||(n=u);n&&n.focus()}).delegate(y,"click",function(e){e.preventDefault(),e.stopPropagation(),u.exec(a(this))}).delegate(".k-editor-button .k-tool-icon.k-state-disabled","click",function(e){e.preventDefault()}).find(_).each(function(){var t=a(this),n=u.options,i=n.tools[t],r=n.messages[t],s=e(this);if(i){if("fontSize"==t||"fontName"==t){var l=n.messages[t+"Inherit"]||m[t+"Inherit"];s.find("input").val(l).end().find("span.k-input").text(l).end()}i.initialize(s,{title:o(r,i),editor:u})}}),u.bind("select",function(){var t=u.getRange(),n=k.RangeUtils.textNodes(t);n.length||(n=[t.startContainer]),d.find(_).each(function(){var t=u.options.tools[a(this)];t&&t.update(e(this),n,u.pendingFormats)})}),e(document).bind("DOMNodeInserted",function(t){var n=u.wrapper;(e.contains(t.target,n[0])||n[0]==t.target)&&(u.textarea.value=u.value(),n.find("iframe").remove(),g(u))}).bind("mousedown",function(e){try{u.keyboard.isTypingInProgress()&&u.keyboard.endTyping(!0),u.selectionRestorePoint||(u.selectionRestorePoint=new k.RestorePoint(u.getRange()))}catch(e){}}),n.notify(u)}},events:["select","change","execute","error","paste"],options:{name:"Editor",messages:m,formats:{},encoded:!0,stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:["bold","italic","underline","strikethrough","fontName","fontSize","foreColor","backColor","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","formatBlock","createLink","unlink","insertImage"]},_nativeTools:["insertLineBreak","insertParagraph","redo","undo","insertHtml"],_tools:{undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},tools:{},value:function(t){var i=this.body,r=n.ui.editor.Dom;if(void 0===t)return n.ui.editor.Serializer.domToXhtml(i);if(this.pendingFormats.clear(),t=(t||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"\x3c!--[CDATA[$1]]--\x3e").replace(/<script([^>]*)>(.*)?<\/script>/gi,"<telerik:script $1>$2</telerik:script>").replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/gi,"$1"),e.browser.msie||(t=t.replace(/<p([^>]*)>(\s*)?<\/p>/gi,'<p $1><br _moz_dirty="" /></p>')),e.browser.msie&&parseInt(e.browser.version,10)<9){t=(t=(t="<br/>"+t).replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,'originalhref="$1"')).replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,'originalsrc="$1"'),i.innerHTML=t,r.remove(i.firstChild),e(i).find("telerik\\:script,script,link,img,a").each(function(){var e=this;e.originalhref&&(e.setAttribute("href",e.originalhref),e.removeAttribute("originalhref")),e.originalsrc&&(e.setAttribute("src",e.originalsrc),e.removeAttribute("originalsrc"))})}else i.innerHTML=t,e.browser.msie&&r.normalize(i);this.selectionRestorePoint=null,this.update()},focus:function(){this.window.focus()},update:function(e){this.textarea.value=e||this.options.encoded?this.encodedValue():this.value()},encodedValue:function(){return n.ui.editor.Dom.encode(this.value())},createRange:function(e){return n.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return n.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this.focus();var t=this.getSelection();t.removeAllRanges(),t.addRange(e)},getRange:function(){var e=this.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer!=n||t.endContainer!=n||t.startOffset||t.endOffset||(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return n.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e){this.clipboard.paste(e)},exec:function(t,n){var i,r,a,s=this,l="";t=t.toLowerCase(),s.keyboard.isTypingInProgress()||(s.focus(),i=s.getRange(),s.document.body);for(r in s.options.tools)if(r.toLowerCase()==t){l=s.options.tools[r];break}if(l){if(i=s.getRange(),!/undo|redo/i.test(t)&&l.willDelayExecution(i))return a=e.extend({},l),e.extend(a.options,{params:n}),s.pendingFormats.toggle(a),void u(s);var d=l.command?l.command(o({range:i},n)):null;if(s.trigger("execute",{name:t,command:d}),/undo|redo/i.test(t))s.undoRedoStack[t]();else if(d&&(d.managesUndoRedo||s.undoRedoStack.push(d),d.editor=s,d.exec(),d.async))return void(d.change=e.proxy(function(){u(s)},s));u(s)}}});n.ui.plugin(k);var b=i.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title})},command:function(e){return new this.options.command(e)},update:function(){},willDelayExecution:function(){return!1}});b.exec=function(e,t,n){e.exec(t,{value:n})};var _=b.extend({init:function(e){b.fn.init.call(this,e)},command:function(e){var t=this;return new n.ui.editor.FormatCommand(o(e,{formatter:t.options.formatter}))},update:function(e,t,n){var i=n.isPending(this.name),r=this.options.finder.isFormatted(t),a=i?!r:r;e.toggleClass("k-state-active",a)}});o(n.ui,{editor:{ToolTemplate:d,EditorUtils:c,Tool:b,FormatTool:_}})}(jQuery),function(e){function t(e){var t,n,i={};for(t=0,n=e.length;t<n;t++)i[e[t]]=!0;return i}var n=window.kendo,i=e.map,r=e.extend,a=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),o="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,pre,script,table,tbody,td,tfoot,th,thead,tr,ul".split(","),s=t(o),l="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var".split(","),d=t(l),c=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),u=function(e){1==e.nodeType&&e.normalize()};e.browser.msie&&parseInt(e.browser.version,10)>=8&&(u=function(e){if(1==e.nodeType&&e.firstChild)for(var t=e.firstChild,n=t;;){if(!(n=n.nextSibling))break;3==n.nodeType&&3==t.nodeType&&(n.nodeValue=t.nodeValue+n.nodeValue,_.remove(t)),t=n}});var p=/^\s+$/,f=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,h=/&/g,g=/</g,m=/>/g,v=/\u00a0/g,k=/\ufeff/g,b="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),_={findNodeIndex:function(e){for(var t=0;;){if(!(e=e.previousSibling))break;t++}return t},isDataNode:function(e){return e&&null!==e.nodeValue&&null!==e.data},isAncestorOf:function(t,n){try{return!_.isDataNode(t)&&(e.contains(t,_.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(e){return!1}},isAncestorOrSelf:function(e,t){return _.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(_.isAncestorOf(e,t))for(;t&&t.parentNode!=e;)t=t.parentNode;return t},getNodeLength:function(e){return _.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){var n=e.cloneNode(!1);e.deleteData(t,e.length),n.deleteData(0,t),_.insertAfter(n,e)},attrEquals:function(t,n){for(var i in n){var r=t[i];if("float"==i&&(r=t[e.support.cssFloat?"cssFloat":"styleFloat"]),"object"==typeof r){if(!_.attrEquals(r,n[i]))return!1}else if(r!=n[i])return!1}return!0},blockParentOrBody:function(e){return _.parentOfType(e,o)||e.ownerDocument.body},blockParents:function(t){var n,i,r=[];for(n=0,i=t.length;n<i;n++){var a=_.parentOfType(t[n],_.blockElements);a&&e.inArray(a,r)<0&&r.push(a)}return r},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:u,blockElements:o,inlineElements:l,empty:a,fillAttrs:c,toHex:function(e){var t=f.exec(e);return t?"#"+i(t.slice(1),function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}).join(""):e},encode:function(e){return e.replace(h,"&amp;").replace(g,"&lt;").replace(m,"&gt;").replace(v,"&nbsp;")},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return 3!=e.nodeType||!_.isWhitespace(e)})},lastTextNode:function(e){var t=null;if(3==e.nodeType)return e;for(var n=e.lastChild;n;n=n.previousSibling)if(t=_.lastTextNode(n))return t;return t},is:function(e,t){return _.name(e)==t},isMarker:function(e){return"k-marker"==e.className},isWhitespace:function(e){return p.test(e.nodeValue)},isBlock:function(e){return s[_.name(e)]},isEmpty:function(e){return a[_.name(e)]},isInline:function(e){return d[_.name(e)]},scrollTo:function(t){t.ownerDocument.body.scrollTop=e(_.isDataNode(t)?t.parentNode:t).offset().top},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},trim:function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];_.isDataNode(n)?(n.nodeValue.replace(k,"").length||_.remove(n),_.isWhitespace(n)&&_.insertBefore(n,e)):"k-marker"!=n.className&&(_.trim(n),n.childNodes.length||_.isEmpty(n)||_.remove(n))}return e},parentOfType:function(e,t){do{e=e.parentNode}while(e&&!_.ofType(e,t));return e},ofType:function(t,n){return e.inArray(_.name(t),n)>=0},changeTag:function(e,t){var n,i,r,a,o,s=_.create(e.ownerDocument,t),l=e.attributes;for(n=0,i=l.length;n<i;n++)(o=l[n]).specified&&(r=o.nodeName,a=o.nodeValue,"class"==r?s.className=a:"style"==r?s.style.cssText=e.style.cssText:s.setAttribute(r,a));for(;e.firstChild;)s.appendChild(e.firstChild);return _.insertBefore(s,e),_.remove(e),s},wrap:function(e,t){return _.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return _.attr(e.createElement(t),n)},attr:function(e,t){return(t=r({},t))&&"style"in t&&(_.style(e,t.style),delete t.style),r(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(t,n){for(var i in n)"float"==i&&(i=e.support.cssFloat?"cssFloat":"styleFloat"),t.style[i]="";""===t.style.cssText&&t.removeAttribute("style")},inlineStyle:function(t,n,r){var a,o=e(_.create(t,n,r));return t.body.appendChild(o[0]),a=i(b,function(t){return e.browser.msie&&"line-height"==t&&"1px"==o.css(t)?"line-height:1.5":t+":"+o.css(t)}).join(";"),o.remove(),a},removeClass:function(t,n){var i,r,a=" "+t.className+" ",o=n.split(" ");for(i=0,r=o.length;i<r;i++)a=a.replace(" "+o[i]+" "," ");(a=e.trim(a)).length?t.className=a:t.removeAttribute("class")},commonAncestor:function(){var e,t,n,i,r,a=arguments.length,o=[],s=1/0,l=null;if(!a)return null;if(1==a)return arguments[0];for(e=0;e<a;e++){for(t=[],n=arguments[e];n;)t.push(n),n=n.parentNode;o.push(t.reverse()),s=Math.min(s,t.length)}if(1==a)return o[0][0];for(e=0;e<s;e++){for(i=o[0][e],r=1;r<a;r++)if(i!=o[r][e])return l;l=i}return l}};n.ui.editor.Dom=_}(jQuery),function(e,t){var n=window.kendo.ui.editor,i=n.Dom,r=e.extend,a="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),o=/"/g,s=/<br[^>]*>/i,l=/<p><\/p>/i;r(n,{Serializer:{domToXhtml:function(n){function r(n){var r,a,s,l=[],d=n.attributes,c=e.trim;if(i.is(n,"img")){var p=n.style.width,f=n.style.height,h=e(n);p&&(h.attr("width",parseInt(p,10)),i.unstyle(n,{width:t})),f&&(h.attr("height",parseInt(f,10)),i.unstyle(n,{height:t}))}for(a=0,s=d.length;a<s;a++){var g=(r=d[a]).nodeName;(r.specified||"value"==g&&!n.value||"type"==g&&"text"==r.nodeValue)&&g.indexOf("_moz")<0&&"complete"!=g&&"altHtml"!=g&&l.push(r)}if(l.length)for(l.sort(function(e,t){return e.nodeName>t.nodeName?1:e.nodeName<t.nodeName?-1:0}),a=0,s=l.length;a<s;a++){var m=(r=l[a]).nodeName,v=r.nodeValue;if(u.push(" "),u.push(m),u.push('="'),"style"==m)for(var k=c(v||n.style.cssText).split(";"),b=0,_=k.length;b<_;b++){var w=k[b];if(w.length){var y=w.split(":"),x=c(y[0].toLowerCase()),C=c(y[1]);if("font-size-adjust"==x||"font-stretch"==x)continue;x.indexOf("color")>=0&&(C=i.toHex(C)),x.indexOf("font")>=0&&(C=C.replace(o,"'")),u.push(x),u.push(":"),u.push(C),u.push(";")}}else"src"==m||"href"==m?u.push(n.getAttribute(m,2)):u.push(i.fillAttrs[m]?m:v);u.push('"')}}function d(e,t){for(var n=e.firstChild;n;n=n.nextSibling)c(n,t)}function c(t,n){var a,o,s,l,c,f=t.nodeType;if(1==f){if(!(a=i.name(t))||t.attributes._moz_dirty&&i.is(t,"br"))return;if(o=p[a])return o.start(t),d(t),void o.end(t);u.push("<"),u.push(a),r(t),i.empty[a]?u.push(" />"):(u.push(">"),d(t,n||i.is(t,"pre")),u.push("</"),u.push(a),u.push(">"))}else 3==f?(l=t.nodeValue,!n&&e.support.leadingWhitespace&&(s=t.parentNode,(c=t.previousSibling)||(c=(i.isInline(s)?s:t).previousSibling),c&&""!==c.innerHTML&&!i.isBlock(c)||(l=l.replace(/^[\r\n\v\f\t ]+/,"")),l=l.replace(/ +/," ")),u.push(i.encode(l))):4==f?(u.push("<![CDATA["),u.push(t.data),u.push("]]>")):8==f&&(t.data.indexOf("[CDATA[")<0?(u.push("\x3c!--"),u.push(t.data),u.push("--\x3e")):(u.push("<!"),u.push(t.data),u.push(">")))}var u=[],p={"telerik:script":{start:function(e){u.push("<script"),r(e),u.push(">")},end:function(){u.push("<\/script>")}},b:{start:function(){u.push("<strong>")},end:function(){u.push("</strong>")}},i:{start:function(){u.push("<em>")},end:function(){u.push("</em>")}},u:{start:function(){u.push('<span style="text-decoration:underline;">')},end:function(){u.push("</span>")}},iframe:{start:function(e){u.push("<iframe"),r(e),u.push(">")},end:function(){u.push("</iframe>")}},font:{start:function(e){u.push('<span style="');var t=e.getAttribute("color"),n=a[e.getAttribute("size")],r=e.getAttribute("face");t&&(u.push("color:"),u.push(i.toHex(t)),u.push(";")),r&&(u.push("font-face:"),u.push(r),u.push(";")),n&&(u.push("font-size:"),u.push(n),u.push(";")),u.push('">')},end:function(e){u.push("</span>")}}};return d(n),u=u.join(""),""===u.replace(s,"").replace(l,"")?"":u}}})}(jQuery),function(e){function t(e,t,n,i){if(e==t)return i-n;for(var r=t;r&&r.parentNode!=e;)r=r.parentNode;if(r)return u(r)-n;for(r=e;r&&r.parentNode!=t;)r=r.parentNode;if(r)return i-u(r)-1;for(var a=c.commonAncestor(e,t),o=e;o&&o.parentNode!=a;)o=o.parentNode;o||(o=a);for(var s=t;s&&s.parentNode!=a;)s=s.parentNode;return s||(s=a),o==s?0:u(s)-u(o)}function n(e,n){(function(e){try{return t(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(e){return!0}})(e)&&(n?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function i(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;for(var t=e.startContainer;t&&t!=e.endContainer&&!c.isAncestorOf(t,e.endContainer);)t=t.parentNode;e.commonAncestorContainer=t}function r(e,t,n){var i=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],a=0,o=p(i)?i:i.childNodes[r]||null,s=p(i)?i.parentNode:i;3!=i.nodeType&&4!=i.nodeType||(a=r);var l=s.insertBefore(c.create(t.ownerDocument,"a"),o),d=t.ownerDocument.body.createTextRange();d.moveToElementText(l),c.remove(l),d[n?"moveStart":"moveEnd"]("character",a),d.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",d)}function a(e,t,n){var i=c.create(t.ownerDocument,"a"),r=e.duplicate();r.collapse(n);var a=r.parentElement();do{a.insertBefore(i,i.previousSibling),r.moveToElementText(i)}while(r.compareEndPoints(n?"StartToStart":"StartToEnd",e)>0&&i.previousSibling);r.setEndPoint(n?"EndToStart":"EndToEnd",e);var o=i.nextSibling;if(!o)return o=i.previousSibling,void(o&&p(o)?(t.setEnd(o,o.nodeValue.length),c.remove(i)):(t.selectNodeContents(a),c.remove(i),t.endOffset-=1));c.remove(i),p(o)?t[n?"setStart":"setEnd"](o,r.text.length):t[n?"setStartBefore":"setEndBefore"](o)}var o=window.kendo,s=o.Class,l=e.extend,d=o.ui.editor,c=d.Dom,u=c.findNodeIndex,p=c.isDataNode,f=c.findClosestAncestor,h=c.getNodeLength,g=c.normalize,m={selectionFromWindow:function(t){return e.browser.msie&&e.browser.version<9?new b(t.document):t.getSelection()},selectionFromRange:function(e){var t=C.documentFromRange(e);return m.selectionFromDocument(t)},selectionFromDocument:function(e){return m.selectionFromWindow(c.windowFromDocument(e))}},v=s.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,i(this),n(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,i(this),n(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,u(e))},setStartAfter:function(e){this.setStart(e.parentNode,u(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,u(e))},setEndAfter:function(e){this.setEnd(e.parentNode,u(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[1===e.nodeType?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(f(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function e(t){for(;t.next();)t.hasPartialSubtree()?e(t.getSubtreeIterator()):t.remove()}(new k(t))},cloneContents:function(){var e=C.documentFromRange(this);return function t(n){for(var i,r=e.createDocumentFragment();i=n.next();)i=i.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&i.appendChild(t(n.getSubtreeIterator())),r.appendChild(i);return r}(new k(this))},extractContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(f(e.commonAncestorContainer,e.startContainer)),e.collapse(!0);var n=C.documentFromRange(e);return function t(i){for(var r,a=n.createDocumentFragment();r=i.next();)i.hasPartialSubtree()?(r=r.cloneNode(!1)).appendChild(t(i.getSubtreeIterator())):i.remove(e.originalRange),a.appendChild(r);return a}(new k(t))},insertNode:function(e){var t=this;p(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&c.splitDataNode(t.startContainer,t.startOffset),c.insertAfter(e,t.startContainer)):c.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new v(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return["#text"==e?this.startContainer.nodeValue:e,"(",this.startOffset,") : ","#text"==t?this.endContainer.nodeValue:t,"(",this.endOffset,")"].join("")}}),k=s.extend({init:function(t){if(e.extend(this,{range:t,_current:null,_next:null,_end:null}),!t.collapsed){var n=t.commonAncestorContainer;this._next=t.startContainer!=n||p(t.startContainer)?f(n,t.startContainer):t.startContainer.childNodes[t.startOffset],this._end=t.endContainer!=n||p(t.endContainer)?f(n,t.endContainer).nextSibling:t.endContainer.childNodes[t.endOffset]}},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,p(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0)).deleteData(e.range.endOffset,t.length-e.range.endOffset),e.range.startContainer==e._current&&(t=t.cloneNode(!0)).deleteData(0,e.range.startOffset)),t},traverse:function(e){for(var t,n=this;n._current=n._next,n._next=n._current&&n._current.nextSibling!=n._end?n._current.nextSibling:null,t=n._current;)n.hasPartialSubtree()?n.getSubtreeIterator().traverse(e):e(t);return t},remove:function(e){var t,n,i,r=this,a=r.range.startContainer==r._current,o=r.range.endContainer==r._current;if(p(r._current)&&(a||o))t=a?r.range.startOffset:0,i=(n=o?r.range.endOffset:r._current.length)-t,e&&(a||o)&&(r._current==e.startContainer&&t<=e.startOffset&&(e.startOffset-=i),r._current==e.endContainer&&n<=e.endOffset&&(e.endOffset-=i)),r._current.deleteData(t,i);else{var s=r._current.parentNode;if(e&&(r.range.startContainer==s||r.range.endContainer==s)){var l=u(r._current);s==e.startContainer&&l<=e.startOffset&&(e.startOffset-=1),s==e.endContainer&&l<e.endOffset&&(e.endOffset-=1)}c.remove(r._current)}},hasPartialSubtree:function(){return!p(this._current)&&(c.isAncestorOrSelf(this._current,this.range.startContainer)||c.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),c.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),c.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new k(t)}}),b=s.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();r(t,e,!1),r(t,e,!0),t.select()},removeAllRanges:function(){this.ownerDocument.selection.empty()},getRangeAt:function(){var e,t=new v(this.ownerDocument),n=this.ownerDocument.selection;try{if(e=n.createRange(),(e.item?e.item(0):e.parentElement()).ownerDocument!=this.ownerDocument)return t}catch(e){return t}if("Control"==n.type)t.selectNode(e.item(0));else{a(e,t,!0),a(e,t,!1),9==t.startContainer.nodeType&&t.setStart(t.endContainer,t.startOffset),9==t.endContainer.nodeType&&t.setEnd(t.startContainer,t.endOffset),0===e.compareEndPoints("StartToEnd",e)&&t.collapse(!1);var i=t.startContainer,r=t.endContainer,o=this.ownerDocument.body;if(!(t.collapsed||0!==t.startOffset||t.endOffset!=h(t.endContainer)||i==r&&p(i)&&i.parentNode==o)){for(var s=!1,l=!1;0===u(i)&&i==i.parentNode.firstChild&&i!=o;)i=i.parentNode,s=!0;for(;u(r)==h(r.parentNode)-1&&r==r.parentNode.lastChild&&r!=o;)r=r.parentNode,l=!0;i==o&&r==o&&s&&l&&(t.setStart(i,0),t.setEnd(r,h(o)))}}return t}}),_=s.extend({init:function(e){this.enumerate=function(){function t(e){if(c.is(e,"img")||3==e.nodeType&&!c.isWhitespace(e))n.push(e);else for(e=e.firstChild;e;)t(e),e=e.nextSibling}var n=[];return new k(e).traverse(t),n}}}),w=s.extend({init:function(e){var t=this;t.range=e,t.rootNode=C.documentFromRange(e),t.body=t.rootNode.body,t.html=t.body.innerHTML,t.startContainer=t.nodeToPath(e.startContainer),t.endContainer=t.nodeToPath(e.endContainer),t.startOffset=t.offset(e.startContainer,e.startOffset),t.endOffset=t.offset(e.endContainer,e.endOffset)},index:function(e){for(var t=0,n=e.nodeType;e=e.previousSibling;){var i=e.nodeType;3==i&&n==i||t++,n=i}return t},offset:function(e,t){if(3==e.nodeType)for(;(e=e.previousSibling)&&3==e.nodeType;)t+=e.nodeValue.length;return t},nodeToPath:function(e){for(var t=[];e!=this.rootNode;)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,i){for(var r=this.rootNode,a=n.length,o=i;a--;)r=r.childNodes[n[a]];for(;3==r.nodeType&&r.nodeValue.length<o;)o-=r.nodeValue.length,r=r.nextSibling;e[t?"setStart":"setEnd"](r,o)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),y=s.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=c.create(C.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(t){var n=this,i=n.caret.previousSibling,r=0;i&&(r=p(i)?i.nodeValue.length:u(i));var a=n.caret.parentNode,o=i?u(i):0;c.remove(n.caret),g(a);var s=a.childNodes[o];if(p(s))t.setStart(s,r);else if(s){var l=c.lastTextNode(s);l?t.setStart(l,l.nodeValue.length):t[i?"setStartAfter":"setStartBefore"](s)}else e.browser.msie||a.innerHTML||(a.innerHTML='<br _moz_dirty="" />'),t.selectNodeContents(a);t.collapse(!0)},add:function(e,t){var n=this;t&&e.collapsed&&(n.addCaret(e),e=C.expand(e));var i=e.cloneRange();return i.collapse(!1),n.end=c.create(C.documentFromRange(e),"span",{className:"k-marker"}),i.insertNode(n.end),(i=e.cloneRange()).collapse(!0),n.start=n.end.cloneNode(!0),i.insertNode(n.start),e.setStartBefore(n.start),e.setEndAfter(n.end),g(e.commonAncestorContainer),e},remove:function(e){var t,n,i=this,r=i.start,a=i.end;for(g(e.commonAncestorContainer);!r.nextSibling&&r.parentNode;)r=r.parentNode;for(;!a.previousSibling&&a.parentNode;)a=a.parentNode;t=r.previousSibling&&3==r.previousSibling.nodeType&&r.nextSibling&&3==r.nextSibling.nodeType,n=a.previousSibling&&3==a.previousSibling.nodeType&&a.nextSibling&&3==a.nextSibling.nodeType,r=r.nextSibling,a=a.previousSibling;var o=!1,s=!1;if(r==i.end&&(s=!!i.start.previousSibling,r=a=i.start.previousSibling||i.end.nextSibling,o=!0),c.remove(i.start),c.remove(i.end),!r||!a)return e.selectNodeContents(e.commonAncestorContainer),void e.collapse(!0);var l=o?p(r)?r.nodeValue.length:r.childNodes.length:0,d=p(a)?a.nodeValue.length:a.childNodes.length;if(3==r.nodeType)for(;r.previousSibling&&3==r.previousSibling.nodeType;)l+=(r=r.previousSibling).nodeValue.length;if(3==a.nodeType)for(;a.previousSibling&&3==a.previousSibling.nodeType;)d+=(a=a.previousSibling).nodeValue.length;for(var f=u(r),h=r.parentNode,m=u(a),v=a.parentNode,k=r;k.previousSibling;k=k.previousSibling)3==k.nodeType&&3==k.previousSibling.nodeType&&f--;for(var b=a;b.previousSibling;b=b.previousSibling)3==b.nodeType&&3==b.previousSibling.nodeType&&m--;g(h),3==r.nodeType&&(r=h.childNodes[f]),g(v),3==a.nodeType&&(a=v.childNodes[m]),o?(3==r.nodeType?e.setStart(r,l):e[s?"setStartAfter":"setStartBefore"](r),e.collapse(!0)):(3==r.nodeType?e.setStart(r,l):e.setStartBefore(r),3==a.nodeType?e.setEnd(a,d):e.setEndAfter(a)),i.caret&&i.removeCaret(e)}}),x=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,C={nodes:function(e){var t=C.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=C.textNodes(e)).length||(t=c.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return new _(e).enumerate()},documentFromRange:function(e){var t=e.startContainer;return 9==t.nodeType?t:t.ownerDocument},createRange:function(t){return e.browser.msie&&e.browser.version<9?new v(t):t.createRange()},selectRange:function(e){var t=C.image(e);t&&(e.setStartAfter(t),e.setEndAfter(t));var n=m.selectionFromRange(e);n.removeAllRanges(),n.addRange(e)},split:function(e,t,n){function i(i){var r=e.cloneRange();r.collapse(i),r[i?"setStartBefore":"setEndAfter"](t);var a=r.extractContents();n&&(a=c.trim(a)),c[i?"insertBefore":"insertAfter"](a,t)}i(!0),i(!1)},getMarkers:function(e){var t=[];return new k(e).traverse(function(e){"k-marker"==e.className&&t.push(e)}),t},image:function(e){var t=[];if(new k(e).traverse(function(e){c.is(e,"img")&&t.push(e)}),1==t.length)return t[0]},expand:function(e){var t=e.cloneRange(),n=t.startContainer.childNodes[0===t.startOffset?0:t.startOffset-1],i=t.endContainer.childNodes[t.endOffset];if(!p(n)||!p(i))return t;var r=n.nodeValue,a=i.nodeValue;if(!r||!a)return t;var o=r.split("").reverse().join("").search(x),s=a.search(x);return o&&s?(s=-1==s?a.length:s,o=-1==o?0:r.length-o,t.setStart(n,o),t.setEnd(i,s),t):t},isExpandable:function(e){var t=e.startContainer,n=C.documentFromRange(e);if(t==n||t==n.body)return!1;var i=e.cloneRange(),r=t.nodeValue;if(!r)return!1;var a=r.substring(0,i.startOffset),o=r.substring(i.startOffset),s=0,l=0;return a&&(s=a.split("").reverse().join("").search(x)),o&&(l=o.search(x)),s&&l}};l(d,{SelectionUtils:m,W3CRange:v,RangeIterator:k,W3CSelection:b,RangeEnumerator:_,RestorePoint:w,Marker:y,RangeUtils:C})}(jQuery),function(e){var t=window.kendo,n=t.Class,i=t.ui.editor,r=i.EditorUtils,a=r.registerTool,o=i.Dom,s=i.RangeUtils,l=s.selectRange,d=i.Tool,c=i.ToolTemplate,u=i.RestorePoint,p=i.Marker,f=e.extend,h=n.extend({init:function(e){var t=this;t.options=e,t.restorePoint=new u(e.range),t.marker=new p,t.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),l(e)},undo:function(){var e=this.restorePoint;e.body.innerHTML=e.html,l(e.toRange())},redo:function(){this.exec()},exec:function(){var e=this,t=e.lockRange(!0);e.formatter.editor=e.editor,e.formatter.toggle(t),e.releaseRange(t)}}),g=n.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,l(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,l(this.startRestorePoint.toRange())}}),m=h.extend({init:function(e){h.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor,t=e.getRange(),n=new u(t);e.clipboard.paste(this.options.value||""),e.undoRedoStack.push(new g(n,new u(e.getRange()))),e.focus()}}),v=d.extend({initialize:function(e,t){var n=t.editor;new i.SelectBox(e,{dataSource:n.options.insertHtml||[],dataTextField:"text",dataValueField:"value",change:function(e){d.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new m(e)},update:function(e,t){var n=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");n.close(),n.value(n.options.title)}}),k=n.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(e){var t=this;t.stack=t.stack.slice(0,t.currentCommandIndex+1),t.currentCommandIndex=t.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),b=n.extend({init:function(e){this.editor=e},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;if(i.isTypingKey(e)&&!i.isTypingInProgress()){var r=n.getRange();return t.startRestorePoint=new u(r),i.startTyping(function(){n.selectionRestorePoint=t.endRestorePoint=new u(n.getRange()),n.undoRedoStack.push(new g(t.startRestorePoint,t.endRestorePoint))}),!0}return!1},keyup:function(e){var t=this.editor.keyboard;return!!t.isTypingInProgress()&&(t.endTyping(),!0)}}),_=n.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){var e=this;e.endRestorePoint=new u(e.editor.getRange()),e.editor.undoRedoStack.push(new g(e.startRestorePoint,e.endRestorePoint)),e.startRestorePoint=e.endRestorePoint},changed:function(){return!!this.startRestorePoint&&this.startRestorePoint.html!=this.editor.body.innerHTML},keydown:function(e){var t=this,n=t.editor,i=n.keyboard;return i.isModifierKey(e)?(i.isTypingInProgress()&&i.endTyping(!0),t.startRestorePoint=new u(n.getRange()),!0):!!i.isSystem(e)&&(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0)},keyup:function(e){var t=this;return!(!t.systemCommandIsInProgress||!t.changed())&&(t.systemCommandIsInProgress=!1,t.createUndoCommand(e),!0)}}),w=n.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&e<=90||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222},toolFromShortcut:function(t,n){var i,r,a=String.fromCharCode(n.keyCode);for(i in t)if(((r=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options)).key==a||r.key==n.keyCode)&&r.ctrl==n.ctrlKey&&r.alt==n.altKey&&r.shift==n.shiftKey)return i},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||32==t||13==t||8==t||46==t&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return 17==t&&!e.shiftKey&&!e.altKey||16==t&&!e.ctrlKey&&!e.altKey||18==t&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return 46==e.keyCode&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress=!1,this.onEndTyping&&this.onEndTyping()},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,i=this.handlers;for(n=0;n<i.length&&!i[n][t](e);n++);},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),y=n.extend({init:function(e){this.editor=e,this.cleaners=[new x]},htmlToFragment:function(e){var t=this.editor.document,n=o.create(t,"div"),i=t.createDocumentFragment();for(n.innerHTML=e;n.firstChild;)i.appendChild(n.firstChild);return i},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},oncut:function(e){var t=this.editor,n=new u(t.getRange());setTimeout(function(){t.undoRedoStack.push(new g(n,new u(t.getRange())))})},onpaste:function(t){var n=this.editor,r=n.getRange(),a=new u(r),s=o.create(n.document,"div",{className:"k-paste-container",innerHTML:"\ufeff"});if(n.body.appendChild(s),n.body.createTextRange){t.preventDefault();var d=n.createRange();d.selectNodeContents(s),n.selectRange(d);var c=n.body.createTextRange();c.moveToElementText(s),e(n.body).unbind("paste"),c.execCommand("Paste"),e(n.body).bind("paste",e.proxy(arguments.callee,this))}else{var p=n.createRange();p.selectNodeContents(s),l(p)}setTimeout(function(){var e,t={html:""};l(r),o.remove(s),s.lastChild&&o.is(s.lastChild,"br")&&o.remove(s.lastChild),"\ufeff"!=(e=s.innerHTML)&&(t.html=e),n.trigger("paste",t),n.clipboard.paste(t.html,!0),n.undoRedoStack.push(new g(a,new u(n.getRange()))),i.EditorUtils.select(n)})},splittableParent:function(e,t){var n,i;if(e)return o.parentOfType(t,["p","ul","ol"])||t.parentNode;if(n=t.parentNode,i=t.ownerDocument.body,o.isInline(n))for(;n.parentNode!=i&&!o.isBlock(n.parentNode);)n=n.parentNode;return n},paste:function(e,t){var n,i,r=this.editor;for(n=0,i=this.cleaners.length;n<i;n++)this.cleaners[n].applicable(e)&&(e=this.cleaners[n].clean(e));t&&(e=(e=e.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/gi,"$3")).replace(/<(a|span)[^>]*><\/\1>/gi,"")),e=e.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var a=this.isBlock(e),d=r.getRange();d.deleteContents(),d.startContainer==r.document&&d.selectNodeContents(r.body);var c=new p,u=c.addCaret(d),f=this.splittableParent(a,u),h=!1;/body|td/.test(o.name(f))||!a&&!o.isInline(f)||(d.selectNode(u),s.split(d,f,!0),h=!0);var g=this.htmlToFragment(e);if(g.firstChild&&"k-paste-container"===g.firstChild.className){var m=[];for(n=0,i=g.childNodes.length;n<i;n++)m.push(g.childNodes[n].innerHTML);g=this.htmlToFragment(m.join("<br />"))}if(d.insertNode(g),f=this.splittableParent(a,u),h){for(;u.parentNode!=f;)o.unwrap(u.parentNode);o.unwrap(u.parentNode)}o.normalize(d.commonAncestorContainer),u.style.display="inline",o.scrollTo(u),c.removeCaret(d),l(d)}}),x=n.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/gi,"",/<(\/?)b(\s[^>]*)?>/gi,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/gi,"<$1em$2>",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,"",/style=(["|'])\s*\1/g,""]},applicable:function(e){return/class="?Mso|style="[^"]*mso-/i.test(e)},listType:function(e){return/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e)?"ul":/^\s*\w+[\.\)]\u00a0{2,}/.test(e)?"ol":void 0},lists:function(t){for(var n,i=o.create(document,"div",{innerHTML:t}),r=e(o.blockElements.join(","),i),a=-1,s={ul:{},ol:{}},l=i,d=0;d<r.length;d++){var c=r[d];t=c.innerHTML.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," ");var u=this.listType(t);if(u&&"p"==o.name(c)){var p=parseFloat(c.style.marginLeft||0),f=s[u][p];if((p>a||!f)&&(f=o.create(document,u),l==i?o.insertBefore(f,c):l.appendChild(f),s[u][p]=f),n!=u)for(var h in s)for(var g in s[h])e.contains(f,s[h][g])&&delete s[h][g];o.remove(c.firstChild),l=o.create(document,"li",{innerHTML:c.innerHTML}),f.appendChild(l),o.remove(c),a=p,n=u}else c.innerHTML?(s={ul:{},ol:{}},l=i,a=-1):o.remove(c)}return i.innerHTML},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/gi,function(e,t){return!t||t.indexOf("href")<0?"":e})},clean:function(e){var t,n,i=this,r=i.replacements;for(t=0,n=r.length;t<n;t+=2)e=e.replace(r[t],r[t+1]);return e=i.stripEmptyAnchors(e),e=i.lists(e),e=e.replace(/\s+class="?[^"\s>]*"?/gi,"")}});f(i,{Command:h,GenericCommand:g,InsertHtmlCommand:m,InsertHtmlTool:v,UndoRedoStack:k,TypingHandler:b,SystemHandler:_,Keyboard:w,Clipboard:y,MSWordFormatCleaner:x}),a("insertHtml",new v({template:new c({template:r.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(jQuery),function(e){function t(e){return e.collapsed&&!u.isExpandable(e)}var n=window.kendo,i=n.Class,r=n.ui.editor,a=n.ui.Editor.fn.options.formats,o=r.EditorUtils,s=r.Tool,l=r.ToolTemplate,d=r.FormatTool,c=r.Dom,u=r.RangeUtils,p=e.extend,f=r.EditorUtils.registerTool,h=r.EditorUtils.registerFormat,g=i.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t,n=0,i=0,r=0,a=e.parentNode;for(t=a.firstChild;t;t=t.nextSibling)t!=e&&("k-marker"==t.className?r++:3==t.nodeType?n++:i++);return r>1&&"k-marker"==a.firstChild.className&&"k-marker"==a.lastChild.className?0:i+n},findSuitable:function(e,t){return!t&&this.numberOfSiblings(e)>0?null:c.parentOfType(e,this.format[0].tags)},findFormat:function(e){var t,n,i,r,a,o=this.format,s=c.attrEquals;for(t=0,n=o.length;t<n;t++){if(i=e,r=o[t].tags,a=o[t].attr,i&&c.ofType(i,r)&&s(i,a))return i;for(;i;)if((i=c.parentOfType(i,r))&&s(i,a))return i}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;t<n;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=i.extend({init:function(e,t){var n=this;n.finder=new g(e),n.attributes=p({},e[0].attr,t),n.tag=e[0].tags[0]},wrap:function(e){return c.wrap(e,c.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){var n=this;n.finder.isFormatted(t)?(n.split(e),n.remove(t)):n.apply(t)},toggle:function(e){var t=u.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t,n,i,r,a=this,o=[];for(t=0,n=e.length;t<n;t++)i=e[t],(r=a.finder.findSuitable(i))?c.attr(r,a.attributes):r=a.wrap(i),o.push(r);a.consolidate(o)},remove:function(e){var t,n,i,r=this;for(t=0,n=e.length;t<n;t++)(i=r.finder.findFormat(e[t]))&&(r.attributes&&r.attributes.style?(c.unstyle(i,r.attributes.style),i.style.cssText||c.unwrap(i)):c.unwrap(i))},split:function(e){var t,n,i=u.textNodes(e),r=i.length;if(r>0)for(t=0;t<r;t++)(n=this.finder.findFormat(i[t]))&&u.split(e,n,!0)},consolidate:function(e){for(var t,n;e.length>1;)if(t=e.pop(),n=e[e.length-1],t.previousSibling&&"k-marker"==t.previousSibling.className&&n.appendChild(t.previousSibling),t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){for(;t.firstChild;)n.appendChild(t.firstChild);c.remove(t)}}}),v=g.extend({init:function(e,t){var n=this;n.format=e,n.greedyProperty=t,g.fn.init.call(n,e)},getInlineCssValue:function(t){var n,i,r,a,o,s,l,d,u,p,f,h,g=t.attributes,m=e.trim;if(g)for(n=0,i=g.length;n<i;n++)if(r=g[n],a=r.nodeName,o=r.nodeValue,r.specified&&"style"==a)for(d=0,u=(s=m(o||t.style.cssText).split(";")).length;d<u;d++)if((l=s[d]).length){if(p=l.split(":"),f=m(p[0].toLowerCase()),h=m(p[1]),f!=this.greedyProperty)continue;return f.indexOf("color")>=0?c.toHex(h):h}},getFormatInner:function(t){var n,i,r,a=e(c.isDataNode(t)?t.parentNode:t).parents().andSelf();for(n=0,i=a.length;n<i;n++)if(r="className"==this.greedyProperty?a[n].className:this.getInlineCssValue(a[n]))return r;return"inherit"},getFormat:function(e){var t,n,i=this.getFormatInner(e[0]);for(t=1,n=e.length;t<n;t++)if(i!=this.getFormatInner(e[t]))return"";return i},isFormatted:function(e){return""!==this.getFormat(e)}}),k=m.extend({init:function(e,t,n){var i=this;m.fn.init.call(i,e,t),i.greedyProperty=n,i.values=t,i.finder=new v(e,n)},activate:function(e,t){var n,i=this,r=i.greedyProperty,a="apply";i.split(e),r&&(n=r.replace(/-([a-z])/,function(e,t){return t.toUpperCase()}),"inherit"==i.values.style[n]&&(a="remove")),i[a](t)}}),b=d.extend({init:function(e){d.fn.init.call(this,p(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}})),this.willDelayExecution=t}}),_=s.extend({init:function(t){var i=this;s.fn.init.call(i,t),i.type=e.browser.msie||n.support.touch?"kendoDropDownList":"kendoComboBox",i.format=[{tags:["span"]}],i.finder=new v(i.format,t.cssAttr)},command:function(e){var t=this.options,n=this.format,i={};return new r.FormatCommand(p(e,{formatter:function(){return i[t.domAttr]=e.value,new k(n,{style:i},t.cssAttr)}}))},willDelayExecution:t,update:function(e,t,n){var i=this,r=e.data(i.type),a=n.getPending(i.name),o=a&&a.params?a.params.value:i.finder.getFormat(t);r.close(),r.value(o)},initialize:function(e,t){var n,i=t.editor,r=this.options,a=r.name,o=[];r.defaultValue&&(o=[{text:i.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),n=o.concat(r.items?r.items:i.options[a]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:n,change:function(e){s.exec(i,a,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+a).find("*").andSelf().attr("unselectable","on"),e.data(this.type).value("inherit")}}),w=s.extend({init:function(e){s.fn.init.call(this,e),this.options=e,this.format=[{tags:["span"]}]},update:function(e){e.data("kendoColorPicker").close()},command:function(e){var t=this.options,n=this.format,i={};return new r.FormatCommand(p(e,{formatter:function(){return i[t.domAttr]=e.value,new k(n,{style:i},t.cssAttr)}}))},willDelayExecution:t,initialize:function(e,t){var n=t.editor,i=this.name;new r.ColorPicker(e,{value:"#000000",change:function(e){s.exec(n,i,e.value)}})}}),y=s.extend({init:function(e){var t=this;s.fn.init.call(t,e),t.format=[{tags:["span"]}],t.finder=new v(t.format,"className")},command:function(e){var t=this.format;return new r.FormatCommand(p(e,{formatter:function(){return new k(t,{className:e.value})}}))},update:function(e,t){var n=e.data("kendoSelectBox");n.close(),n.value(this.finder.getFormat(t))},initialize:function(e,t){var n=t.editor;new r.SelectBox(e,{dataTextField:"text",dataValueField:"value",dataSource:n.options.style,title:n.options.messages.style,change:function(e){s.exec(n,"style",this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+this.name).find("*").andSelf().attr("unselectable","on")}});p(r,{InlineFormatFinder:g,InlineFormatter:m,GreedyInlineFormatFinder:v,GreedyInlineFormatter:k,InlineFormatTool:b,FontTool:_,ColorTool:w,StyleTool:y}),f("style",new r.StyleTool({template:new l({template:o.dropDownListTemplate,title:"Styles"})})),h("bold",[{tags:["strong"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),f("bold",new b({key:"B",ctrl:!0,format:a.bold,template:new l({template:o.buttonTemplate,title:"Bold"})})),h("italic",[{tags:["em"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),f("italic",new b({key:"I",ctrl:!0,format:a.italic,template:new l({template:o.buttonTemplate,title:"Italic"})})),h("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}}]),f("underline",new b({key:"U",ctrl:!0,format:a.underline,template:new l({template:o.buttonTemplate,title:"Underline"})})),h("strikethrough",[{tags:["del"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),f("strikethrough",new b({format:a.strikethrough,template:new l({template:o.buttonTemplate,title:"Strikethrough"})})),h("superscript",[{tags:["sup"]}]),f("superscript",new b({format:a.superscript,template:new l({template:o.buttonTemplate,title:"Superscript"})})),h("subscript",[{tags:["sub"]}]),f("subscript",new b({format:a.subscript,template:new l({template:o.buttonTemplate,title:"Subscript"})})),f("foreColor",new w({cssAttr:"color",domAttr:"color",name:"foreColor",template:new l({template:o.colorPickerTemplate,title:"Color"})})),f("backColor",new w({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new l({template:o.colorPickerTemplate,title:"Background Color"})})),f("fontName",new _({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new l({template:o.comboBoxTemplate,title:"Font Name"})})),f("fontSize",new _({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new l({template:o.comboBoxTemplate,title:"Font Size"})}))}(jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,a=t.ui.Editor.fn.options.formats,o=r.Dom,s=r.Command,l=r.Tool,d=r.ToolTemplate,c=r.FormatTool,u=r.EditorUtils,p=u.registerTool,f=u.registerFormat,h=r.RangeUtils,g=n.extend({init:function(e){this.format=e},contains:function(e,t){var n,i,r;for(n=0,i=t.length;n<i;n++)if(!(r=t[n])||!o.isAncestorOrSelf(e,r))return!1;return!0},findSuitable:function(t){var n,i,r,a=this.format,s=[];for(n=0,i=t.length;n<i;n++){if(!(r=o.ofType(t[n],a[0].tags)?t[n]:o.parentOfType(t[n],a[0].tags)))return[];e.inArray(r,s)<0&&s.push(r)}for(n=0,i=s.length;n<i;n++)if(this.contains(s[n],s))return[s[n]];return s},findFormat:function(e){var t,n,i,r,a,s=this.format;for(t=0,n=s.length;t<n;t++)for(i=e,r=s[t].tags,a=s[t].attr;i;){if(o.ofType(i,r)&&o.attrEquals(i,a))return i;i=i.parentNode}return null},getFormat:function(e){var t,n,i=this,r=function(e){return i.findFormat(o.isDataNode(e)?e.parentNode:e)},a=r(e[0]);if(!a)return"";for(t=1,n=e.length;t<n;t++)if(a!=r(e[t]))return"";return a.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;t<n;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=n.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new g(e)},wrap:function(e,t,n){var i=1==n.length?o.blockParentOrBody(n[0]):o.commonAncestor.apply(null,n);o.isInline(i)&&(i=o.blockParentOrBody(i));var r,a,s=o.significantChildNodes(i),l=o.findNodeIndex(s[0]),d=o.create(i.ownerDocument,e,t);for(r=0;r<s.length;r++)a=s[r],o.isBlock(a)?(o.attr(a,t),d.childNodes.length&&(o.insertBefore(d,a),d=d.cloneNode(!1)),l=o.findNodeIndex(a)+1):d.appendChild(a);d.firstChild&&o.insertAt(i,d,l)},apply:function(e){var t,n,r=this,a=o.is(e[0],"img")?[e[0]]:r.finder.findSuitable(e),s=a.length?u.formatByName(o.name(a[0]),r.format):r.format[0],l=s.tags[0],d=i({},s.attr,r.values);if(a.length)for(t=0,n=a.length;t<n;t++)o.attr(a[t],d);else r.wrap(l,d,e)},remove:function(e){var t,n,i,r;for(t=0,n=e.length;t<n;t++)(i=this.finder.findFormat(e[t]))&&(o.ofType(i,["p","img","li"])?((r=u.formatByName(o.name(i),this.format)).attr.style&&o.unstyle(i,r.attr.style),r.attr.className&&o.removeClass(i,r.attr.className)):o.unwrap(i))},toggle:function(e){var t=this,n=h.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),v=n.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new g(e)},apply:function(e){var t,n,i,a,s,l=this.format,d=o.blockParents(e),c=l[0].tags[0];if(d.length)for(t=0,n=d.length;t<n;t++)o.is(d[t],"li")?(i=d[t].parentNode,a=new r.ListFormatter(i.nodeName.toLowerCase(),c),(s=this.editor.createRange()).selectNode(d[t]),a.toggle(s)):o.changeTag(d[t],c);else new m(l,this.values).apply(e)},toggle:function(e){var t=h.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),(t=h.textNodes(e)).length||(t=o.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),k=s.extend({init:function(e){e.formatter=e.formatter(),s.fn.init.call(this,e)}}),b=c.extend({init:function(e){c.fn.init.call(this,i(e,{finder:new g(e.format),formatter:function(){return new m(e.format)}}))}}),_=l.extend({init:function(e){l.fn.init.call(this,e),this.finder=new g([{tags:o.blockElements}])},command:function(e){return new k(i(e,{formatter:function(){return new v([{tags:[e.value]}],{})}}))},update:function(e,t){var n;(n=e.is("select")?e.data("kendoSelectBox"):e.find("select").data("kendoSelectBox")).close(),n.value(this.finder.getFormat(t))},initialize:function(e,t){var n=t.editor;new r.SelectBox(e,{dataTextField:"text",dataValueField:"value",dataSource:this.options.items?this.options.items:n.options.formatBlock,title:n.options.messages.formatBlock,change:function(e){l.exec(n,"formatBlock",this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-formatBlock").find("*").andSelf().attr("unselectable","on")}});i(r,{BlockFormatFinder:g,BlockFormatter:m,GreedyBlockFormatter:v,FormatCommand:k,BlockFormatTool:b,FormatBlockTool:_}),p("formatBlock",new _({template:new d({template:u.dropDownListTemplate})})),f("justifyLeft",[{tags:o.blockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{float:"left"}}}]),p("justifyLeft",new b({format:a.justifyLeft,template:new d({template:u.buttonTemplate,title:"Justify Left"})})),f("justifyCenter",[{tags:o.blockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto"}}}]),p("justifyCenter",new b({format:a.justifyCenter,template:new d({template:u.buttonTemplate,title:"Justify Center"})})),f("justifyRight",[{tags:o.blockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{float:"right"}}}]),p("justifyRight",new b({format:a.justifyRight,template:new d({template:u.buttonTemplate,title:"Justify Right"})})),f("justifyFull",[{tags:o.blockElements,attr:{style:{textAlign:"justify"}}}]),p("justifyFull",new b({format:a.justifyFull,template:new d({template:u.buttonTemplate,title:"Justify Full"})}))}(jQuery),function(e){var t=window.kendo,n=e.extend,i=t.ui.editor,r=i.Dom,a=i.Command,o=i.Tool,s=i.BlockFormatter,l=r.normalize,d=i.RangeUtils,c=i.EditorUtils.registerTool,u=a.extend({init:function(e){this.options=e,a.fn.init.call(this,e)},exec:function(){function t(e){if(e.firstChild&&r.is(e.firstChild,"br")&&r.remove(e.firstChild),r.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode),e&&!r.is(e,"img")){for(;e.firstChild&&1==e.firstChild.nodeType;)e=e.firstChild;e.innerHTML||(e.innerHTML=v)}}var n,i,a,o,c,u,p,f,h,g=this.getRange(),m=d.documentFromRange(g),v=e.browser.msie?"":'<br _moz_dirty="" />',k="p,h1,h2,h3,h4,h5,h6".split(","),b=r.parentOfType(g.startContainer,k),_=r.parentOfType(g.endContainer,k),w=b&&!_||!b&&_;if(g.deleteContents(),u=r.create(m,"a"),g.insertNode(u),u.parentNode||((o=g.commonAncestorContainer).innerHTML="",o.appendChild(u)),l(u.parentNode),p=r.parentOfType(u,["li"]),f=r.parentOfType(u,"h1,h2,h3,h4,h5,h6".split(",")),p?((h=g.cloneRange()).selectNode(p),d.textNodes(h).length||(c=r.create(m,"p"),p.nextSibling&&d.split(h,p.parentNode),r.insertAfter(c,p.parentNode),r.remove(1==p.parentNode.childNodes.length?p.parentNode:p),c.innerHTML=v,a=c)):f&&!u.nextSibling&&(c=r.create(m,"p"),r.insertAfter(c,f),c.innerHTML=v,r.remove(u),a=c),a||(p||f||new s([{tags:["p"]}]).apply([u]),g.selectNode(u),n=r.parentOfType(u,[p?"li":f?r.name(f):"p"]),d.split(g,n,w),i=n.previousSibling,r.is(i,"li")&&i.firstChild&&!r.is(i.firstChild,"br")&&(i=i.firstChild),a=n.nextSibling,r.is(a,"li")&&a.firstChild&&!r.is(a.firstChild,"br")&&(a=a.firstChild),r.remove(n),t(i),t(a),l(i)),l(a),r.is(a,"img"))g.setStartBefore(a);else{g.selectNodeContents(a);var y=d.textNodes(g)[0];y&&g.selectNodeContents(y)}g.collapse(!0),r.scrollTo(a),d.selectRange(g)}}),p=a.extend({init:function(e){this.options=e,a.fn.init.call(this,e)},exec:function(){var t=this.getRange();t.deleteContents();var n=r.create(d.documentFromRange(t),"br");if(t.insertNode(n),l(n.parentNode),!e.browser.msie&&(!n.nextSibling||r.isWhitespace(n.nextSibling))){var i=n.cloneNode(!0);i.setAttribute("_moz_dirty",""),r.insertAfter(i,n)}t.setStartAfter(n),t.collapse(!0),d.selectRange(t)}});n(i,{ParagraphCommand:u,NewLineCommand:p}),c("insertLineBreak",new o({key:13,shift:!0,command:p})),c("insertParagraph",new o({key:13,command:u}))}(jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,a=r.Dom,o=r.RangeUtils,s=r.EditorUtils,l=r.Command,d=r.ToolTemplate,c=r.FormatTool,u=r.BlockFormatFinder,p=o.textNodes,f=r.EditorUtils.registerTool,h=u.extend({init:function(e){this.tag=e;var t=this.tags=["ul"==e?"ol":"ul",e];u.fn.init.call(this,[{tags:t}])},isFormatted:function(e){for(var t,n=[],i=0;i<e.length;i++)(t=this.findFormat(e[i]))&&a.name(t)==this.tag&&n.push(t);if(n.length<1)return!1;if(n.length!=e.length)return!1;for(i=0;i<n.length&&n[i].parentNode==t.parentNode;i++)if(n[i]!=t)return!1;return!0},findSuitable:function(e){var t=a.parentOfType(e[0],this.tags);return t&&a.name(t)==this.tag?t:null}}),g=n.extend({init:function(e,t){var n=this;n.finder=new h(e),n.tag=e,n.unwrapTag=t},wrap:function(e,t){var n,i,r=a.create(e.ownerDocument,"li");for(n=0;n<t.length;n++)if(i=t[n],a.is(i,"li"))e.appendChild(i);else if(a.is(i,"ul")||a.is(i,"ol"))for(;i.firstChild;)e.appendChild(i.firstChild);else if(a.is(i,"td")){for(;i.firstChild;)r.appendChild(i.firstChild);e.appendChild(r),i.appendChild(e),e=e.cloneNode(!1),r=r.cloneNode(!1)}else r.appendChild(i),a.isBlock(i)&&(e.appendChild(r),a.unwrap(i),r=r.cloneNode(!1));r.firstChild&&e.appendChild(r)},containsAny:function(e,t){for(var n=0;n<t.length;n++)if(a.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if("k-marker"==e.className){var n=e.nextSibling;if(n&&a.isBlock(n))return!1;if((n=e.previousSibling)&&a.isBlock(n))return!1}return this.containsAny(e,t)||a.isInline(e)||3==e.nodeType},split:function(t){var n,i,r=p(t);if(r.length){n=a.parentOfType(r[0],["li"]),i=a.parentOfType(r[r.length-1],["li"]),t.setStartBefore(n),t.setEndAfter(i);for(var s=0,l=r.length;s<l;s++){var d=this.finder.findFormat(r[s]);if(d){var c=e(d).parents("ul,ol");c[0]?o.split(t,c.last()[0],!0):o.split(t,d,!0)}}}},merge:function(e,t){for(var n,i=t.previousSibling;i&&("k-marker"==i.className||3==i.nodeType&&a.isWhitespace(i));)i=i.previousSibling;if(i&&a.name(i)==e){for(;t.firstChild;)i.appendChild(t.firstChild);a.remove(t),t=i}for(n=t.nextSibling;n&&("k-marker"==n.className||3==n.nodeType&&a.isWhitespace(n));)n=n.nextSibling;if(n&&a.name(n)==e){for(;t.lastChild;)n.insertBefore(t.lastChild,n.firstChild);a.remove(t)}},applyOnSection:function(t,n){var i,r=this.tag;(i=1==n.length?a.parentOfType(n[0],["ul","ol"]):a.commonAncestor.apply(null,n))||(i=a.parentOfType(n[0],["td"])||n[0].ownerDocument.body),a.isInline(i)&&(i=a.blockParentOrBody(i));var o=[],s=this.finder.findSuitable(n);s||(s=new h("ul"==r?"ol":"ul").findSuitable(n));var l=a.significantChildNodes(i);l.length||(l=n),/table|tbody/.test(a.name(i))&&(l=e.map(n,function(e){return a.parentOfType(e,["td"])}));for(var d=0;d<l.length;d++){var c=l[d],u=a.name(c);!this.suitable(c,n)||s&&a.isAncestorOrSelf(s,c)||(!s||"ul"!=u&&"ol"!=u?o.push(c):(e.each(c.childNodes,function(){o.push(this)}),a.remove(c)))}o.length!=l.length||i==n[0].ownerDocument.body||/table|tbody|tr|td/.test(a.name(i))||(o=[i]),s||(s=a.create(i.ownerDocument,r),a.insertBefore(s,o[0])),this.wrap(s,o),a.is(s,r)||a.changeTag(s,r),this.merge(r,s)},apply:function(e){var t,n,i,r=0,o=[];do{i=a.parentOfType(e[r],["td","body"]),t&&i==t?n.push(e[r]):(t&&o.push({section:t,nodes:n}),n=[e[r]],t=i),r++}while(r<e.length);for(o.push({section:t,nodes:n}),r=0;r<o.length;r++)this.applyOnSection(o[r].section,o[r].nodes)},unwrap:function(t){var n,i,r,o,s=t.ownerDocument.createDocumentFragment(),l=this.unwrapTag;for(i=t.firstChild;i;i=i.nextSibling){for(r=a.create(t.ownerDocument,l||"p");i.firstChild;)o=i.firstChild,a.isBlock(o)?(r.firstChild&&(s.appendChild(r),r=a.create(t.ownerDocument,l||"p")),s.appendChild(o)):r.appendChild(o);r.firstChild&&s.appendChild(r)}(n=e(t).parents("ul,ol"))[0]?(a.insertAfter(s,n.last()[0]),n.last().remove()):a.insertAfter(s,t),a.remove(t)},remove:function(e){for(var t,n=0,i=e.length;n<i;n++)(t=this.finder.findFormat(e[n]))&&this.unwrap(t)},toggle:function(e){var t=this,n=p(e),i=e.commonAncestorContainer;if(!n.length&&(e.selectNodeContents(i),!(n=p(e)).length)){var r=i.ownerDocument.createTextNode("");e.startContainer.appendChild(r),n=[r],e.selectNode(r.parentNode)}t.finder.isFormatted(n)?(t.split(e),t.remove(n)):t.apply(n)}}),m=l.extend({init:function(e){e.formatter=new g(e.tag),l.fn.init.call(this,e)}}),v=c.extend({init:function(e){this.options=e,c.fn.init.call(this,i(e,{finder:new h(e.tag)}))},command:function(e){return new m(i(e,{tag:this.options.tag}))}});i(r,{ListFormatFinder:h,ListFormatter:g,ListCommand:m,ListTool:v}),f("insertUnorderedList",new v({tag:"ul",template:new d({template:s.buttonTemplate,title:"Remove Link"})})),f("insertOrderedList",new v({tag:"ol",template:new d({template:s.buttonTemplate,title:"Remove Link"})}))}(jQuery),function(e,t){var n=window.kendo,i=n.Class,r=e.extend,a=n.ui.editor,o=a.Dom,s=a.RangeUtils,l=a.EditorUtils,d=a.Command,c=a.Tool,u=a.ToolTemplate,p=a.InlineFormatter,f=a.InlineFormatFinder,h=s.textNodes,g=a.EditorUtils.registerTool,m=i.extend({findSuitable:function(e){return o.parentOfType(e,["a"])}}),v=i.extend({init:function(){this.finder=new m},apply:function(e,t){var n=h(e);if(t.innerHTML){var i=s.getMarkers(e),r=s.documentFromRange(e);e.deleteContents();var a=o.create(r,"a",t);e.insertNode(a),i.length>1&&(o.insertAfter(i[i.length-1],a),o.insertAfter(i[1],a),o[n.length>0?"insertBefore":"insertAfter"](i[0],a))}else{var l=new p([{tags:["a"]}],t);l.finder=this.finder,l.apply(n)}}}),k=d.extend({init:function(e){e.formatter={toggle:function(e){new p([{tags:["a"]}]).remove(h(e))}},this.options=e,d.fn.init.call(this,e)}}),b=d.extend({init:function(e){var t=this;t.options=e,d.fn.init.call(t,e),t.attributes=null,t.async=!0,t.formatter=new v},exec:function(){function t(t){var r=e("#k-editor-link-url",p.element).val();if(r&&"http://"!=r){d.attributes={href:r};var a=e("#k-editor-link-title",p.element).val();a&&(d.attributes.title=a);var o=e("#k-editor-link-text",p.element).val();o!==l&&(d.attributes.innerHTML=o||r),e("#k-editor-link-target",p.element).is(":checked")&&(d.attributes.target="_blank"),d.formatter.apply(i,d.attributes)}n(t),d.change&&d.change()}function n(e){e.preventDefault(),p.destroy(),o.windowFromDocument(s.documentFromRange(i)).focus(),d.releaseRange(i)}var i=this.getRange(),r=i.collapsed;i=this.lockRange(!0);var a=h(i),l=null,d=this,c=a.length?d.formatter.finder.findSuitable(a[0]):null,u=a.length<=1||2==a.length&&r,p=e('<div class="k-editor-dialog"><ol><li class="k-form-text-row"><label for="k-editor-link-url">Web address</label><input type="text" class="k-input" id="k-editor-link-url"/></li>'+(u?'<li class="k-form-text-row"><label for="k-editor-link-text">Text</label><input type="text" class="k-input" id="k-editor-link-text"/></li>':"")+'<li class="k-form-text-row"><label for="k-editor-link-title">Tooltip</label><input type="text" class="k-input" id="k-editor-link-title"/></li><li class="k-form-checkbox-row"><input type="checkbox" id="k-editor-link-target"/><label for="k-editor-link-target">Open link in new window</label></li></ol><div class="k-button-wrapper"><button class="k-dialog-insert k-button">Insert</button>&nbsp;or&nbsp;<a href="#" class="k-dialog-close k-link">Close</a></div></div>').appendTo(document.body).kendoWindow(e.extend({},this.editor.options.dialogOptions,{title:"Insert link",close:n})).hide().find(".k-dialog-insert").click(t).end().find(".k-dialog-close").click(n).end().find(".k-form-text-row input").keydown(function(e){13==e.keyCode?t(e):27==e.keyCode&&n(e)}).end().find("#k-editor-link-url").val(c?c.getAttribute("href",2):"http://").end().find("#k-editor-link-text").val(a.length>0?1==a.length?a[0].nodeValue:a[0].nodeValue+a[1].nodeValue:"").end().find("#k-editor-link-title").val(c?c.title:"").end().find("#k-editor-link-target").attr("checked",!!c&&"_blank"==c.target).end().show().data("kendoWindow").center();u&&a.length>0&&(l=e("#k-editor-link-text",p.element).val()),e("#k-editor-link-url",p.element).focus().select()},redo:function(){var e=this,t=e.lockRange(!0);e.formatter.apply(t,e.attributes),e.releaseRange(t)}}),_=c.extend({init:function(t){this.options=t,this.finder=new f([{tags:["a"]}]),c.fn.init.call(this,e.extend(t,{command:k}))},initialize:function(e){e.attr("unselectable","on").addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});r(n.ui.editor,{LinkFormatFinder:m,LinkFormatter:v,UnlinkCommand:k,LinkCommand:b,UnlinkTool:_}),g("createLink",new c({key:"K",ctrl:!0,command:b,template:new u({template:l.buttonTemplate,title:"Create Link"})})),g("unlink",new _({key:"K",ctrl:!0,shift:!0,template:new u({template:l.buttonTemplate,title:"Remove Link"})}))}(jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,a=r.EditorUtils,o=r.Dom,s=a.registerTool,l=r.ToolTemplate,d=r.RangeUtils,c=r.Command,u=n.keys,p="#k-editor-image-url",f="#k-editor-image-title",h=c.extend({init:function(e){var t=this;c.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n=this.attributes;if(n.src&&"http://"!=n.src){if(!e)return e=o.create(d.documentFromRange(t),"img",n),e.onload=e.onerror=function(){e.removeAttribute("complete"),e.removeAttribute("width"),e.removeAttribute("height")},t.deleteContents(),t.insertNode(e),t.setStartAfter(e),t.setEndAfter(e),d.selectRange(t),!0;o.attr(e,n)}return!1},redo:function(){var e=this,t=e.lockRange();e.insertImage(d.image(t),t)||e.releaseRange(t)},exec:function(){function t(t){a.attributes={src:e(p,r.element).val(),alt:e(f,r.element).val()},l=a.insertImage(c,s),n(t),a.change&&a.change()}function n(e){e.preventDefault(),r.destroy(),o.windowFromDocument(d.documentFromRange(s)).focus(),l||a.releaseRange(s)}var r,a=this,s=a.lockRange(),l=!1,c=d.image(s);r=e('<div class="k-editor-dialog"><ol><li class="k-form-text-row"><label for="k-editor-image-url">Web address</label><input type="text" class="k-input" id="k-editor-image-url"/></li><li class="k-form-text-row"><label for="k-editor-image-title">Tooltip</label><input type="text" class="k-input" id="k-editor-image-title"/></li></ol><div class="k-button-wrapper"><button class="k-dialog-insert k-button">Insert</button>&nbsp;or&nbsp;<a href="#" class="k-dialog-close k-link">Close</a></div></div>').appendTo(document.body).kendoWindow(i({},a.editor.options.dialogOptions,{title:"Insert Image",close:n,activate:function(){}})).hide().find(".k-dialog-insert").click(t).end().find(".k-dialog-close").click(n).end().find(".k-form-text-row input").keydown(function(e){e.keyCode==u.ENTER?t(e):e.keyCode==u.ESC&&n(e)}).end().find(p).val(c?c.getAttribute("src",2):"http://").end().find(f).val(c?c.alt:"").end().show().data("kendoWindow").center(),e(p,r.element).focus().select()}});n.ui.editor.ImageCommand=h,s("insertImage",new r.Tool({command:h,template:new l({template:a.buttonTemplate,title:"Insert Image"})}))}(jQuery),function(e,t){var n=window.kendo,i=n.ui.Widget,r=n.ui.DropDownList,a=n.ui.editor.Dom,o=n.keys,s=n.template('<div class="k-colorpicker-popup"><ul class="k-reset"># for(var i = 0; i < colors.length; i++) { #<li class="k-item #= colors[i] == value ? "k-state-selected" : "" #"><div style="background-color:\\##= colors[i] #"></div></li># } #</ul></div>'),l=i.extend({init:function(t,n){var r=this;i.fn.init.call(r,t,n),t=r.element,n=r.options,r._value=n.value,r.popup=e(s({colors:n.colors,value:n.value.substring(1)})).kendoPopup({anchor:t,toggleTarget:t.find(".k-icon")}).delegate(".k-item","click",function(t){r.select(e(t.currentTarget).find("div").css("background-color"))}).find("*").attr("unselectable","on").end().data("kendoPopup"),t.attr("tabIndex",0).keydown(function(e){r.keydown(e)}).focus(function(){t.css("outline","1px dotted #000")}).blur(function(){t.css("outline","")}).delegate(".k-tool-icon","click",function(){r.select()}).find("*").attr("unselectable","on"),r._value&&t.find(".k-selected-color").css("background-color",r._value)},options:{name:"ColorPicker",colors:"000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7".split(","),value:null},events:["change"],select:function(e){var t=this;e?(e=a.toHex(e),t.trigger("change",{value:e})||(t.value(e),t.close())):t.trigger("change",{value:t._value})},open:function(){this.popup.open()},close:function(){this.popup.close()},toggle:function(){this.popup.toggle()},keydown:function(e){var t,n,i,r=this,a=r.popup.element,s=r.popup.visible(),l=!1,d=e.keyCode;d==o.DOWN?(s?(n=(t=a.find(".k-state-selected"))[0]?t.next():a.find("li:first"))[0]&&(t.removeClass("k-state-selected"),n.addClass("k-state-selected")):r.open(),l=!0):d==o.UP?(s&&(i=(t=a.find(".k-state-selected")).prev())[0]&&(t.removeClass("k-state-selected"),i.addClass("k-state-selected")),l=!0):d==o.TAB||d==o.RIGHT||d==o.LEFT?r.close():d==o.ENTER&&(a.find(".k-state-selected").click(),l=!0),l&&e.preventDefault()},value:function(e){var t=this;if(void 0===e)return t._value;e=a.toHex(e),t._value=e,t.element.find(".k-selected-color").css("background-color",e)}}),d=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n.value(n.options.title)},options:{name:"SelectBox"},value:function(e){var t=this,n=r.fn.value.call(t,e);if(void 0===e)return n;e!==r.fn.value.call(t)&&(t.text(t.options.title),t._current.removeClass("k-state-selected"),t.current(null),t._oldIndex=t.selectedIndex=-1)}});n.ui.editor.ColorPicker=l,n.ui.editor.SelectBox=d}(jQuery),function(e,t){function n(e,n){var i="td"!=s.name(e)?"marginLeft":"paddingLeft";if(n===t)return e.style[i]||0;n>0?e.style[i]=n+"px":(e.style[i]="",e.style.cssText||e.removeAttribute("style"))}var i=window.kendo,r=i.Class,a=e.extend,o=i.ui.editor,s=o.Dom,l=o.EditorUtils,d=l.registerTool,c=o.Command,u=o.Tool,p=o.ToolTemplate,f=o.RangeUtils,h=s.blockElements,g=o.BlockFormatFinder,m=o.BlockFormatter,v=r.extend({init:function(){this.finder=new g([{tags:s.blockElements}])},apply:function(t){var i,r,a,o,l,d=this.finder.findSuitable(t),c=[];if(d.length){for(i=0,r=d.length;i<r;i++)s.is(d[i],"li")?e(d[i]).index()?e.inArray(d[i].parentNode,c)<0&&c.push(d[i]):c.push(d[i].parentNode):c.push(d[i]);for(;c.length;)if(a=c.shift(),s.is(a,"li")){o=a.parentNode;var u=(l=e(a).prev("li")).find("ul,ol").last(),p=e(a).children("ul,ol")[0];if(p&&l[0])u[0]?(u.append(a),u.append(e(p).children()),s.remove(p)):(l.append(p),p.insertBefore(a,p.firstChild));else for((p=l.children("ul,ol")[0])||(p=s.create(a.ownerDocument,s.name(o)),l.append(p));a&&a.parentNode==o;)p.appendChild(a),a=c.shift()}else{n(a,parseInt(n(a),10)+30);for(var f=0;f<c.length;f++)e.contains(a,c[f])&&c.splice(f,1)}}else new m([{tags:"p"}],{style:{marginLeft:30}}).apply(t)},remove:function(t){var i,r,a,o,s,l,d,c=this.finder.findSuitable(t);for(r=0,a=c.length;r<a;r++){if((d=e(c[r])).is("li")){if(o=d.parent(),(s=o.parent()).is("li,ul,ol")&&!n(o[0])){if(i&&e.contains(i,s[0]))continue;(l=d.nextAll("li")).length&&e(o[0].cloneNode(!1)).appendTo(d).append(l),s.is("li")?d.insertAfter(s):d.appendTo(s),o.children("li").length||o.remove();continue}if(i==o[0])continue;i=o[0]}else i=c[r];n(i,parseInt(n(i),10)-30)}}}),k=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).apply(f.nodes(e))}},c.fn.init.call(this,e)}}),b=c.extend({init:function(e){e.formatter={toggle:function(e){(new v).remove(f.nodes(e))}},c.fn.init.call(this,e)}}),_=u.extend({init:function(e){u.fn.init.call(this,a(e,{command:b})),this.finder=new g([{tags:h}])},initialize:function(e){e.attr("unselectable","on").addClass("k-state-disabled")},update:function(t,i){var r,a,o,l,d=this.finder.findSuitable(i);for(o=0,l=d.length;o<l;o++)if((r=n(d[o]))||(a=e(d[o]).parents("ul,ol").length,r=s.is(d[o],"li")&&(a>1||n(d[o].parentNode))||s.ofType(d[o],["ul","ol"])&&a>0),r)return void t.removeClass("k-state-disabled");t.addClass("k-state-disabled").removeClass("k-state-hover")}});a(o,{IndentFormatter:v,IndentCommand:k,OutdentCommand:b,OutdentTool:_}),d("indent",new u({command:k,template:new p({template:l.buttonTemplate,title:"Indent"})})),d("outdent",new _({template:new p({template:l.buttonTemplate,title:"Outdent"})}))}(jQuery),function(e,t){var n=window.kendo,i=e.extend,r=n.ui.editor,a=r.Dom,o=r.RangeUtils,s=r.EditorUtils,l=r.Command,d=r.Tool,c=r.ToolTemplate,u=l.extend({init:function(e){var t=this;t.options=e,l.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function t(e){e.preventDefault(),l.data("kendoWindow").destroy(),a.windowFromDocument(o.documentFromRange(s)).focus()}var n=this,r=n.editor,s=r.getRange(),l=e(u.template).appendTo(document.body),d=u.indent(r.value()),c=".k-editor-textarea";l.kendoWindow(i({},r.options.dialogOptions,{title:"View HTML",close:t})).hide().find(c).val(d).end().find(".k-dialog-update").click(function(e){r.value(l.find(c).val()),t(e),n.change&&n.change()}).end().find(".k-dialog-close").click(t).end().show().data("kendoWindow").center(),l.find(c).focus()}});i(u,{template:"<div class='k-editor-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-button-wrapper'><button class='k-dialog-update k-button'>Update</button>&nbsp;or&nbsp;<a href='#' class='k-dialog-close k-link'>Close</a></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}),n.ui.editor.ViewHtmlCommand=u,r.EditorUtils.registerTool("viewHtml",new d({command:u,template:new c({template:s.buttonTemplate,title:"View HTML"})}))}(jQuery),function(e){var t=window.kendo,n=t.Class,i=e.extend,r=t.ui.editor,a=r.RangeUtils,o=r.Marker,s=n.extend({init:function(e){this.editor=e,this.formats=[]},apply:function(e){if(this.hasPending()){var t=new o;t.addCaret(e);var n=e.startContainer.childNodes[e.startOffset].previousSibling;if(n.nodeValue||(n=n.previousSibling),e.setStart(n,n.nodeValue.length-1),t.add(e),!a.textNodes(e).length)return t.remove(e),e.collapse(!0),void this.editor.selectRange(e);for(var r,s=t.end.previousSibling.previousSibling,l=this.formats,d=0;d<l.length;d++){var c=(r=l[d]).command(i({range:e},r.options.params));c.editor=this.editor,c.exec(),e.selectNode(s)}t.remove(e),s.parentNode&&(e.setStart(s,1),e.collapse(!0)),this.clear(),this.editor.selectRange(e)}},hasPending:function(){return this.formats.length>0},isPending:function(e){return!!this.getPending(e)},getPending:function(e){for(var t=this.formats,n=0;n<t.length;n++)if(t[n].name==e)return t[n]},toggle:function(e){for(var t=this.formats,n=0;n<t.length;n++)if(t[n].name==e.name)return void(t[n].params&&t[n].params.value!=e.params.value?t[n].params.value=e.params.value:t.splice(n,1));t.push(e)},clear:function(){this.formats=[]}});i(r,{PendingFormats:s})}(jQuery),function(e,t){function n(n,i){var r,a=i!==t;if(document.selection)if(e(n).is(":visible")&&n.focus(),r=document.selection.createRange(),a)r.move("character",i),r.select();else{var o=n.createTextRange(),s=o.duplicate();o.moveToBookmark(r.getBookmark()),s.setEndPoint("EndToStart",o),i=s.text.length}else n.selectionStart!==t&&(a?(n.focus(),n.setSelectionRange(i,i)):i=n.selectionStart);return i}var i=window.kendo,r=i.keys,a=i.ui,o=a.Widget,s=i.parseFloat,l=i.support.placeholder,d=i.support.touch,c=i.getCulture,u=d?"number":"text",p=e.proxy,f={190:".",188:","},h=o.extend({init:function(e,n){var r=this,a=n&&n[d]!==t,s=n&&n[d]!==t,l=n&&n[d]!==t,d=n&&n[d]!==t,c=n&&n[d]!==t,u=n&&n[d]!==t;if(width=n&&n[d]!==t,o.fn.init.call(r,e,n),(n=r.options).wrap&&((e=r.element.addClass("k-input").css("width",n.width).bind({keydown:p(r._keydown,r),paste:p(r._paste,r),blur:p(r._focusout,r)})).closest("form").bind("reset",function(){setTimeout(function(){r.value(e[0].value)})}),n.placeholder=n.placeholder||e.attr("placeholder"),r._wrapper(),r._input(),r._text.focus(p(r._click,r)),s=e.attr("min")||"0",l=e.attr("max"),d=r._parse(e.attr("step"),n.defaultCulture),c=r._parse(e.attr("value"),n.defaultCulture),null===n.min&&null!==s&&(n.min=s),null===n.max&&null!==l&&(n.max=l),null===n.value&&null!==c&&(n.value=c),a||null===d||(n.step=d)),"{0:"===(u=n.format).slice(0,3)&&(n.format=u.slice(3,u.length-1)),n.wrap)r.enable(!e.is("[disabled]")),r._toggleText(!0),r._change(c);else{var f=r.element.text();f!=t&&""!=f?r.element.text(i.toString(parseFloat(r._parse(f,n.defaultCulture)),n.format,n.culture)):r.element.text(i.toString(parseFloat(r._parse("0",n.defaultCulture)),n.format,n.culture))}i.notify(r)},options:{name:"NumericTextBox",decimals:null,min:0,max:null,value:null,step:1,culture:"",format:"n0",spinners:!1,placeholder:"",upArrowText:"Increase value",downArrowText:"Decrease value",wrap:!0,defaultCulture:"in-IN"},events:["change","spin"],enable:function(e){var t=this,n=t._text.add(t.element),i=t._inputWrapper.unbind("mouseenter mouseleave");t._toggleText(!0),!1===e?(i.removeClass("k-state-default").addClass("k-state-disabled"),n.attr("disabled","disabled")):(i.addClass("k-state-default").removeClass("k-state-disabled").bind("mouseenter mouseleave",t._toggleHover),n.removeAttr("disabled"))},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},step:function(e){return this._option("step",e)},value:function(e){var n,i=this;return e===t?i._value:(e=i._parse(e),n=i._adjust(e),e!==n?(i._text.val(i.options.placeholder),void i._text.css("color","gray")):(i._update(e),void(i._old=i._value)))},text:function(){alert("test")},_adjust:function(e){var t=this.options,n=t.min,i=t.max;return null===e?e:(null!==n&&e<n?e=n:null!==i&&e>i&&(e=i),e)},_blur:function(){var e=this;e._toggleText(!0),e._change(e.element.val())},_click:function(e){var t=this;clearTimeout(t._focusing),t._focusing=setTimeout(function(){var i=e.target,r=n(i),a=i.value.substring(0,r),o=t._format(t.options.format),s=(o[","],new RegExp("([\\d]+)(\\"+o["."]+")?(\\d+)?").exec(a)),l=0;s&&(l=s[0].replace("","").length,-1!=a.indexOf("(")&&t._value<0&&l++),t._focusin(),n(t.element[0],l)})},_change:function(e){var t=this;t._update(e),e=t._value,t._old!=e&&(t._old=e,t.trigger("change"),t.element.trigger("change"))},_culture:function(e){return e||c(this.options.culture)},_focusin:function(){this._toggleText(!1)},_focusout:function(){var e=this;clearTimeout(e._focusing),e._inputWrapper.removeClass("k-state-focused"),e._blur()},_format:function(e,t){var n=this._culture(t).numberFormat;return e=e.toLowerCase(),e.indexOf("c")>-1?n=n.currency:e.indexOf("p")>-1&&(n=n.percent),n},_input:function(){var n,i=this,r=i.element.show()[0],a=i.wrapper;if(!(n=a.find("div:eq(0)").hasClass("k-filter-help-text")?a.find(".k-formatted-valuedummy"):a.find(".k-formatted-value"))[0]){e(r).attr("data-valid"),e(r).attr("data-valid-msg");var o=e(r).attr("tabIndex"),s=e(r).attr("recname");n=e("<input id='_temp"+r.name+"' name='_temp"+r.name+"' tabIndex='"+o+"'"+(s==t?"":" recname='"+s+"'")+"  autocomplete='off'/>").insertBefore(r).addClass("k-formatted-value")}r.type=u,n[0].type="text",n[0].style.cssText=r.style.cssText,n.attr("placeholder",i.options.placeholder),i._text=n.attr("readonly",!0).addClass(r.className)},_keydown:function(e){var t=this,n=e.keyCode;n==r.ENTER&&t._change(t.element.val()),t._prevent(n)&&!e.ctrlKey?e.preventDefault():e.shiftKey&&9!=n&&e.preventDefault()},_paste:function(e){var t=this,n=e.target,i=n.value;setTimeout(function(){null===t._parse(n.value)&&t._update(i)})},_prevent:function(e){var t,i=this,a=i.element[0],o=a.value,s=i.options,l=s.min,d=i._format(s.format),c=d["."],u=s.decimals,p=n(a),h=!0;return null===u&&(u=d.decimals),e>16&&e<21||e>32&&e<37||e>47&&e<58||e>95&&e<106||e==r.INSERT||e==r.DELETE||e==r.LEFT||e==r.RIGHT||e==r.TAB||e==r.BACKSPACE||e==r.ENTER?h=!1:f[e]===c&&u>0&&-1==o.indexOf(c)?h=!1:!(null===l||l<0)||-1!=o.indexOf("-")||189!=e&&109!=e||0!==p?110==e&&u>0&&-1==o.indexOf(c)&&(t=o.substring(p),a.value=o.substring(0,p)+c+t):h=!1,h},_option:function(e,n){var i=this,r=i.options;if(n===t)return r[e];((n=i._parse(n))||"step"!==e)&&(r[e]=i._parse(n))},_spin:function(e,t){var n=this;t=t||500,clearTimeout(n._spinning),n._spinning=setTimeout(function(){n._spin(e,50)},t),n._step(e)},_step:function(e){var t=this,n=t.element,i=t._parse(n.val())||0;document.activeElement!=n[0]&&t._focusin(),i+=t.options.step*e,t._update(t._adjust(i)),t.trigger("spin")},_toggleHover:function(e){},_toggleText:function(e){var t=this;e=!!e,t._text.toggle(e),t.element.toggle(!e)},_parse:function(e,t){return s(e,this._culture(t),this.options.format)},_update:function(e){var t,n=this,r=n.options,a=r.format,o=r.decimals,s=n._culture(),l=n._format(a,s);null===o&&(o=l.decimals),(t=null!==(e=n._parse(e,s)))&&(e=parseFloat(e.toFixed(o))),n._value=e=n._adjust(e),n._placeholder(i.toString(e,a,s)),n.element.val(t?e.toString().replace(".",l["."]):"")},_placeholder:function(e){this._text.val(e),l||e||this._text.val(this.options.placeholder)},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-numerictextbox")).is("span.k-numerictextbox")||(t=i.parent()),n.wrapper=t.show(),n._inputWrapper=e(t[0].firstChild)}});a.plugin(h)}(jQuery),function(e,t){function n(e,t){return(e=e.split(" ")[!t+0]||e).replace("top","up").replace("bottom","down")}function i(e,t){e=e.split(" ")[!t+0]||e;var n={origin:["bottom","left"],position:["top","left"]};return/left|right/.test(e)?(n.origin=["top",e],n.position[1]=l.directions[e].reverse):(n.origin[0]=e,n.position[0]=l.directions[e].reverse),n.origin=n.origin.join(" "),n.position=n.position.join(" "),n}function r(t,n){try{return e.contains(t,n)}catch(e){return!1}}function a(t){(t=e(t)).addClass("k-item").children(v).addClass(x),t.children("a").addClass(b).children(v).addClass(x),t.filter(":not([disabled])").addClass(C),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(T).removeAttr("disabled"),t.children("a").filter(":focus").parent().addClass("k-state-active"),t.children("."+b).length||t.contents().filter(function(){return!(this.nodeName.match(m)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+b+"'/>"),o(t),s(t)}function o(t){(t=e(t)).find(".k-icon").remove(),t.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(k+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function s(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(y),t.filter(".k-last:not(:last-child)").removeClass(_),t.filter(":first-child").addClass(y),t.filter(":last-child").addClass(_)}var l=window.kendo,d=l.ui,c=l.support.touch,u=e.extend,p=e.proxy,f=e.each,h=l.template,g=d.Widget,m=/^(ul|a|div)$/i,v="img",k="k-menu",b="k-link",_="k-last",w=c?"touchend":"click",y="k-first",x="k-image",C="k-state-default",T="k-state-disabled",S=":not(.k-list) > .k-item",F=".k-item:not(.k-state-disabled)",D=".k-item:not(.k-state-disabled) > .k-link",A={content:h("<div class='k-content k-group'>#= content(item) #</div>"),group:h("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:h("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:h("<li class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } #</li>"),image:h("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:h("<span class='#= arrowClass(item, group) #'></span>"),sprite:h("<span class='k-sprite #= spriteCssClass #'></span>"),empty:h("")},H={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return!1===t.enabled?n+=" k-state-disabled":n+=" k-state-default",e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textClass:function(e){return b},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return t.horizontal?n+=" k-i-arrow-s":n+=" k-i-arrow-e",n},text:function(e){return!1===e.encoded?e.text:l.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(e){return"k-group"},content:function(e){return e.content?e.content:"&nbsp;"}},I=g.extend({init:function(t,n){var i=this;g.fn.init.call(i,t,n),t=i.wrapper=i.element,(n=i.options).dataSource&&(i.element.empty(),i.append(n.dataSource,t)),i._updateClasses(),!1===n.animation&&(n.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),i.nextItemZIndex=100,t.delegate(".k-item.k-state-disabled",w,!1).delegate(F,w,p(i._click,i)),c?(n.openOnClick=!0,t.delegate(D,"touchstart touchend",i._toggleHover)):t.delegate(F,"mouseenter",p(i._mouseenter,i)).delegate(F,"mouseleave",p(i._mouseleave,i)).delegate(D,"mouseenter mouseleave",i._toggleHover),n.openOnClick&&(i.clicked=!1,e(document).click(p(i._documentClick,i))),l.notify(i)},events:["open","close","select"],options:{name:"Menu",animation:{open:{duration:200,show:!0},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.length?n.find("> .k-group, .k-animation-container > .k-group"):null);return f(i.items,function(t){i.group.append(this);var n=i.contents[t];n&&e(this).append(n),o(this)}),o(n),s(i.group.find(".k-first, .k-last").add(i.items)),this},insertBefore:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.parent());return f(i.items,function(t){n.before(this);var r=i.contents[t];r&&e(this).append(r),o(this),s(this)}),s(n),this},insertAfter:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.parent());return f(i.items,function(t){n.after(this);var r=i.contents[t];r&&e(this).append(r),o(this),s(this)}),s(n),this},_insert:function(t,n,i){var r,o,s=this,l=[];n&&n.length||(i=s.element);var d=e.isPlainObject(t),c={firstLevel:i.hasClass(k),horizontal:i.hasClass(k+"-horizontal"),expanded:!0,length:i.children().length};return n&&!i.length&&(i=e(I.renderGroup({group:c})).appendTo(n)),d||e.isArray(t)?(r=e.map(d?[t]:t,function(t,n){return e("string"==typeof t?t:I.renderItem({group:c,item:u(t,{index:n})}))}),l=e.map(d?[t]:t,function(t,n){return!(!t.content&&!t.contentUrl)&&e(I.renderContent({item:u(t,{index:n})}))})):(o=(r=e(t)).find("> ul").addClass("k-group"),(r=r.filter("li")).add(o.find("> li")).each(function(){a(this)})),{items:r,group:i,contents:l}},remove:function(e){var t=this,n=(e=this.element.find(e)).parentsUntil(t.element,S),i=e.parent("ul");if(e.remove(),i&&!i.children(S).length){var r=i.parent(".k-animation-container");r.length?r.remove():i.remove()}return n.length&&(o(n=n.eq(0)),s(n)),t},open:function(t){var r=this,a=r.options,o="horizontal"==a.orientation,s=a.direction;return t=r.element.find(t),/^(top|bottom|default)$/.test(s)&&(s=o?(s+" right").replace("default","bottom"):"right"),t.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),t.each(function(){var t=e(this);clearTimeout(t.data("timer")),t.data("timer",setTimeout(function(){var e,l=t.find(".k-group:first:hidden");if(l[0]&&!1===r.trigger("open",{item:t[0]})){t.data("zIndex",t.css("zIndex")),t.css("zIndex",r.nextItemZIndex++),e=l.data("kendoPopup");var d=t.parent().hasClass(k),c=d&&o,p=i(s,d),f=a.animation.open.effects,h=void 0!==f?f:"slideIn:"+n(s,d);e?((e=l.data("kendoPopup")).options.origin=p.origin,e.options.position=p.position,e.options.animation.open.effects=h):e=l.kendoPopup({origin:p.origin,position:p.position,collision:void 0!==a.popupCollision?a.popupCollision:c?"fit":"fit flip",anchor:t,appendTo:t,animation:{open:u(!0,{effects:h},a.animation.open),close:a.animation.close},close:function(e){var t=e.sender.wrapper.parent();!1===r.trigger("close",{item:t[0]})?(t.css("zIndex",t.data("zIndex")),t.removeData("zIndex")):e.preventDefault()}}).data("kendoPopup"),e.open()}},r.options.hoverDelay))}),r},close:function(t){var n=this;return(t=n.element.find(t))[0]||(t=n.element.find(">.k-item")),t.each(function(){var t=e(this);clearTimeout(t.data("timer")),t.data("timer",setTimeout(function(){var e=t.find(".k-group:first:visible");e[0]&&e.data("kendoPopup").close()},n.options.hoverDelay))}),n},_toggleDisabled:function(t,n){(t=this.element.find(t)).each(function(){e(this).toggleClass(C,n).toggleClass(T,!n)})},_toggleHover:function(t){var n=e(l.eventTarget(t)).closest(S);n.parents("li."+T).length||n.toggleClass("k-state-hover","mouseenter"==t.type||"touchstart"==t.type)},_updateClasses:function(){var e=this;e.element.addClass("k-widget k-reset k-header "+k).addClass(k+"-"+e.options.orientation),e.element.find("li > ul").addClass("k-group").end().find("> li,.k-group > li").each(function(){a(this)})},_mouseenter:function(t){var n=this,i=e(t.currentTarget),a=i.children(".k-animation-container").length||i.children(".k-group").length;t.delegateTarget==i.parents(".k-menu")[0]&&(n.options.openOnClick&&!n.clicked||!r(t.currentTarget,t.relatedTarget)&&a&&n.open(i),n.options.openOnClick&&n.clicked&&i.siblings().each(p(function(e,t){n.close(t)},n)))},_mouseleave:function(t){var n=this,i=e(t.currentTarget),a=i.children(".k-animation-container").length||i.children(".k-group").length;i.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]?t.stopImmediatePropagation():n.options.openOnClick||r(t.currentTarget,t.relatedTarget)||!a||n.close(i)},_click:function(t){var n,i=this,r=e(l.eventTarget(t)),a=r.closest("."+b),o=a.attr("href"),s=r.closest(S),d=!!o&&"#"!=o.charAt(o.length-1);s.children("div:not(.k-animation-container,.k-list-container)")[0]||(s.hasClass(T)?t.preventDefault():(c&&s.siblings().each(p(function(e,t){i.close(t)},i)),!t.handled&&i.trigger("select",{item:s[0]})&&t.preventDefault(),t.handled=!0,!i.options.closeOnClick||o&&o.length>0||s.children(".k-group,.k-animation-container").length||i.close(a.parentsUntil(i.element,S)),(s.parent().hasClass(k)&&i.options.openOnClick||c)&&(d||t.preventDefault(),i.clicked=!0,n=s.children(".k-animation-container, .k-group").is(":visible")?"close":"open",i[n](s))))},_documentClick:function(e){var t=this;r(t.element[0],e.target)||(t.clicked=!1)}});u(I,{renderItem:function(e){e=u({menu:{},group:{}},e);var t=A.empty,n=e.item;return A.item(u(e,{image:n.imageUrl?A.image:t,sprite:n.spriteCssClass?A.sprite:t,itemWrapper:A.itemWrapper,arrow:n.items||n.content?A.arrow:t,subGroup:I.renderGroup},H))},renderGroup:function(e){return A.group(u({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,a=u({length:r},e.group);n<r;n++)t+=I.renderItem(u(e,{group:a,item:u({index:n},i[n])}));return t}},e,H))},renderContent:function(e){return A.content(u(e,H))}}),l.ui.plugin(I)}(jQuery),function(e,t){function n(t){return(t=null!=t?t:"").type||e.type(t)||"string"}function i(t){t.find(":input:not(:button, ["+o.attr("role")+"=upload], ["+o.attr("skip")+"]), select").each(function(){var t=o.attr("bind"),n=this.getAttribute(t)||"",i="checkbox"===this.type?"checked:":"value:",r=this.name;-1===n.indexOf(i)&&r&&(n+=(n.length?",":"")+i+r,e(this).attr(t,n))})}function r(e){var t,i,r=(e.model.fields||e.model)[e.field],a=n(r),s=r?r.validation:{},l=o.attr("type"),d=o.attr("bind"),h={name:e.field};for(t in s)i=s[t],p(t,f)>=0?h[l]=t:c(i)||(h[t]=u(i)?i.value||t:i),h[o.attr(t+"-msg")]=i.message;return p(a,f)>=0&&(h[l]=a),h[d]=("boolean"===a?"checked:":"value:")+e.field,h}function a(e){var t,n,i,r,a,o;if(e&&e.length)for(o=[],t=0,n=e.length;t<n;t++)a=(i=e[t]).text||i.value||i,r=null==i.value?i.text||i:i.value,o[t]={text:a,value:r};return o}var o=window.kendo,s=o.ui,l=s.Widget,d=e.extend,c=e.isFunction,u=e.isPlainObject,p=e.inArray,f=["url","email","number","date","boolean"],h={number:function(t,n){var i=r(n);e('<input type="text"/>').attr(i).appendTo(t).kendoNumericTextBox({format:n.format}),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},date:function(t,n){var i=r(n);i[o.attr("format")]=n.format,e('<input type="text"/>').attr(i).appendTo(t).kendoDatePicker({format:n.format}),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},string:function(t,n){var i=r(n);e('<input type="text" class="k-input k-textbox"/>').attr(i).appendTo(t)},boolean:function(t,n){var i=r(n);e('<input type="checkbox" />').attr(i).appendTo(t)},values:function(t,n){var i=r(n);e("<select "+o.attr("text-field")+'="text"'+o.attr("value-field")+'="value"'+o.attr("source")+"='"+o.stringify(a(n.values))+"'"+o.attr("role")+'="dropdownlist"/>').attr(i).appendTo(t),e("<span "+o.attr("for")+'="'+n.field+'" class="k-invalid-msg"/>').hide().appendTo(t)}},g=l.extend({init:function(t,n){var i=this;l.fn.init.call(i,t,n),i._validateProxy=e.proxy(i._validate,i),i.refresh()},events:["change"],options:{name:"Editable",editors:h,clearContainer:!0,errorTemplate:'<div class="k-widget k-tooltip k-tooltip-validation" style="margin:0.5em"><span class="k-icon k-warning"> </span>${message}<div class="k-callout k-callout-n"></div></div>'},editor:function(e,t){var i=this,r=i.options.editors,a=u(e),o=a?e.field:e,s=i.options.model||{},l=a&&e.values?"values":n(t),c=a&&e.editor,p=c?e.editor:r[l],f=i.element.find("[data-container-for="+o+"]");p=p||r.string,c&&"string"==typeof e.editor&&(p=function(t){t.append(e.editor)}),p(f=f.length?f:i.element,d(!0,{},a?e:{field:o},{model:s}))},_validate:function(t){var n,i=this,r="boolean"==typeof t.value,a=i._validationEventInProgress,s={};s[t.field]=t.value,n=e(":input["+o.attr("bind")+'="'+(r?"checked:":"value:")+t.field+'"]',i.element);try{i._validationEventInProgress=!0,(!i.validatable.validateInput(n)||!a&&i.trigger("change",{values:s}))&&t.preventDefault()}finally{i._validationEventInProgress=!1}},end:function(){return this.validatable.validate()},destroy:function(){this.options.model.unbind("set",this._validateProxy),o.unbind(this.element),this.element.removeData("kendoValidator").removeData("kendoEditable")},refresh:function(){var t,n,r=this,a=r.options.fields||[],s=r.options.clearContainer?r.element.empty():r.element,l=r.options.model||{},d={};for(e.isArray(a)||(a=[a]),t=0,n=a.length;t<n;t++){var p=a[t],f=u(p)?p.field:p,h=(l.fields||l)[f],g=h?h.validation||{}:{};for(var m in g)c(g[m])&&(d[m]=g[m]);r.editor(p,h)}i(s),o.bind(s,r.options.model),r.options.model.bind("set",r._validateProxy),r.validatable=s.kendoValidator({validateOnBlur:!1,errorTemplate:r.options.errorTemplate||void 0,rules:d}).data("kendoValidator"),s.find(":input:visible:first").focus()}});s.plugin(g)}(jQuery),function(e,t){function n(t,i){t.filters&&(t.filters=e.grep(t.filters,function(e){return n(e,i),e.filters?e.filters.length:e.field!=i}))}function i(e){var t,n,i,r,a,o;if(e&&e.length)for(o=[],t=0,n=e.length;t<n;t++)a=(i=e[t]).text||i.value||i,r=null==i.value?i.text||i:i.value,o[t]={text:a,value:r};return o}var r=window.kendo,a=r.ui,o=e.proxy,s="kendoPopup",l="Is equal to",d="Is not equal to",c=a.Widget,u=c.extend({init:function(t,n){var a,l,d,u=this,p="string";c.fn.init.call(u,t,n),d=n.operators||{},t=u.element,(n=u.options).appendToElement?u.link=e():((a=t.addClass("k-filterable").find(".k-grid-filter"))[0]||(a=t.prepend('<a class="k-grid-filter"  href="#"><span  class="k-icon k-filter"/></a>').find(".k-grid-filter")),u._clickHandler=o(u._click,u),a.click(u._clickHandler)),u.dataSource=n.dataSource.bind("change",o(u.refresh,u)),u.field=n.field||t.attr(r.attr("field")),u.model=u.dataSource.reader.model,u._parse=function(e){return e+""},u.model&&u.model.fields&&(l=u.model.fields[u.field])&&(p=l.type||"string",u._parse=o(l.parse,l)),n.values&&(p="enums"),d=d[p]||n.operators[p],u.form=e('<form class="k-filter-menu"/>'),u.form.html(r.template("boolean"===p?'<div><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><button type="submit" class="k-button">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div>':'<div><div class="k-filter-help-text">#=messages.info#</div><select data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values)#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" data-#=ns#type="#=type#"/>#}##if(extra){#<select class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select><select data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values)#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#"></select>#}else{#<input data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" data-#=ns#type="#=type#"/>#}##}#<button type="submit" class="k-button">#=messages.filter#</button><button type="reset" class="k-button">#=messages.clear#</button></div>')({field:u.field,ns:r.ns,messages:n.messages,extra:n.extra,operators:d,type:p,values:i(n.values)})),n.appendToElement?(t.append(u.form),u.popup=u.element.closest(".k-popup").data(s)):(u.popup=u.form[s]({anchor:a,open:o(u._open,u)}).data(s),u.link=a),u.form.bind({submit:o(u._submit,u),reset:o(u._reset,u)}).find("["+r.attr("type")+"=number]").removeClass("k-textbox").kendoNumericTextBox().end().find("["+r.attr("type")+"=date]").removeClass("k-textbox").kendoDatePicker(),u.refresh()},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"};e.filterModel=r.observable({logic:"and",filters:[{field:e.field,operator:"contains",value:""},{field:e.field,operator:"contains",value:""}]}),r.bind(e.form,e.filterModel),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},destroy:function(){r.unbind(this.form),this.form.remove(),this.form.removeData(s),this.link.unbind("click",this._clickHandler),this.element.removeData("kendoFilterMenu")},_bind:function(e){var t,n,i,r,a=this,o=e.filters,s=!1,l=0,d=a.filterModel;for(t=0,n=o.length;t<n;t++)(r=o[t]).field==a.field?(d.set("logic",e.logic),(i=d.filters[l]).set("value",r.value),i.set("operator",r.operator),l++,s=!0):r.filters&&(s=s||a._bind(r));return s},_merge:function(t){var i,r,a,o=this,s=t.logic||"and",l=t.filters,d=o.dataSource.filter()||{filters:[],logic:"and"};for(n(d,o.field),r=0,a=(l=e.grep(l,function(e){return""!==e.value})).length;r<a;r++)(i=l[r]).value=i.value;return l.length&&(d.filters.length?(t.filters=l,"and"!==d.logic&&(d.filters=[{logic:d.logic,filters:d.filters}],d.logic="and"),l.length>1?d.filters.push(t):d.filters.push(l[0])):(d.filters=l,d.logic=s)),d},filter:function(t){(t=this._merge(t)).filters.length&&(e(this.element).closest("div[data-role='grid']").find("a[rel='clearfilter']").show(),this.dataSource.filter(t))},clear:function(){var t=this,n=t.dataSource.filter()||{filters:[]};n.filters=e.grep(n.filters,function(n){return n.filters?(n.filters=e.grep(n.filters,function(e){return e.field!=t.field}),n.filters.length):n.field!=t.field}),n.filters.length||(n=null),e(this.element).closest("div[data-role='grid']").find("a[rel='clearfilter']").hide(),t.dataSource.filter(n)},_submit:function(t){var n=this;t.preventDefault(),n.filterModel.filters=e.map(n.filterModel.filters,function(e){return e.value instanceof Date&&(e.value=r.toString(e.value,"dd-MMM-yyyy")),e}),n.filter(n.filterModel.toJSON()),n.popup.close()},_reset:function(e){this.clear(),this.popup.close()},_click:function(t){t.preventDefault(),t.stopPropagation(),this.popup.toggle(),this.popup.visible()&&e(this.popup.element).find("input[type='text']:eq(0)").focus()},_open:function(){var t;e(".k-filter-menu").not(this.form).each(function(){(t=e(this).data(s))&&t.close()})},options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{contains:"Contains",eq:l,neq:d,startswith:"Starts with",doesnotcontain:"Does not contain",endswith:"Ends with"},number:{contains:"Contains",eq:l,neq:d,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than"},date:{eq:l,neq:d,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before"},enums:{eq:l,neq:d}},messages:{info:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-"}}});a.plugin(u)}(jQuery),function(e,t){function n(t,n){(t=e(t).addClass("k-item")).children(f).addClass(v),t.children("a").addClass(g).children(f).addClass(v),t.filter(":not([disabled]):not([class*=k-state])").addClass("k-state-default"),t.filter("li[disabled]").addClass("k-state-disabled").removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(_.substr(1)),t.find(">div").addClass(b).css({display:"none"}),t.each(function(){var t=e(this);t.children("."+g).length||t.contents().filter(function(){return!(this.nodeName.match(p)||3==this.nodeType&&!e.trim(this.nodeValue))}).wrapAll("<span class='"+g+"'/>")}),n.find(" > li > ."+g).addClass("k-header")}function i(t){(t=e(t)).children(".k-link").children(".k-icon").remove(),t.filter(":has(.k-panel),:has(.k-content)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent();t.append("<span class='k-icon "+(n.hasClass(_.substr(1))?"k-i-arrow-n k-panelbar-collapse":"k-i-arrow-s k-panelbar-expand")+"'/>")})}function r(t){(t=e(t)).filter(".k-first:not(:first-child)").removeClass(k),t.filter(".k-last:not(:last-child)").removeClass(h),t.filter(":first-child").addClass(k),t.filter(":last-child").addClass(h)}function a(e,t){e.find(D).removeClass(x.substr(1)),e.find(A).removeClass(T.substr(1)),t.addClass(x.substr(1)),t.parentsUntil(e,m).filter(":has(.k-header)").addClass(T.substr(1))}var o=window.kendo,s=o.ui,l=e.extend,d=e.each,c=o.template,u=s.Widget,p=/^(ul|a|div)$/i,f="img",h="k-last",g="k-link",m=".k-item",v="k-image",k="k-first",b="k-content",_=".k-state-active",w="> .k-panel",y="> .k-content",x=".k-state-selected",C=".k-state-disabled",T=".k-state-highlighted",S=m+":not(.k-state-disabled) .k-link",F=m+".k-state-disabled .k-link",D="> li > .k-state-selected, .k-panel > li > .k-state-selected",A="> .k-state-highlighted, .k-panel > .k-state-highlighted",H=":visible",I={content:c("<div class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),group:c("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) #>#= renderItems(data) #</ul>"),itemWrapper:c("<#= tag(item) # class='#= textClass(item, group) #'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:c("<li class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, panelBar: panelBar, group: { expanded: item.expanded } }) ## } #</li>"),image:c("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:c("<span class='#= arrowClass(item) #'></span>"),sprite:c("<span class='k-sprite #= spriteCssClass #'></span>"),empty:c("")},E={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return!1===t.enabled?n+=" k-state-disabled":!0===t.expanded?n+=" k-state-active":n+=" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textClass:function(e,t){var n=g;return t.firstLevel&&(n+=" k-header"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e){var t="k-icon";return t+=e.expanded?" k-i-arrow-n k-panelbar-collapse":" k-i-arrow-s k-panelbar-expand"},text:function(e){return!1===e.encoded?e.text:o.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(e){return"k-group k-panel"},contentAttributes:function(e){return!0!==e.item.expanded?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?o.attr("content-url")+'="'+e.contentUrl+'"':""}},z=u.extend({init:function(t,n){var i,r=this;u.fn.init.call(r,t,n),t=r.wrapper=r.element,(n=r.options).dataSource&&(r.element.empty(),r.append(n.dataSource,t)),r._updateClasses(),!1===n.animation&&(n.animation={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}}),t.delegate(S,"click",e.proxy(r._click,r)).delegate(S,"mouseenter mouseleave",r._toggleHover).delegate(F,"click",!1),n.contentUrls&&t.find("> .k-item").each(function(t,i){e(i).find("."+g).data("contentUrl",n.contentUrls[t])}),(i=t.find("li"+_+" > ."+b)).length>0&&r.expand(i.parent(),!1),o.notify(r)},events:["expand","collapse","select","activate","error","contentLoad"],options:{name:"PanelBar",animation:{expand:{effects:"expand:vertical",duration:200,show:!0},collapse:{duration:200}},expandMode:"multiple"},expand:function(t,n){var i=this,r={};return n=!1!==n,(t=this.element.find(t)).each(function(a,o){var s=(o=e(o)).find(w).add(o.find(y));if(!o.hasClass(C)&&s.length>0){if("single"==i.options.expandMode&&i._collapseAllExpanded(o))return i;t.find(T).removeClass(T.substr(1)),o.addClass(T.substr(1)),n||(r=i.options.animation,i.options.animation={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent("expand",o)||i._toggleItem(o,!1,null),n||(i.options.animation=r)}}),i},collapse:function(t,n){var i=this,r={};return n=!1!==n,(t=i.element.find(t)).each(function(t,a){var o=(a=e(a)).find(w).add(a.find(y));!a.hasClass(C)&&o.is(H)&&(a.removeClass(T.substr(1)),n||(r=i.options.animation,i.options.animation={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}}),i._triggerEvent("collapse",a)||i._toggleItem(a,!0,null),n||(i.options.animation=r))}),i},_toggleDisabled:function(e,t){(e=this.element.find(e)).toggleClass("k-state-default",t).toggleClass(C.substr(1),!t)},select:function(t){var n=this;return t=n.element.find(t),0===arguments.length?n.element.find(D).parent():(t.each(function(t,i){var r=(i=e(i)).children("."+g);if(i.is(C))return n;a(n.element,r)}),n)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(t,n){n=this.element.find(n);var a=this._insert(t,n,n.length?n.find(w):null);return d(a.items,function(t){a.group.append(this);var n=a.contents[t];n&&e(this).append(n),r(this)}),i(n),r(a.group.find(".k-first, .k-last")),a.group.height("auto"),this},insertBefore:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.parent());return d(i.items,function(t){n.before(this);var a=i.contents[t];a&&e(this).append(a),r(this)}),r(n),i.group.height("auto"),this},insertAfter:function(t,n){n=this.element.find(n);var i=this._insert(t,n,n.parent());return d(i.items,function(t){n.after(this);var a=i.contents[t];a&&e(this).append(a),r(this)}),r(n),i.group.height("auto"),this},remove:function(e){var t=this,n=(e=this.element.find(e)).parentsUntil(t.element,m),a=e.parent("ul");return e.remove(),!a||a.hasClass("k-panelbar")||a.children(m).length||a.remove(),n.length&&(i(n=n.eq(0)),r(n)),t},reload:function(t){var n=this;(t=n.element.find(t)).each(function(){var t=e(this);n._ajaxRequest(t,t.children("."+b),!t.is(H))})},_insert:function(t,i,r){var a,o=this,s=[];i&&i.length||(r=o.element);var d=e.isPlainObject(t),c={firstLevel:r.hasClass("k-panelbar"),expanded:r.parent().hasClass("k-state-active"),length:r.children().length};return i&&!r.length&&(r=e(z.renderGroup({group:c})).appendTo(i)),d||e.isArray(t)?(a=e.map(d?[t]:t,function(t,n){return e("string"==typeof t?t:z.renderItem({group:c,item:l(t,{index:n})}))}),s=e.map(d?[t]:t,function(t,n){return!(!t.content&&!t.contentUrl)&&e(z.renderContent({item:l(t,{index:n})}))})):n(a=e(t),o.element),{items:a,group:r,contents:s}},_toggleHover:function(t){var n=e(t.currentTarget);n.parents("li"+C).length||n.toggleClass("k-state-hover","mouseenter"==t.type)},_updateClasses:function(){var t=this;t.element.addClass("k-widget k-reset k-header k-panelbar");var a=t.element.find("li > ul").not(function(){return e(this).parentsUntil(".k-panelbar","div").length}).addClass("k-group k-panel").add(t.element).find("> li:not("+_+") > ul").css({display:"none"}).end().find("> li");a.each(function(){n(this,t.element)}),i(a),r(a)},_click:function(t){var n=this,i=e(t.currentTarget),r=n.element;if(!i.parents("li"+C).length&&i.closest(".k-widget")[0]==r[0]){var o=i.closest("."+g),s=o.closest(m);a(r,o);var l=s.find(w).add(s.find(y)),d=o.attr("href"),c=o.data("contentUrl")||d&&("#"==d.charAt(d.length-1)||-1!=d.indexOf("#"+n.element[0].id+"-"));if(!l.data("animating")&&(n._triggerEvent("select",s)&&t.preventDefault(),(c||l.length)&&(t.preventDefault(),("single"!=n.options.expandMode||!n._collapseAllExpanded(s))&&l.length))){var u=l.is(H);n._triggerEvent(u?"collapse":"expand",s)||n._toggleItem(s,u,t)}}},_toggleItem:function(e,t,n){var i=this,r=e.find(w);if(r.length)this._toggleGroup(r,t),n&&n.preventDefault();else{var a=e.find("> ."+b);a.length&&(n&&n.preventDefault(),a.is(":empty")?i._ajaxRequest(e,a,t):i._toggleGroup(a,t))}},_toggleGroup:function(e,t){var n=this,i=n.options.animation,r=i.expand,a=l({},i.collapse),o=a&&"effects"in a;e.is(H)==t&&(e.parent().toggleClass("k-state-default",t).toggleClass(_.substr(1),!t).find("> .k-link > .k-icon").toggleClass("k-i-arrow-n",!t).toggleClass("k-panelbar-collapse",!t).toggleClass("k-i-arrow-s",t).toggleClass("k-panelbar-expand",t),r=t?l(o?a:l({reverse:!0},r),{show:!1,hide:!0}):l({complete:function(e){n._triggerEvent("activate",e.closest(m))}},r),e.kendoStop(!0,!0).kendoAnimate(r))},_collapseAllExpanded:function(t){var n,i=this,r=!1;if(t.find("> ."+g).hasClass("k-header")){var a=t.find(w).add(t.find(y));return a.is(H)&&(r=!0),a.is(H)||0===a.length||(n=e(i.element).children()).find(w).add(n.find(y)).filter(function(){return e(this).is(H)}).each(function(t,n){n=e(n),(r=i._triggerEvent("collapse",n.closest(m)))||i._toggleGroup(n,!0)}),r}},_ajaxRequest:function(t,n,i){var r=this,a=t.find(".k-panelbar-collapse, .k-panelbar-expand"),o=t.find("."+g),s=setTimeout(function(){a.addClass("k-loading")},100),l={};e.ajax({type:"GET",cache:!1,url:o.data("contentUrl")||o.attr("href"),dataType:"html",data:l,error:function(e,t){a.removeClass("k-loading"),r.trigger("error",{xhr:e,status:t})&&this.complete()},complete:function(){clearTimeout(s),a.removeClass("k-loading")},success:function(e,a){n.html(e),r._toggleGroup(n,i),r.trigger("contentLoad",{item:t[0],contentElement:n[0]})}})},_triggerEvent:function(e,t){return this.trigger(e,{item:t[0]})}});l(z,{renderItem:function(e){e=l({panelBar:{},group:{}},e);var t=I.empty,n=e.item;return I.item(l(e,{image:n.imageUrl?I.image:t,sprite:n.spriteCssClass?I.sprite:t,itemWrapper:I.itemWrapper,arrow:n.items||n.content||n.contentUrl?I.arrow:t,subGroup:z.renderGroup},E))},renderGroup:function(e){return I.group(l({renderItems:function(e){for(var t="",n=0,i=e.items,r=i?i.length:0,a=l({length:r},e.group);n<r;n++)t+=z.renderItem(l(e,{group:a,item:l({index:n},i[n])}));return t}},e,E))},renderContent:function(e){return I.content(l(e,E))}}),o.ui.plugin(z)}(jQuery),function(e,t){function n(t){t.children(f).addClass(m),t.children("a").addClass(h).children(f).addClass(m),t.filter(":not([disabled]):not([class*=k-state-disabled])").addClass(b),t.filter("li[disabled]").addClass(k).removeAttr("disabled"),t.filter(":not([class*=k-state])").children("a").filter(":focus").parent().addClass(_+" "+w),t.each(function(){var t=e(this);t.children("."+h).length||t.contents().filter(function(){return!(this.nodeName.match(p)||3==this.nodeType&&!l(this.nodeValue))}).wrapAll("<a class='"+h+"'/>")})}function i(e){var t=e.children(".k-item");t.filter(".k-first:not(:first-child)").removeClass(v),t.filter(".k-last:not(:last-child)").removeClass(g),t.filter(":first-child").addClass(v),t.filter(":last-child").addClass(g)}var r=window.kendo,a=r.ui,o=e.map,s=e.each,l=e.trim,d=e.extend,c=r.template,u=a.Widget,p=/^(a|div)$/i,f="img",h="k-link",g="k-last",m="k-image",v="k-first",k="k-state-disabled",b="k-state-default",_="k-state-active",w="k-tab-on-top",y={content:c("<div class='k-content'#= contentAttributes(data) #>#= content(item) #</div>"),itemWrapper:c("<#= tag(item) # class='k-link'#= contentUrl(item) ##= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) #</#= tag(item) #>"),item:c("<li class='#= wrapperCssClass(group, item) #'>#= itemWrapper(data) #</li>"),image:c("<img class='k-image' alt='' src='#= imageUrl #' />"),sprite:c("<span class='k-sprite #= spriteCssClass #'></span>"),empty:c("")},x={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return!1===t.enabled?n+=" k-state-disabled":n+=" k-state-default",0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},text:function(e){return!1===e.encoded?e.text:r.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},contentAttributes:function(e){return!0!==e.active?" style='display:none'":""},content:function(e){return e.content?e.content:e.contentUrl?"":"&nbsp;"},contentUrl:function(e){return e.contentUrl?r.attr("content-url")+'="'+e.contentUrl+'"':""}},C=u.extend({init:function(t,n){var i=this;i._animations(n),u.fn.init.call(i,t,n),i.element.is("ul")?i.wrapper=i.element.wrapAll("<div />").parent():i.wrapper=i.element,n=i.options,i.wrapper.delegate(".k-tabstrip-items > .k-item:not(.k-state-disabled)","click",e.proxy(i._click,i)).delegate(".k-tabstrip-items > .k-item:not(.k-state-disabled):not(.k-state-active)","mouseenter mouseleave",i._toggleHover).delegate(".k-tabstrip-items > .k-state-disabled .k-link","click",!1),i._updateClasses(),i._dataSource(),n.dataSource&&i.dataSource.fetch(),i.options.contentUrls&&i.wrapper.find(".k-tabstrip-items > .k-item").each(function(t,n){e(n).find(">."+h).data("contentUrl",i.options.contentUrls[t])});var a=i.wrapper.find("li."+_),o=e(i.contentElement(a.parent().children().index(a)));o.length>0&&0===o[0].childNodes.length&&i.activateTab(a.eq(0)),r.notify(i)},_dataSource:function(){var t=this;t.dataSource&&t._refreshHandler?t.dataSource.unbind("change",t._refreshHandler):t._refreshHandler=e.proxy(t.refresh,t),t.dataSource=r.data.DataSource.create(t.options.dataSource).bind("change",t._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),e.fetch()},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={open:{effects:{},show:!0},close:{effects:{}}})},refresh:function(e){var t,n,i,a=this,o=a.options,s=r.getter(o.dataTextField),l=r.getter(o.dataContentField),d=r.getter(o.dataContentUrlField),c=r.getter(o.dataImageUrlField),u=r.getter(o.dataUrlField),p=r.getter(o.dataSpriteCssClass),f=[],h=a.dataSource.view();for((e=e||{}).action&&(h=e.items),t=0,i=h.length;t<i;t++)n={text:s(h[t])},o.dataContentField&&(n.content=l(h[t])),o.dataContentUrlField&&(n.contentUrl=d(h[t])),o.dataUrlField&&(n.url=u(h[t])),o.dataImageUrlField&&(n.imageUrl=c(h[t])),o.dataSpriteCssClass&&(n.spriteCssClass=p(h[t])),f[t]=n;if("add"==e.action)e.index<a.tabGroup.children().length?a.insertBefore(f,a.tabGroup.children().eq(e.index)):a.append(f);else if("remove"==e.action)for(t=0;t<h.length;t++)a.remove(e.index);else"itemchange"==e.action?(t=a.dataSource.view().indexOf(h[0]),e.field===o.dataTextField&&a.tabGroup.children().eq(t).find(".k-link").text(h[0].get(e.field))):(a.trigger("dataBinding"),a.append(f),a.trigger("dataBound"))},value:function(t){var n=this;if(void 0===t)return n.select().text();t!=n.value()&&n.tabGroup.children().each(function(){e.trim(e(this).text())==t&&n.select(this)})},items:function(){return this.tabGroup[0].children},setOptions:function(e){var t=this.options.animation;this._animations(e),e.animation=d(!0,t,e.animation),u.fn.setOptions.call(this,e)},events:["select","activate","error","contentLoad","change","dataBinding","dataBound"],options:{name:"TabStrip",dataTextField:"",dataContentField:"",dataImageUrlField:"",dataUrlField:"",dataSpriteCssClass:"",dataContentUrlField:"",animation:{open:{effects:"expand:vertical fadeIn",duration:200,show:!0},close:{duration:200}},collapsible:!1},select:function(t){var n=this;return 0===arguments.length?n.wrapper.find("li."+_):(isNaN(t)||(t=n.tabGroup.children().get(t)),t=n.element.find(t),e(t).each(function(t,i){(i=e(i)).hasClass(_)||n.trigger("select",{item:i[0],contentElement:n.contentElement(i.index())})||n.activateTab(i)}),n)},enable:function(e,t){return this._toggleDisabled(e,!1!==t),this},disable:function(e){return this._toggleDisabled(e,!1),this},reload:function(t){var n=this;return(t=this.tabGroup.find(t)).each(function(){var t=e(this),i=t.find("."+h).data("contentUrl");i&&n.ajaxRequest(t,e(n.contentElement(t.index())),null,i)}),n},append:function(e){var t=this,n=t._create(e);return s(n.tabs,function(e){t.tabGroup.append(this),t.wrapper.append(n.contents[e])}),i(t.tabGroup),t._updateContentElements(),t},insertBefore:function(t,n){var r=this,a=r._create(t),o=e(r.contentElement(n.index()));return s(a.tabs,function(e){n.before(this),o.before(a.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},insertAfter:function(t,n){var r=this,a=r._create(t),o=e(r.contentElement(n.index()));return s(a.tabs,function(e){n.after(this),o.after(a.contents[e])}),i(r.tabGroup),r._updateContentElements(),r},remove:function(t){var n=this,i=typeof t;return"string"===i?t=n.tabGroup.find(t):"number"===i&&(t=n.tabGroup.children().eq(t)),e(n.contentElement(t.index())).remove(),t.remove(),n._updateContentElements(),n},_create:function(t){var i,r,a=this;return e.isPlainObject(t)||e.isArray(t)?(t=e.isArray(t)?t:[t],i=o(t,function(t,n){return e(C.renderItem({group:a.tabGroup,item:d(t,{index:n})}))}),r=o(t,function(t,n){if(t.content||t.contentUrl)return e(C.renderContent({item:d(t,{index:n})}))})):(i=e(t),r=e("<div class='k-content'/>"),n(i)),{tabs:i,contents:r}},_toggleDisabled:function(t,n){(t=this.tabGroup.find(t)).each(function(){e(this).toggleClass(b,n).toggleClass(k,!n)})},_updateClasses:function(){var t,r,a,o=this;o.wrapper.addClass("k-widget k-header k-tabstrip"),o.tabGroup=o.wrapper.children("ul").addClass("k-tabstrip-items k-reset"),o.tabGroup[0]||(o.tabGroup=e("<ul class='k-tabstrip-items k-reset'/>").appendTo(o.wrapper)),(t=o.tabGroup.find("li").addClass("k-item")).length&&(a=(r=t.filter("."+_).index())>=0?r:void 0,o.tabGroup.contents().filter(function(){return 3==this.nodeType&&!l(this.nodeValue)}).remove()),t.eq(r).addClass(w),o.contentElements=o.wrapper.children("div"),o.contentElements.addClass("k-content").eq(a).addClass(_).css({display:"block"}),t.length&&(n(t),i(o.tabGroup),o._updateContentElements())},_updateContentElements:function(){var t=this,n=t.options.contentUrls||[],i=t.element.attr("id"),a=t.wrapper.children("div");t.tabGroup.find(".k-item").each(function(r){var o=a.eq(r),s=i+"-"+(r+1);!o.length&&n[r]?e("<div id='"+s+"' class='k-content'/>").appendTo(t.wrapper):o.attr("id",s)}),t.contentElements=t.contentAnimators=t.wrapper.children("div"),r.support.touch&&r.mobile.ui.Scroller&&(r.touchScroller(t.contentElements),t.contentElements=t.contentElements.children(".km-scroll-container"))},_toggleHover:function(t){e(t.currentTarget).toggleClass("k-state-hover","mouseenter"==t.type)},_click:function(t){var n=this,i=e(t.currentTarget),r=i.find("."+h),a=r.attr("href"),o=n.options.collapsible,s=e(n.contentElement(i.index()));if(i.closest(".k-widget")[0]==n.wrapper[0])if(i.is("."+k+(o?"":",."+_)))t.preventDefault();else if(!n.tabGroup.children("[data-animating], [data-in-request]").length)if(n.trigger("select",{item:i[0],contentElement:s[0]}))t.preventDefault();else{var l=r.data("contentUrl")||a&&("#"==a.charAt(a.length-1)||-1!=a.indexOf("#"+n.element[0].id+"-"));if(a&&!l)return;if(t.preventDefault(),o&&i.is("."+_))return n.deactivateTab(i),void t.preventDefault();n.activateTab(i)&&t.preventDefault()}},deactivateTab:function(e){var t=this,n=t.options.animation,i=n.open,a=d({},n.close),o=a&&"effects"in a;e=t.tabGroup.find(e),a=d(o?a:d({reverse:!0},i),{show:!1,hide:!0}),r.size(i.effects)?(e.kendoAddClass(b,{duration:i.duration}),e.kendoRemoveClass(_,{duration:i.duration})):(e.addClass(b),e.removeClass(_)),t.contentAnimators.filter("."+_).kendoStop(!0,!0).kendoAnimate(a).removeClass(_)},activateTab:function(t){t=this.tabGroup.find(t);var n=this,i=n.options.animation,a=i.open,o=d({},i.close),s=o&&"effects"in o,l=t.parent().children(),c=l.filter("."+_),u=l.index(t);o=d(s?o:d({reverse:!0},a),{show:!1,hide:!0}),r.size(a.effects)?(c.kendoRemoveClass(_,{duration:o.duration}),t.kendoRemoveClass("k-state-hover",{duration:o.duration})):(c.removeClass(_),t.removeClass("k-state-hover"));var p=n.contentAnimators;if(0===p.length)return c.removeClass(w),t.addClass(w).css("z-index"),t.addClass(_),n.trigger("change"),!1;var f=p.filter("."+_),g=e(n.contentElement(u));if(0===g.length)return f.removeClass(_).kendoStop(!0,!0).kendoAnimate(o),!1;t.attr("data-animating",!0);var m=(t.children("."+h).data("contentUrl")||!1)&&g.is(":empty"),v=function(){c.removeClass(w),t.addClass(w).css("z-index"),r.size(a.effects)?(c.kendoAddClass(b,{duration:a.duration}),t.kendoAddClass(_,{duration:a.duration})):(c.addClass(b),t.addClass(_)),g.closest(".k-content").addClass(_).kendoStop(!0,!0).kendoAnimate(d({init:function(){n.trigger("activate",{item:t[0],contentElement:g[0]})}},a,{complete:function(){t.removeAttr("data-animating")}}))},k=function(){m?n.ajaxRequest(t,g,function(){v(),n.trigger("change")}):(v(),n.trigger("change"))};return f.removeClass(_),f.length?f.kendoStop(!0,!0).kendoAnimate(d({complete:k},o)):k(),!0},contentElement:function(e){if(!isNaN(e-0))for(var t=this.contentElements,n=new RegExp("-"+(e+1)+"$"),i=0,r=t.length;i<r;i++)if(n.test(t.closest(".k-content")[i].id))return t[i]},ajaxRequest:function(t,n,i,r){if(!(t=this.tabGroup.find(t)).find(".k-loading").length){var a=this,o=t.find("."+h),s={},l=null,d=setTimeout(function(){l=e("<span class='k-icon k-loading'/>").prependTo(o)},100);t.attr("data-in-request",!0),e.ajax({type:"GET",cache:!1,url:r||o.data("contentUrl")||o.attr("href"),dataType:"html",data:s,error:function(e,n){t.removeAttr("data-animating"),a.trigger("error",{xhr:e,status:n})&&this.complete()},complete:function(){t.removeAttr("data-in-request"),clearTimeout(d),null!==l&&l.remove()},success:function(e,r){n.html(e),i&&i.call(a,n),a.trigger("contentLoad",{item:t[0],contentElement:n[0]})}})}}});d(C,{renderItem:function(e){e=d({tabStrip:{},group:{}},e);var t=y.empty,n=e.item;return y.item(d(e,{image:n.imageUrl?y.image:t,sprite:n.spriteCssClass?y.sprite:t,itemWrapper:y.itemWrapper},x))},renderContent:function(e){return y.content(d(e,x))}}),r.ui.plugin(C)}(jQuery),function(e,t){function n(e,t,n){var i,r=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*m))}function i(){var e=new w,t=new w(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new w(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}function r(e){return 60*e.getHours()*m+e.getMinutes()*m+1e3*e.getSeconds()+e.getMilliseconds()}function a(e,t,n){var i,a=r(t),o=r(n);return!e||a==o||(i=r(e),a>i&&(i+=v),o<a&&(o+=v),i>=a&&i<=o)}function o(e){var t=e.parseFormats;e.format=u(e.format||l.getCulture(e.culture).calendars.standard.patterns.t),(t=k(t)?t:[t]).splice(0,0,e.format),e.parseFormats=t}function s(e){e.preventDefault()}var l=window.kendo,d=l.support.touch,c=l.keys,u=l._extractFormat,p=l.ui,f=p.Widget,h=d?"touchend":"click",g="k-state-hover",m=6e4,v=864e5,k=e.isArray,b=e.extend,_=e.proxy,w=Date,y=new w;y=new w(y.getFullYear(),y.getMonth(),y.getDate(),0,0,0);var x=function(t){var n=this;n.options=t,n.ul=e('<ul unselectable="on" class="k-list k-reset"/>').css({overflow:l.support.touch?"":"auto"}).delegate("li",h,_(n._click,n)).delegate("li","mouseenter",function(){e(this).addClass(g)}).delegate("li","mouseleave",function(){e(this).removeClass(g)}),n.list=e("<div class='k-list-container'/>").append(n.ul).mousedown(s),n._popup(),n.template=l.template('<li class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})};x.prototype={current:function(t){var n=this;if(void 0===t)return n._current;n._current&&n._current.removeClass("k-state-selected"),t&&((t=e(t)).addClass("k-state-selected"),n.scroll(t[0])),n._current=t},close:function(){this.popup.close()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){for(var t,n=this,i=n.options,r=i.format,o=l.toString,s=n.template,d=e.length,c=0,u="";c<d;c++)a(t=e[c],i.min,i.max)&&(u+=s(o(t,r,i.culture)));n._html(u,d)},refresh:function(){var e,t=this,a=t.options,o=a.format,s=i(),d=s<0,c=a.min,u=a.max,p=r(c),f=r(u),h=a.interval*m,g=l.toString,k=t.template,b=new w(c),_=0,y="";for(e=d?(v+s*m)/h:v/h,p!=f&&(p>f&&(f+=v),e=(f-p)/h+1);_<e;_++)_&&n(b,h,d),f&&r(b)>f&&(b=new w(u)),y+=k(g(b,o,a.culture));t._html(y,e)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e,t){var n=this;n.ul[0].innerHTML=e,n._height(t),n.current(null),n.select(n._value)},scroll:function(e){if(e){var t=this.ul[0],n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,a=t.clientHeight,o=n+i;t.scrollTop=r>n?n:o>r+a?o-a:r}},select:function(t){var n=this,i=n.options,r=n._current;t instanceof Date&&(t=l.toString(t,i.format,i.culture)),"string"==typeof t&&(r&&r.text()===t?t=r:(t=e.grep(n.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null)),n.current(t)},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,i=e(t.currentTarget);t.isDefaultPrevented()||(n.select(i),n.options.change(i.text(),!0),n.close())},_height:function(e){if(e){var t=this,n=t.list,i=n.parent(".k-animation-container"),r=t.options.height;n.add(i).show().height(t.ul[0].scrollHeight>r?r:"auto").hide()}},_parse:function(e){var t=this,n=t.options,i=t._value||y;return e instanceof w?e:((e=l.parseDate(e,n.parseFormats,n.culture))&&(e=new w(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_popup:function(){var e,t=this,n=t.list,i=t.options,r=i.anchor;t.popup=new p.Popup(n,b(i.popup,{anchor:r,open:i.open,close:i.close,animation:i.animation})),e=r.outerWidth()-(n.outerWidth()-n.width()),n.css({fontFamily:r.css("font-family"),width:e}),l.touchScroller(t.popup.element)},move:function(e){var t=this,n=e.keyCode,i=t.ul[0],r=t._current,a=n===c.DOWN;if(n===c.UP||a){if(e.altKey)return void t.toggle(a);(r=a?r?r[0].nextSibling:i.firstChild:r?r[0].previousSibling:i.lastChild)&&t.select(r),t.options.change(t._current.text()),e.preventDefault()}else n!==c.ENTER&&n!==c.TAB&&n!==c.ESC||(e.preventDefault(),r&&t.options.change(r.text(),!0),t.close())}},x.getMilliseconds=r,l.TimeView=x;var C=f.extend({init:function(e,t){var n=this;f.fn.init.call(n,e,t),e=n.element,o(t=n.options),n._wrapper(),n.timeView=new x(b({},t,{anchor:n.wrapper,format:t.format,change:function(t,i){i?n._change(t):e.val(t)},open:function(e){n.trigger("open")&&e.preventDefault()},close:function(e){n.trigger("close")&&e.preventDefault()}})),n._icon(),d||(e[0].type="text"),e.addClass("k-input").bind({keydown:_(n._keydown,n),focus:function(e){n._inputWrapper.addClass("k-state-focused")},blur:_(n._blur,n)}).closest("form").bind("reset",function(){n.value(e[0].defaultValue)}),n.enable(!e.is("[disabled]")),n.value(t.value||e.val()),l.notify(n)},options:{name:"TimePicker",min:y,max:y,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:["open","close","change"],setOptions:function(e){var t=this;f.fn.setOptions.call(t,e),o(t.options),b(t.timeView.options,t.options),t.timeView.ul[0].innerHTML=""},dataBind:function(e){k(e)&&this.timeView.dataBind(e)},enable:function(e){var t=this,n=t.element,i=t._arrow.unbind(h+" mousedown"),r=t._inputWrapper.unbind("mouseenter mouseleave");!1===e?(r.removeClass("k-state-default").addClass("k-state-disabled"),n.attr("disabled","disabled")):(r.removeClass("k-state-disabled").addClass("k-state-default").bind("mouseenter mouseleave",t._toggleHover),n.removeAttr("disabled"),i.bind(h,_(t._click,t)).bind("mousedown",s))},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var t=this;if(void 0===e)return t._value;t._old=t._update(e)},_blur:function(){var e=this;e.close(),e._change(e.element.val()),e._inputWrapper.removeClass("k-state-focused")},_click:function(){var e=this,t=e.element;e.timeView.toggle(),d||t[0]===document.activeElement||t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t.trigger("change"),t.element.trigger("change"))},_icon:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)),n._arrow=t},_keydown:function(e){var t=this,n=e.keyCode,i=t.timeView;i.popup.visible()||e.altKey?i.move(e):n===c.ENTER&&t._change(t.element.val())},_option:function(e,t){var n=this,i=n.options;if(void 0===t)return i[e];(t=n.timeView._parse(t))&&(t=new w(t),i[e]=t,n.timeView.options[e]=t,n.timeView.bind())},_toggleHover:function(t){d||e(t.currentTarget).toggleClass(g,"mouseenter"===t.type)},_update:function(e){var t=this,n=t.options,i=t.timeView._parse(e);return a(i,n.min,n.max)||(i=null),t._value=i,t.element.val(i?l.toString(i,n.format,n.culture):e),t.timeView.value(i),i},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-timepicker"))[0]||(t=(t=i.wrap("<span/>").parent().addClass("k-picker-wrap k-state-default")).wrap("<span/>").parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-timepicker k-header"),n._inputWrapper=e(t[0].firstChild)}});p.plugin(C)}(jQuery),function(e,t){function n(e){e.preventDefault()}function i(e){var t=r.getCulture(e.culture).calendars.standard.patterns;e.format=l(e.format||t.g),e.timeFormat=l(e.timeFormat||t.t),r.DateView.normalize(e),e.parseFormats.splice(1,0,e.timeFormat)}var r=window.kendo,a=r.TimeView,o=r.support.touch,s=r.parseDate,l=r._extractFormat,d=r.calendar,c=d.isInRange,u=d.restrictValue,p=d.isEqualDatePart,f=a.getMilliseconds,h=r.ui,g=h.Widget,m=(o?"touchend":"click")+" "+(o?"touchstart":"mousedown"),v=Date,k=new v(1900,0,1),b=new v(2099,11,31),_={view:"date"},w={view:"time"},y=e.extend,x=g.extend({init:function(t,n){var a=this;g.fn.init.call(a,t,n),t=a.element,i(n=a.options),a._wrapper(),a._icons(),a._views(),o||(t[0].type="text"),t.addClass("k-input").bind({keydown:e.proxy(a._keydown,a),focus:function(){a._inputWrapper.addClass("k-state-focused")},blur:function(){a._inputWrapper.removeClass("k-state-focused"),a._change(t.val()),a.close("date"),a.close("time")}}).closest("form").bind("reset",function(){a.value(t[0].defaultValue)}),a._midnight=f(n.min)+f(n.max)===0,a.enable(!t.is("[disabled]")),a.value(n.value||t.val()),r.notify(a)},options:{name:"DateTimePicker",value:null,format:"",timeFormat:"",culture:"",parseFormats:[],dates:[],min:new v(k),max:new v(b),interval:30,height:200,footer:"",start:"month",depth:"month",animation:{},month:{},startControlId:null,endControlId:null},events:["open","close","change"],setOptions:function(e){var t=this;g.fn.setOptions.call(t,e),i(t.options),y(t.dateView.options,t.options),y(t.timeView.options,t.options),t.timeView.ul[0].innerHTML=""},enable:function(e){var t=this,i=t._dateIcon.unbind(m),r=t._timeIcon.unbind(m),a=t._inputWrapper.unbind("mouseenter mouseleave"),s=t.element;!1===e?(a.removeClass("k-state-default").addClass("k-state-disabled"),s.attr("disabled","disabled")):(a.addClass("k-state-default").removeClass("k-state-disabled").bind("mouseenter mouseleave",t._toggleHover),s.removeAttr("disabled"),i.bind({click:function(){t.toggle("date"),o||s[0]===document.activeElement||s.focus()},mousedown:n}),r.bind({click:function(){t.toggle("time"),o||s[0]===document.activeElement||s.focus()},mousedown:n}))},close:function(e){"time"!==e&&(e="date"),this[e+"View"].close()},open:function(e){"time"!==e&&(e="date"),this[e+"View"].open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},toggle:function(e){var t="timeView";"time"!==e?e="date":t="dateView",this[e+"View"].toggle(),this[t].close()},value:function(e){var t=this;if(void 0===e)return t._value;t._old=t._update(e)},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t.trigger("change"),t.element.trigger("change"))},_option:function(e,t){var n=this,i=n.options,r=n.timeView,a=r.options,o=n._value||n._old;if(void 0===t)return i[e];if(t=s(t,i.parseFormats,i.culture)){if(i[e]=new v(t),n.dateView[e](t),n._midnight=f(i.min)+f(i.max)===0,o&&p(t,o)){if(n._midnight&&"max"==e)return a[e]=b,void r.dataBind([b]);a[e]=t}else a.max=b,a.min=k;r.bind()}},_toggleHover:function(t){o||e(t.currentTarget).toggleClass("k-state-hover","mouseenter"===t.type)},_update:function(e){var t,n,i,a,o=this,l=o.options,d=l.min,f=l.max,h=o.timeView,g=s(e,l.parseFormats,l.culture);return+g==+o._value?g:(null!==g&&p(g,d)?g=u(g,d,f):c(g,d,f)||(g=null),o._value=g,h.value(g),o.dateView.value(g),g&&(i=o._old,n=h.options,p(g,d)&&(n.min=d,n.max=b,t=!0),p(g,f)&&(o._midnight?(h.dataBind([b]),a=!0):(n.max=f,t||(n.min=k),t=!0)),!a&&(!i&&t||i&&!p(i,g))&&(t||(n.max=b,n.min=k),h.bind())),o.element.val(g?r.toString(g,l.format,l.culture):e),g)},_keydown:function(e){var t=this,n=t.dateView,i=t.timeView,a=n.popup.visible();e.altKey&&e.keyCode===r.keys.DOWN?t.toggle(a?"time":"date"):a?n.move(e):i.popup.visible()?i.move(e):e.keyCode===r.keys.ENTER&&t._change(t.element.val())},_views:function(){var e=this,t=e.options;e.dateView=new r.DateView(y({},t,{anchor:e.wrapper,change:function(){var n,i=this.value(),r=+i,a=+t.min,o=+t.max;r!==a&&r!==o||((n=new v(e._value)).setFullYear(i.getFullYear()),n.setMonth(i.getMonth()),n.setDate(i.getDate()),c(n,a,o)&&(i=n)),e._change(i),e.close("date")},close:function(t){e.trigger("close",_)&&t.preventDefault()},open:function(t){e.trigger("open",_)&&t.preventDefault()}})),e.timeView=new a({anchor:e.wrapper,animation:t.animation,dates:t.dates,format:t.timeFormat,culture:t.culture,height:t.height,interval:t.interval,min:new v(k),max:new v(b),parseFormats:t.parseFormats,value:t.value,change:function(n,i){(n=e.timeView._parse(n))<t.min?(n=new v(t.min),e.timeView.options.min=n):n>t.max&&(n=new v(t.max),e.timeView.options.max=n),i?(e._timeSelected=!0,e._change(n)):e.element.val(r.toString(n,t.format,t.culture))},close:function(t){e.trigger("close",w)&&t.preventDefault()},open:function(t){e.trigger("open",w)&&t.preventDefault()}})},_icons:function(){var t,n=this,i=n.element;(t=i.next("span.k-select"))[0]||(t=(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(i)).children()),n._dateIcon=t.eq(0),n._timeIcon=t.eq(1)},_wrapper:function(){var t,n=this,i=n.element;(t=i.parents(".k-datetimepicker"))[0]||(t=(t=i.wrap("<span/>").parent().addClass("k-picker-wrap k-state-default")).wrap("<span/>").parent()),t[0].style.cssText=i[0].style.cssText,i.css({width:"100%",height:i[0].style.height}),n.wrapper=t.addClass("k-widget k-datetimepicker k-header"),n._inputWrapper=e(t[0].firstChild)}});h.plugin(x)}(jQuery),function(e,t){function n(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function i(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")}function r(t){var n,i,r=t.children("div"),a=t.children("ul"),o=r.children(".k-icon"),s=r.children(".k-in");if(!t.hasClass("k-treeview")&&(r.length||(r=e("<div />").prependTo(t)),!o.length&&a.length?o=e("<span class='k-icon' />").prependTo(r):a.length&&a.children().length||(o.remove(),a.remove()),!s.length))for(s=e("<span class='k-in' />").appendTo(r)[0],n=r[0].nextSibling,s=r.find(".k-in")[0];n&&"ul"!=n.nodeName.toLowerCase();)i=n,n=n.nextSibling,3==i.nodeType&&(i.nodeValue=e.trim(i.nodeValue)),s.appendChild(i)}function a(e,t,n){var i=e.children("div"),r=e.children("ul");e.hasClass("k-treeview")||(n=g({expanded:"none"!=r.css("display"),index:e.index(),enabled:!i.children(".k-in").hasClass("k-state-disabled")},n),t=g({firstLevel:e.parent().parent().hasClass(w),length:e.parent().children().length},t),e.removeClass("k-first k-last").addClass(l.wrapperCssClass(t,n)),i.removeClass("k-top k-mid k-bot").addClass(l.cssClass(t,n)),i.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(l.textClass(n)),r.length&&(i.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(l.toggleButtonClass(n)),r.addClass("k-group")))}function o(e){var t=this;t.treeview=e,t._draggable=new f.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(e){return s.dragClue({text:e.text()})},cursorOffset:{left:10,top:p.support.touch?-40/p.support.zoomLevel():10},dragstart:_(t.dragstart,t),dragcancel:_(t.dragcancel,t),drag:_(t.drag,t),dragend:_(t.dragend,t)})}var s,l,d,c,u,p=window.kendo,f=p.ui,h=p.data,g=e.extend,m=p.template,v=e.isArray,k=f.Widget,b=h.HierarchicalDataSource,_=e.proxy,w="k-treeview",y=".k-item",x={text:"dataTextField",url:"dataUrlField",target:"dataTargetField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},C=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName};c=n(".k-group"),u=n(".k-group,.k-content"),s={dragClue:m("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status'></span>#= text #</div>"),group:m("<ul class='#= r.groupCssClass(group) #'#= r.groupAttributes(group) #>#= renderItems(data) #</ul>")},d=k.extend({init:function(t,n){var i=this,r=".k-in:not(.k-state-selected,.k-state-disabled)",a=!1;v(n)&&(!0,n={dataSource:n}),n&&void 0===n.loadOnDemand&&v(n.dataSource)&&(n.loadOnDemand=!1),k.prototype.init.call(i,t,n),t=i.element,n=i.options,(a=t.is("ul")||t.hasClass(w))&&(n.dataSource.list=t.is("ul")?t:t.children("ul")),i._animation(),i._accessors(),n.template&&"string"==typeof n.template?n.template=m(n.template):n.template||(n.template=i._textTemplate()),n.checkboxTemplate&&"string"==typeof n.checkboxTemplate&&(n.checkboxTemplate=m(n.checkboxTemplate)),i.templates={item:i._itemTemplate(),loading:i._loadingTemplate()},t.hasClass(w)?(i.wrapper=t,i.root=t.children("ul").eq(0)):(i._wrapper(),a&&(i.root=t,i._group(i.wrapper))),i._dataSource(a),i.wrapper.on("mouseenter",".k-in.k-state-selected",function(e){e.preventDefault()}).on("mouseenter",r,function(){e(this).addClass("k-state-hover")}).on("mouseleave",r,function(){e(this).removeClass("k-state-hover")}).on("click",r,_(i._nodeClick,i)).on("dblclick","div:not(.k-state-disabled) .k-in",_(i._toggleButtonClick,i)).on("click",".k-plus,.k-minus",_(i._toggleButtonClick,i)),n.dragAndDrop&&(i.dragging=new o(i)),a?i._attachUids():n.autoBind&&(i._progress(!0),i.dataSource.read())},_attachUids:function(t,n){var i,r=this,a=p.attr("uid");t=t||r.root,n=n||r.dataSource,i=n.view(),t.children("li").each(function(t,n){n=e(n).attr(a,i[t].uid),r._attachUids(n.children("ul"),i[t].children)})},_animation:function(){var e=this.options;!1===e.animation&&(e.animation={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}})},_dataSource:function(e){function t(e){for(var n=0;n<e.length;n++)e[n].children.read(),t(e[n].children.view())}var n=this,i=n.options.dataSource;i=v(i)?{data:i}:i,n.dataSource&&n._refreshHandler?n.dataSource.unbind("change",n._refreshHandler):n._refreshHandler=_(n.refresh,n),i.fields||(i.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),n.dataSource=b.create(i),e&&(n.dataSource.read(),t(n.dataSource.view())),n.dataSource.bind("change",n._refreshHandler)},events:["dragstart","drag","drop","dragend","expand","collapse","select"],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200,show:!0},collapse:{duration:100}},dragAndDrop:!1,autoBind:!0,loadOnDemand:!0},_accessors:function(){var e,t,n,i=this,r=i.options,a=i.element;for(e in x)t=r[x[e]],(n=a.attr(p.attr(e+"-field")))&&(t=n),t||(t=e),v(t)||(t=[t]),r[x[e]]=t},_fieldFor:function(e){var t=this.options[x[e]],n=t.length;return 0===n?"'"+e+"'":1==n?"'"+t[0]+"'":"['"+t.join("','")+"'][item.level() < "+n+" ? item.level() : "+(n-1)+"]"},_textTemplate:function(){var e=this,t="# var text = "+function(t){return"item["+e._fieldFor(t)+"]"}("text")+"; ## if (typeof item.encoded != 'undefined' && item.encoded === false) {##= text ## } else { ##: text ## } #";return m(t)},_loadingTemplate:function(){return m("<div class='k-icon k-loading' /> Loading...")},_itemTemplate:function(){var e=this,t=function(t){return"item["+e._fieldFor(t)+"]"},n="<li class='#= r.wrapperCssClass(group, item) #' "+p.attr("uid")+"='#= item.uid #'><div class='#= r.cssClass(group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #'></span># } ## if (treeview.checkboxTemplate) { #<span class='k-checkbox'>#= treeview.checkboxTemplate(data) #</span># } ## var url = "+t("url")+"; ## var target = "+t("target")+"; ## var tag = (url || target ? 'a' : 'span'); ## var textAttr = (url || target ? ' href=\\'' + (url ? url : 'javascript:void(0);') + '\\'' : ''); ## textAttr = textAttr + (target ? '  urltarget=\\'' + target + '\\'' : ''); #<#=tag# class='#= r.textClass(item) #'#= textAttr #># var imageUrl = "+t("imageUrl")+"; ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## var spriteCssClass = "+t("spriteCssClass")+"; ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #'></span># } ##= treeview.template(data) #</#=tag#></div></li>";return m(n)},setOptions:function(e){var t=this;"dragAndDrop"in e&&e.dragAndDrop&&!t.options.dragAndDrop&&(t.dragging=new o(t)),k.fn.setOptions.call(t,e),t._animation()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(y)[0]})},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(y))},_nodeClick:function(t){var n=this,i=e(t.target),r=u(i.closest(y)),a=i.attr("href");(a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:r.length&&!r.children().length)&&t.preventDefault(),i.hasClass(".k-state-selected")||n._trigger("select",i)||n.select(i)},_wrapper:function(){var e,t,n=this,i=n.element;i.is("div")?t=(e=i).children("ul").eq(0):(e=i.wrap("<div />").parent(),t=i),n.wrapper=e.addClass("k-widget k-treeview k-reset"),n.root=t},_group:function(e){var t=this,n=e.hasClass(w),i={firstLevel:n,expanded:n||t._expanded(e)},r=e.children("ul");r.addClass(l.groupCssClass(i)).css("display",i.expanded?"":"none"),t._nodes(r,i)},_nodes:function(t,n){var i,o=this,s=t.children("li");n=g({length:s.length},n),s.each(function(t,s){s=e(s),i={index:t,expanded:o._expanded(s)},r(s),a(s,n,i),o._group(s)})},_processNodes:function(t,n){var i=this;i.element.find(t).each(function(t,r){n.call(i,t,e(r).closest(y))})},dataItem:function(t){var n=e(t).closest(y).attr(p.attr("uid")),i=this.dataSource;return i&&i.getByUid(n)},_insertNode:function(t,n,i,o,s){var l,d,u,p,f=this,h=c(i),g=h.children().length+1,m={firstLevel:i.hasClass(w),expanded:!s,length:g},v="";for(u=0;u<t.length;u++)(p=t[u]).index=n+u,v+=f._renderItem({group:m,item:p});if((d=e(v)).length){for(h.length||(h=e(f._renderGroup({group:m})).appendTo(i)),o(d,h),i.hasClass("k-item")&&(r(i),a(i)),a(d.prev()),a(d.next()),u=0;u<t.length;u++)(l=(p=t[u]).children.data()).length&&f._insertNode(l,p.index,d.eq(u),function(e,t){e.appendTo(t)},!f._expanded(d.eq(u)));return d}},refresh:function(e){function t(e,t,n){var r=c(t).children();void 0===d&&(d=r.length),i._insertNode(e,d,t,function(e,t){d==r.length?e.appendTo(t):e.insertBefore(r.eq(d))},n)}var n,i=this,r=i.wrapper,o=e.node,s=e.action,l=e.items,d=e.index,u=i.options.loadOnDemand;if(!e.field&&(o&&(r=i.findByUid(o.uid),i._progress(r,!1)),"add"==s?t(l,r):"remove"==s?i._remove(i.findByUid(l[0].uid),!1):o?(c(r).empty(),t(l,r,!0),i._expanded(r)&&(a(r,{},{expanded:!0}),c(r).css("display","block"))):i.root=i.wrapper.html(i._renderGroup({items:l,group:{firstLevel:!0,expanded:!0}})).children("ul"),!u))for(n=0;n<l.length;n++)l[n].load()},expand:function(e){this._processNodes(e,function(e,t){var n=u(t);n.length>0&&!n.is(":visible")&&this.toggle(t)})},collapse:function(e){this._processNodes(e,function(e,t){var n=u(t);n.length>0&&n.is(":visible")&&this.toggle(t)})},enable:function(e,t){t=2!=arguments.length||!!t,this._processNodes(e,function(e,n){var i=!u(n).is(":visible");t||(this.collapse(n),i=!0),a(n,{},{enabled:t,expanded:!i})})},select:function(t){var n=this.element;if(!arguments.length)return n.find(".k-state-selected").closest(y);(t=e(t,n).closest(y)).length&&(n.find(".k-in").removeClass("k-state-hover k-state-selected"),t.find(".k-in:first").addClass("k-state-selected"))},toggle:function(t){if((t=e(t)).find(">div>.k-icon").is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled")){var n=this,i=u(t),r=!i.is(":visible"),o=n.options,s=o.animation||{},l=s.expand,d=g({},s.collapse),c=d&&"effects"in d,p=n.dataItem(t);i.data("animating")||(r||(l=g(c?d:g({reverse:!0},l),{show:!1,hide:!0})),n._trigger(r?"expand":"collapse",t)||(n._expanded(t,r),i.children().length>0?(a(t,{},{expanded:r}),r||i.css("height",i.height()).css("height"),i.kendoStop(!0,!0).kendoAnimate(g(l,{complete:function(){r&&i.css("height","")}}))):p&&(o.loadOnDemand&&n._progress(t,!0),p.load())))}},_expanded:function(e,t){var n=p.attr("expanded"),i=this.dataItem(e);if(1==arguments.length)return"true"===e.attr(n)||i&&i.expanded;i&&i.set("expanded",t),t?e.attr(n,"true"):e.removeAttr(n)},_progress:function(e,t){var n=this.element;1==arguments.length?(t=e)?n.html(this.templates.loading):n.empty():e.find("> div > .k-icon").toggleClass("k-loading",t)},text:function(t){return e(t).closest(y).find(">div>.k-in").text()},urltarget:function(t){return e(t).closest(y).find(">div>.k-in").attr("urltarget")},_dataSourceMove:function(t,n,r,a){var o,s,l,d,c=this,u=i(t),f=i(r||n),g=f.dataSource;if(r&&((l=f.dataItem(r)).loaded()||(l.load(),c._expanded(r,!0)),r!=c.root&&(g=l.children)),t instanceof e||C(t))t=e(t),s=(o=u.dataSource).getByUid(t.attr(p.attr("uid"))),s=a(g,s=o.remove(s));else if(v(t)||t instanceof h.ObservableArray)for(d=0;d<t.length;d++)s=a(g,t[d]);else s=a(g,t);return c.findByUid(s.uid)},insertAfter:function(e,t){var n,i=t.parent();return i.parent().is("li")&&(n=i.parent()),this._dataSourceMove(e,i,n,function(e,n){return e.insert(t.index()+1,n)})},insertBefore:function(e,t){var n,i=t.parent();return i.parent().is("li")&&(n=i.parent()),this._dataSourceMove(e,i,n,function(e,n){return e.insert(t.index(),n)})},append:function(e,t){var n=this,i=n.root;return t&&(i=c(t)),n._dataSourceMove(e,i,t,function(e,i){return t&&n._expanded(t,!0),e.add(i)})},_remove:function(t,n){var i,o,s;return t=e(t,this.element),i=t.parent().parent(),o=t.prev(),s=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(r(i),a(i)),a(o),a(s),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,i){return e(i).text()==t}).closest(y)},findByUid:function(e){return this.element.find(".k-item["+p.attr("uid")+"="+e+"]")},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=l,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",i=0,r=e.items,a=r?r.length:0,o=e.group;for(o.length=a;i<a;i++)e.group=o,e.item=r[i],e.item.index=i,n+=t._renderItem(e);return n},e.r=l,s.group(e)}}),o.prototype={_hintStatus:function(t){var n=this._draggable.hint.find(".k-drag-status")[0];if(!t)return e.trim(n.className.replace(/k-(icon|drag-status)/g,""));n.className="k-icon k-drag-status "+t},dragstart:function(t){var n=this,i=n.treeview,r=n.sourceNode=t.currentTarget.closest(y);i.trigger("dragstart",{sourceNode:r[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css("visibility","hidden").appendTo(i.element)},drag:function(t){var n,i,r,a,o,s,l,d,c,u,f=this,h=f.treeview,g=f.sourceNode,m=f.dropTarget=e(p.eventTarget(t));m.closest(".k-treeview").length?e.contains(g[0],m[0])?n="k-denied":(n="k-insert-middle",f.dropHint.css("visibility","visible"),(i=m.closest(".k-top,.k-mid,.k-bot")).length>0?(a=i.outerHeight(),o=i.offset().top,l=a/((s=m.closest(".k-in")).length>0?4:2),d=t.pageY<o+l,c=o+a-l<t.pageY,u=s.length>0&&!d&&!c,s.toggleClass("k-state-hover",u),f.dropHint.css("visibility",u?"hidden":"visible"),u?n="k-add":((r=i.position()).top+=d?0:a,f.dropHint.css(r)[d?"prependTo":"appendTo"](m.closest(y).children("div:first")),d&&i.hasClass("k-top")&&(n="k-insert-top"),c&&i.hasClass("k-bot")&&(n="k-insert-bottom"))):m[0]!=f.dropHint[0]&&(n="k-denied")):n="k-denied",h.trigger("drag",{sourceNode:g[0],dropTarget:m[0],pageY:t.pageY,pageX:t.pageX,statusClass:n.substring(2),setStatusClass:function(e){n=e}}),0!==n.indexOf("k-insert")&&f.dropHint.css("visibility","hidden"),f._hintStatus(n)},dragcancel:function(e){this.dropHint.remove()},dragend:function(e){var t,n,i,r=this,a=r.treeview,o="over",s=r.sourceNode,l=r.dropHint;"visible"==l.css("visibility")?(o=l.prevAll(".k-in").length>0?"after":"before",t=l.closest(y)):r.dropTarget&&(t=r.dropTarget.closest(y)),n="k-denied"!=r._hintStatus(),i=a.trigger("drop",{sourceNode:s[0],destinationNode:t[0],valid:n,setValid:function(e){n=e},dropTarget:e.target,dropPosition:o}),l.remove(),n&&!i?(r._draggable.dropped=!0,"over"==o?(a.append(s,t),a.expand(t)):"before"==o?a.insertBefore(s,t):"after"==o&&a.insertAfter(s,t),a.trigger("dragend",{sourceNode:s[0],destinationNode:t[0],dropPosition:o})):r._draggable.dropped=n}},l={wrapperCssClass:function(e,t){var n="k-item",i=t.index;return e.firstLevel&&0===i&&(n+=" k-first"),i==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",i=t.index,r=e.length-1;return e.firstLevel&&0===i&&(n+="k-top "),n+=0===i&&i!=r?"k-top":i==r?"k-bot":"k-mid"},textClass:function(e){var t="k-in";return!1===e.enabled&&(t+=" k-state-disabled"),!0===e.selected&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return!0!==e.expanded?t+=" k-plus":t+=" k-minus",!1===e.enabled&&(t+="-disabled"),t},groupAttributes:function(e){return!0!==e.expanded?" style='display:none'":""},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t}},f.plugin(d)}(jQuery),function(e,t){function n(e,t,n){var i=n?" k-slider-horizontal":" k-slider-vertical",r=e.style?e.style:t.attr("style"),a=t.attr("class")?" "+t.attr("class"):"",o="";return"bottomRight"==e.tickPlacement?o=" k-slider-bottomright":"topLeft"==e.tickPlacement&&(o=" k-slider-topleft"),r=r?" style='"+r+"'":"","<div class='k-widget k-slider"+i+a+"'"+r+"><div class='k-slider-wrap"+(e.showButtons?" k-slider-buttons":"")+o+"'></div></div>"}function i(e,t,n){var i="";return i="increase"==t?n?"k-i-arrow-e":"k-i-arrow-n":n?"k-i-arrow-w":"k-i-arrow-s","<a class='k-button k-button-"+t+"'><span class='k-icon "+i+"' title='"+e[t+"ButtonTitle"]+"'>"+e[t+"ButtonTitle"]+"</span></a>"}function r(e,t){var n,i="<ul class='k-reset k-slider-items'>",r=_.floor(d(t/e.smallStep))+1;for(n=0;n<r;n++)i+="<li class='k-tick'>&nbsp;</li>";return i+="</ul>"}function a(e){return"<div class='k-slider-track'><div class='k-slider-selection'>\x3c!-- --\x3e</div><a href='#' class='k-draghandle' title='Drag'>Drag</a>"+((e.is("input")?1:2)>1?"<a href='#' class='k-draghandle' title='Drag'>Drag</a>":"")+"</div>"}function o(e){return function(t){return t+e}}function s(e){return function(){return e}}function l(e){return(e+"").replace(".",p.cultures.current.numberFormat["."])}function d(e){e=parseFloat(e,10);var t=_.pow(10,D||0);return _.round(e*t)/t}function c(e,n){var i=v(e.getAttribute(n));return null===i&&(i=t),i}function u(e){return typeof e!==A}var p=window.kendo,f=p.ui.Widget,h=p.ui.Draggable,g=e.extend,m=p.format,v=p.parseFloat,k=e.proxy,b=e.isArray,_=Math,w=p.support,y=w.touch,x=w.pointers,C=y?"touchstart":"mousedown",T=y?"touchstart":x?"MSPointerDown":"mousedown",S=y?"touchend":"mouseup",F=".k-draghandle",D=3,A="undefined",H=f.extend({init:function(e,t){var n=this;f.fn.init.call(n,e,t),t=n.options,n._distance=t.max-t.min,n._isHorizontal="horizontal"==t.orientation,n._position=n._isHorizontal?"left":"bottom",n._size=n._isHorizontal?"width":"height",n._outerSize=n._isHorizontal?"outerWidth":"outerHeight",t.tooltip.format=t.tooltip.enabled?t.tooltip.format||"{0}":"{0}",n._createHtml(),n.wrapper=n.element.closest(".k-slider"),n._trackDiv=n.wrapper.find(".k-slider-track"),n._setTrackDivWidth(),n._maxSelection=n._trackDiv[n._size]();var i=n._maxSelection/((t.max-t.min)/t.smallStep),a=n._calculateItemsWidth(_.floor(n._distance/t.smallStep));"none"!=t.tickPlacement&&i>=2&&(n._trackDiv.before(r(t,n._distance)),n._setItemsWidth(a),n._setItemsTitle(),n._setItemsLargeTick()),n._calculateSteps(a),n[t.enabled?"enable":"disable"](),n._keyMap={37:o(-t.smallStep),40:o(-t.smallStep),39:o(+t.smallStep),38:o(+t.smallStep),35:s(t.max),36:s(t.min),33:o(+t.largeStep),34:o(-t.largeStep)},p.notify(n)},events:["change","slide"],options:{enabled:!0,min:0,max:10,smallStep:1,largeStep:5,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},_setTrackDivWidth:function(){var e=this,t=2*parseFloat(e._trackDiv.css(e._position),10);e._trackDiv[e._size](e.wrapper[e._size]()-2-t)},_setItemsWidth:function(t){var n,i=this,r=i.options,a=t.length-1,o=i.wrapper.find(".k-tick"),s=0,l=o.length,d=0;for(n=0;n<l-2;n++)e(o[n+1])[i._size](t[n]);if(i._isHorizontal?(e(o[0]).addClass("k-first")[i._size](t[a-1]),e(o[a]).addClass("k-last")[i._size](t[a])):(e(o[a]).addClass("k-first")[i._size](t[a]),e(o[0]).addClass("k-last")[i._size](t[a-1])),i._distance%r.smallStep!=0&&!i._isHorizontal){for(n=0;n<t.length;n++)d+=t[n];s=i._maxSelection-d,s+=parseFloat(i._trackDiv.css(i._position),10)+2,i.wrapper.find(".k-slider-items").css("padding-top",s)}},_setItemsTitle:function(){for(var t=this,n=t.options,i=t.wrapper.find(".k-tick"),r=n.min,a=i.length,o=t._isHorizontal?0:a-1,s=t._isHorizontal?a:-1,l=t._isHorizontal?1:-1;o-s!=0;o+=l)e(i[o]).attr("title",m(n.tooltip.format,d(r))),r+=n.smallStep},_setItemsLargeTick:function(){var t,n=this,i=n.options,r=n.wrapper.find(".k-tick"),a={},o=d(i.largeStep/i.smallStep);if(1e3*i.largeStep%(1e3*i.smallStep)==0)if(n._isHorizontal)for(t=0;t<r.length;t=d(t+o))(a=e(r[t])).addClass("k-tick-large").html("<span class='k-label'>"+a.attr("title")+"</span>");else for(t=r.length-1;t>=0;t=d(t-o))(a=e(r[t])).addClass("k-tick-large").html("<span class='k-label'>"+a.attr("title")+"</span>"),0!==t&&t!==r.length-1&&a.css("line-height",a[n._size]()+"px")},_calculateItemsWidth:function(e){var t,n,i,r=this,a=r.options,o=parseFloat(r._trackDiv.css(r._size))+1,s=o/r._distance;for(r._distance/a.smallStep-_.floor(r._distance/a.smallStep)>0&&(o-=r._distance%a.smallStep*s),t=o/e,n=[],i=0;i<e-1;i++)n[i]=t;return n[e-1]=n[e]=t/2,r._roundWidths(n)},_roundWidths:function(e){var t,n=0,i=e.length;for(t=0;t<i;t++)n+=e[t]-_.floor(e[t]),e[t]=_.floor(e[t]);return n=_.round(n),this._addAdditionalSize(n,e)},_addAdditionalSize:function(e,t){if(0===e)return t;var n,i=parseFloat(t.length-1)/parseFloat(1==e?e:e-1);for(n=0;n<e;n++)t[parseInt(_.round(i*n),10)]+=1;return t},_calculateSteps:function(e){var t,n=this,i=n.options,r=i.min,a=0,o=_.ceil(n._distance/i.smallStep),s=1;if(o+=n._distance/i.smallStep%1==0?1:0,e.splice(0,0,2*e[o-2]),e.splice(o-1,1,2*e.pop()),n._pixelSteps=[a],n._values=[r],0!==o){for(;s<o;)a+=(e[s-1]+e[s])/2,n._pixelSteps[s]=a,n._values[s]=r+=i.smallStep,s++;t=n._distance%i.smallStep==0?o-1:o,n._pixelSteps[t]=n._maxSelection,n._values[t]=i.max}},_getValueFromPosition:function(e,t){var n,i=this,r=i.options,a=_.max(r.smallStep*(i._maxSelection/i._distance),0),o=0,s=a/2;if(o=i._isHorizontal?e-t.startPoint:t.startPoint-e,i._maxSelection-(parseInt(i._maxSelection%a,10)-3)/2<o)return r.max;for(n=0;n<i._pixelSteps.length;n++)if(_.abs(i._pixelSteps[n]-o)-1<=s)return d(i._values[n])},_getDragableArea:function(){var e=this,t=e._trackDiv.offset().left,n=e._trackDiv.offset().top;return{startPoint:e._isHorizontal?t:n+e._maxSelection,endPoint:e._isHorizontal?t+e._maxSelection:n}},_createHtml:function(){var e=this,t=e.element,r=e.options,o=t.find("input");2==o.length?(o.eq(0).val(r.selectionStart),o.eq(1).val(r.selectionEnd)):t.val(r.value),t.wrap(n(r,t,e._isHorizontal)).hide(),r.showButtons&&t.before(i(r,"increase",e._isHorizontal)).before(i(r,"decrease",e._isHorizontal)),t.before(a(t))}}),I=function(e){return{idx:0,x:e.pageX,y:e.pageY}};w.pointers&&(I=function(e){return{idx:0,x:e.originalEvent.clientX,y:e.originalEvent.clientY}}),w.touch&&(I=function(t,n){var i=t.changedTouches||t.originalEvent.changedTouches;if(n){var r=null;return e.each(i,function(e,t){n==t.identifier&&(r={idx:t.identifier,x:t.pageX,y:t.pageY})}),r}return{idx:i[0].identifier,x:i[0].pageX,y:i[0].pageY}});var E=H.extend({init:function(n,i){var r,a=this;n.type="text",i=g({},{value:c(n,"value"),min:c(n,"min"),max:c(n,"max"),smallStep:c(n,"step")},i),n=e(n),i&&i.enabled===t&&(i.enabled=!n.is("[disabled]")),H.fn.init.call(a,n,i),u((i=a.options).value)||(i.value=i.min,n.val(i.min)),r=a.wrapper.find(F),new E.Selection(r,a,i),a._drag=new E.Drag(r,"",a,i)},options:{name:"Slider",showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",tooltip:{format:"{0}"}},enable:function(t){var n,i,r=this,a=r.options;if(r.disable(),!1!==t){if(r.wrapper.removeClass("k-state-disabled").addClass("k-state-default"),r.wrapper.find("input").removeAttr("disabled"),n=function(t){var n=I(t),i=r._isHorizontal?n.x:n.y,a=r._getDragableArea(),o=e(t.target);o.hasClass("k-draghandle")?o.addClass("k-state-selected"):(r._update(r._getValueFromPosition(i,a)),r._drag.dragstart(t))},r.wrapper.find(".k-tick, .k-slider-track").bind(T,n).end().bind(T,function(){e(document.documentElement).one("selectstart",p.preventDefault)}),r.wrapper.find(F).bind(S,function(t){e(t.target).removeClass("k-state-selected")}).bind("click",function(e){e.preventDefault()}),i=k(function(e){r._setValueInRange(r._nextValueByIndex(r._valueIndex+1*e))},r),a.showButtons){var o=k(function(e,t){(1===e.which||y&&0===e.which)&&(i(t),this.timeout=setTimeout(k(function(){this.timer=setInterval(function(){i(t)},60)},this),200))},r);r.wrapper.find(".k-button").bind(S,k(function(e){this._clearTimer()},r)).bind("mouseover",function(t){e(t.currentTarget).addClass("k-state-hover")}).bind("mouseout",k(function(t){e(t.currentTarget).removeClass("k-state-hover"),this._clearTimer()},r)).eq(0).bind(C,k(function(e){o(e,1)},r)).click(!1).end().eq(1).bind(C,k(function(e){o(e,-1)},r)).click(!1)}r.wrapper.find(F).bind("keydown",k(this._keydown,r)),a.enabled=!0}},disable:function(){var t=this;t.wrapper.removeClass("k-state-default").addClass("k-state-disabled"),e(t.element).attr("disabled","disabled"),t.wrapper.find(".k-button").unbind(C).bind(C,p.preventDefault).unbind(S).bind(S,p.preventDefault).unbind("mouseleave").bind("mouseleave",p.preventDefault).unbind("mouseover").bind("mouseover",p.preventDefault),t.wrapper.find(".k-tick, .k-slider-track").unbind(T),t.wrapper.find(F).unbind(S).unbind("keydown").unbind("click").bind("keydown",!1),t.options.enabled=!1},_update:function(e){var t=this,n=t.value()!=e;t.value(e),n&&t.trigger("change",{value:t.options.value})},value:function(e){var t=this,n=t.options;if(e=d(e),isNaN(e))return n.value;e>=n.min&&e<=n.max&&n.value!=e&&(t.element.attr("value",l(e)),n.value=e,t._refresh())},_refresh:function(){this.trigger("moveSelection",{value:this.options.value})},_clearTimer:function(e){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(e){var t=this;e.keyCode in t._keyMap&&(t._setValueInRange(t._keyMap[e.keyCode](t.options.value)),e.preventDefault())},_setValueInRange:function(e){var t=this,n=t.options;e=d(e),isNaN(e)?t._update(n.min):(e=_.max(_.min(e,n.max),n.min),t._update(e))},_nextValueByIndex:function(e){var t=this._values.length;return this._values[_.max(0,_.min(e,t-1))]}});E.Selection=function(e,t,n){function i(i){var r=i-n.min,a=t._valueIndex=_.ceil(d(r/n.smallStep)),o=parseInt(t._pixelSteps[a],10),s=t._trackDiv.find(".k-slider-selection"),l=parseInt(e[t._outerSize]()/2,10);s[t._size](o),e.css(t._position,o-l)}i(n.value),t.bind(["change","slide","moveSelection"],function(e){i(parseFloat(e.value,10))})},E.Drag=function(e,t,n,i){var r=this;r.owner=n,r.options=i,r.dragHandle=e,r.dragHandleSize=e[n._outerSize](),r.type=t,r.draggable=new h(e,{threshold:0,dragstart:k(r._dragstart,r),drag:k(r.drag,r),dragend:k(r.dragend,r),dragcancel:k(r.dragcancel,r)}),e.click(!1)},E.Drag.prototype={dragstart:function(e){this.draggable.drag._start(e)},_dragstart:function(t){var n,i=this,r=i.owner,a=i.options,o=a.tooltip,s="";a.enabled?(r.element.unbind("mouseover"),i.dragHandle.addClass("k-state-selected"),i.dragableArea=r._getDragableArea(),i.step=_.max(a.smallStep*(r._maxSelection/r._distance),0),i.type?(i.selectionStart=a.selectionStart,i.selectionEnd=a.selectionEnd,r._setZIndex(i.type)):i.oldVal=i.val=a.value,o.enabled&&(o.template&&(n=i.tooltipTemplate=p.template(o.template)),i.tooltipDiv=e("<div class='k-widget k-tooltip'>\x3c!-- --\x3e</div>").appendTo(document.body),i.type?s=i.tooltipTemplate?n({selectionStart:i.selectionStart,selectionEnd:i.selectionEnd}):m(o.format,i.selectionStart)+" - "+m(o.format,i.selectionEnd):(i.tooltipInnerDiv="<div class='k-callout k-callout-"+(r._isHorizontal?"s":"e")+"'>\x3c!-- --\x3e</div>",s=i.tooltipTemplate?n({value:i.val}):m(o.format,i.val),s+=i.tooltipInnerDiv),i.tooltipDiv.html(s),i.moveTooltip())):t.preventDefault()},drag:function(e){var t,n=this,i=n.owner,r=n.options,a=e.x.location,o=e.y.location,s=n.dragableArea.startPoint,l=n.dragableArea.endPoint,d=r.tooltip,c="",u=n.tooltipTemplate;e.preventDefault(),i._isHorizontal?n.val=n.constrainValue(a,s,l,a>=l):n.val=n.constrainValue(o,l,s,o<=l),n.oldVal!=n.val&&(n.oldVal=n.val,n.type?("firstHandle"==n.type?n.val<n.selectionEnd?n.selectionStart=n.val:n.selectionStart=n.selectionEnd=n.val:n.val>n.selectionStart?n.selectionEnd=n.val:n.selectionStart=n.selectionEnd=n.val,t={values:[n.selectionStart,n.selectionEnd],value:[n.selectionStart,n.selectionEnd]}):t={value:n.val},i.trigger("slide",t),d.enabled&&(n.type?c=n.tooltipTemplate?u({selectionStart:n.selectionStart,selectionEnd:n.selectionEnd}):m(d.format,n.selectionStart)+" - "+m(d.format,n.selectionEnd):(c=n.tooltipTemplate?u({value:n.val}):m(d.format,n.val),c+=n.tooltipInnerDiv),n.tooltipDiv.html(c),n.moveTooltip()))},dragcancel:function(e){return this.owner._refresh(),this._end()},dragend:function(e){var t=this,n=t.owner;return t.type?n._update(t.selectionStart,t.selectionEnd):n._update(t.val),t._end()},_end:function(){var e=this,t=e.owner;return t.options.tooltip.enabled&&t.options.enabled&&e.tooltipDiv.remove(),e.dragHandle.removeClass("k-state-selected"),t.element.bind("mouseover"),!1},moveTooltip:function(){var e,t,n,i=this,r=i.owner,a=0,o=0,s=i.dragHandle.offset(),l=i.tooltipDiv.find(".k-callout");i.type?(t=(e=r.wrapper.find(F)).eq(0).offset(),n=e.eq(1).offset(),r._isHorizontal?(a=n.top,o=t.left+(n.left-t.left)/2):(a=t.top+(n.top-t.top)/2,o=n.left)):(a=s.top,o=s.left),r._isHorizontal?(o-=parseInt((i.tooltipDiv.outerWidth()-i.dragHandle[r._outerSize]())/2,10),a-=i.tooltipDiv.outerHeight()+l.height()+4):(a-=parseInt((i.tooltipDiv.outerHeight()-i.dragHandle[r._outerSize]())/2,10),o-=i.tooltipDiv.outerWidth()+l.width()+4),i.tooltipDiv.css({top:a,left:o})},constrainValue:function(e,t,n,i){var r=this;return t<e&&e<n?r.owner._getValueFromPosition(e,r.dragableArea):i?r.options.max:r.options.min}},p.ui.plugin(E);var z=H.extend({init:function(n,i){var r=this,a=e(n).find("input"),o=a.eq(0)[0],s=a.eq(1)[0];o.type="text",s.type="text",(i=g({},{selectionStart:c(o,"value"),min:c(o,"min"),max:c(o,"max"),smallStep:c(o,"step")},{selectionEnd:c(s,"value"),min:c(s,"min"),max:c(s,"max"),smallStep:c(s,"step")},i))&&i.enabled===t&&(i.enabled=!a.is("[disabled]")),H.fn.init.call(r,n,i),u((i=r.options).selectionStart)||(i.selectionStart=i.min,a.eq(0).val(i.min)),u(i.selectionEnd)||(i.selectionEnd=i.max,a.eq(1).val(i.max));var l=r.wrapper.find(F);new z.Selection(l,r,i),r._firstHandleDrag=new E.Drag(l.eq(0),"firstHandle",r,i),r._lastHandleDrag=new E.Drag(l.eq(1),"lastHandle",r,i)},options:{name:"RangeSlider",tooltip:{format:"{0}"}},enable:function(t){var n,i=this,r=i.options;i.disable(),!1!==t&&(i.wrapper.removeClass("k-state-disabled").addClass("k-state-default"),i.wrapper.find("input").removeAttr("disabled"),n=function(t){var n=I(t),a=i._isHorizontal?n.x:n.y,o=i._getDragableArea(),s=i._getValueFromPosition(a,o),l=e(t.target);l.hasClass("k-draghandle")?l.addClass("k-state-selected"):s<r.selectionStart?(i._setValueInRange(s,r.selectionEnd),i._firstHandleDrag.dragstart(t)):s>i.selectionEnd?(i._setValueInRange(r.selectionStart,s),i._lastHandleDrag.dragstart(t)):s-r.selectionStart<=r.selectionEnd-s?(i._setValueInRange(s,r.selectionEnd),i._firstHandleDrag.dragstart(t)):(i._setValueInRange(r.selectionStart,s),i._lastHandleDrag.dragstart(t))},i.wrapper.find(".k-tick, .k-slider-track").bind(T,n).end().bind(T,function(){e(document.documentElement).one("selectstart",p.preventDefault)}),i.wrapper.find(F).bind(S,function(t){e(t.target).removeClass("k-state-selected")}).bind("click",function(e){e.preventDefault()}),i.wrapper.find(F).eq(0).bind("keydown",k(function(e){this._keydown(e,"firstHandle")},i)).end().eq(1).bind("keydown",k(function(e){this._keydown(e,"lastHandle")},i)),i.options.enabled=!0)},disable:function(){var e=this;e.wrapper.removeClass("k-state-default").addClass("k-state-disabled"),e.wrapper.find("input").attr("disabled","disabled"),e.wrapper.find(".k-tick, .k-slider-track").unbind(T),e.wrapper.find(F).unbind(S).unbind("keydown").unbind("click").bind("keydown",p.preventDefault),e.options.enabled=!1},_keydown:function(e,t){var n=this,i=n.options.selectionStart,r=n.options.selectionEnd;e.keyCode in n._keyMap&&("firstHandle"==t?(i=n._keyMap[e.keyCode](i))>r&&(r=i):i>(r=n._keyMap[e.keyCode](r))&&(i=r),n._setValueInRange(i,r),e.preventDefault())},_update:function(e,t){var n=this,i=n.value(),r=i[0]!=e||i[1]!=t;n.value([e,t]),r&&n.trigger("change",{values:[e,t],value:[e,t]})},value:function(e){return e&&e.length?this._value(e[0],e[1]):this._value()},_value:function(e,t){var n=this,i=n.options,r=i.selectionStart,a=i.selectionEnd;if(isNaN(e)&&isNaN(t))return[r,a];e=d(e),t=d(t),e>=i.min&&e<=i.max&&t>=i.min&&t<=i.max&&e<=t&&(r==e&&a==t||(n.element.find("input").eq(0).attr("value",l(e)).end().eq(1).attr("value",l(t)),i.selectionStart=e,i.selectionEnd=t,n._refresh()))},values:function(e,t){return b(e)?this._value(e[0],e[1]):this._value(e,t)},_refresh:function(){var e=this,t=e.options;e.trigger("moveSelection",{values:[t.selectionStart,t.selectionEnd],value:[t.selectionStart,t.selectionEnd]}),t.selectionStart==t.max&&t.selectionEnd==t.max&&e._setZIndex("firstHandle")},_setValueInRange:function(e,t){var n=this.options;e=_.max(_.min(e,n.max),n.min),t=_.max(_.min(t,n.max),n.min),e==n.max&&t==n.max&&this._setZIndex("firstHandle"),this._update(_.min(e,t),_.max(e,t))},_setZIndex:function(t){this.wrapper.find(F).each(function(n){e(this).css("z-index","firstHandle"==t?1-n:n)})}});z.Selection=function(e,t,n){function i(i){var a=(i=i||[])[0]-n.min,o=i[1]-n.min,s=_.ceil(d(a/n.smallStep)),l=_.ceil(d(o/n.smallStep)),c=t._pixelSteps[s],u=t._pixelSteps[l],p=parseInt(e.eq(0)[t._outerSize]()/2,10);e.eq(0).css(t._position,c-p).end().eq(1).css(t._position,u-p),r(c,u)}function r(e,n){var i=0,r=0,a=t._trackDiv.find(".k-slider-selection");i=_.abs(e-n),r=e<n?e:n,a[t._size](i),a.css(t._position,r-1)}i(t.value()),t.bind(["change","slide","moveSelection"],function(e){i(e.values)})},p.ui.plugin(z)}(jQuery),function(e,t){function n(e){return f.test(e)}function i(e){return p.test(e)}function r(e){return!n(e)&&!i(e)}function a(t,n){return function(i,r){var a=e(i).data(m);if(1==arguments.length)return a[t];a[t]=r,n&&this.element.data("kendoSplitter").trigger(h)}}function o(e){var t=this,n=e.orientation;t.owner=e,t._element=e.element,t.orientation=n,d(t,n===g?w:_),t._resizable=new s.ui.Resizable(e.element,{orientation:n,handle:e.element.children(".k-splitbar-draggable-"+n),hint:c(t._createHint,t),start:c(t._start,t),max:c(t._max,t),min:c(t._min,t),invalidClass:"k-restricted-size-"+n,resizeend:c(t._stop,t)})}var s=window.kendo,l=s.ui,d=e.extend,c=e.proxy,u=l.Widget,p=/^\d+(\.\d+)?px$/i,f=/^\d+(\.\d+)?%$/i,h="resize",g="horizontal",m="pane",v="k-"+m,k="."+v,b=u.extend({init:function(t,n){var i=this;u.fn.init.call(i,t,n),i.wrapper=i.element,i.orientation="vertical"!=i.options.orientation.toLowerCase()?g:"vertical",i.bind(h,c(i._resize,i)),i._initPanes(),i._attachEvents(),e(window).resize(function(){i.trigger(h)}),i.resizing=new o(i),i.element.triggerHandler("init.kendoSplitter")},events:["expand","collapse","contentLoad",h,"layoutChange"],_attachEvents:function(){var t=this,n=".k-splitbar-draggable-"+t.options.orientation,i=function(){t.trigger(h)};t.element.delegate(n,"mouseenter",function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).delegate(n,"mouseleave",function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).delegate(n,"mousedown",function(){t._contentFrames(this).after("<div class='k-overlay' />")}).delegate(n,"mouseup",function(){t._contentFrames(this).next(".k-overlay").remove()}).delegate(".k-splitbar .k-icon:not(.k-resize-handle)","mouseenter",function(){e(this).addClass("k-state-hover")}).delegate(".k-splitbar .k-icon:not(.k-resize-handle)","mouseleave",function(){e(this).removeClass("k-state-hover")}).delegate(".k-splitbar .k-collapse-next, .k-splitbar .k-collapse-prev","click",t._arrowClick("collapse")).delegate(".k-splitbar .k-expand-next, .k-splitbar .k-expand-prev","click",t._arrowClick("expand")).delegate(".k-splitbar","dblclick",c(t._dbclick,t)).parent().closest(".k-splitter").each(function(){var t=e(this),n=t.data("kendoSplitter");n?n.bind(h,i):t.one("init.kendoSplitter",function(){e(this).data("kendoSplitter").bind(h,i),i()})})},options:{name:"Splitter",orientation:g},_initPanes:function(){var t=this,n=t.options.panes||[];t.element.addClass("k-widget").addClass("k-splitter").children().addClass(v).each(function(i,r){var a=n&&n[i];(r=e(r)).data(m,a||{}).toggleClass("k-scrollable",!a||!1!==a.scrollable),t.ajaxRequest(r)}).end(),t.trigger(h)},ajaxRequest:function(t,n,i){var r=this,a=(t=e(t)).data(m);(n=n||a.contentUrl)&&(t.append("<span class='k-icon k-loading k-pane-loading' />"),s.isLocalUrl(n)?e.ajax({url:n,data:i||{},type:"GET",dataType:"html",success:function(e){t.html(e),r.trigger("contentLoad",{pane:t[0]})}}):t.removeClass("k-scrollable").html("<iframe src='"+n+"' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_dbclick:function(t){var n,i=this,r=e(t.target);r.closest(".k-splitter")[0]==i.element[0]&&1===(n=r.children(".k-icon:not(.k-resize-handle)")).length&&(n.is(".k-collapse-prev")?i._triggerAction("collapse",r.prev()):n.is(".k-collapse-next")?i._triggerAction("collapse",r.next()):n.is(".k-expand-prev")?i._triggerAction("expand",r.prev()):n.is(".k-expand-next")&&i._triggerAction("expand",r.next()))},_arrowClick:function(t){var n=this;return function(i){var r,a=e(i.target);a.closest(".k-splitter")[0]==n.element[0]&&(r=a.is(".k-"+t+"-prev")?a.parent().prev():a.parent().next(),n._triggerAction(t,r))}},_updateSplitBar:function(e,t,n){var i=function(e,t){return t?"<div class='k-icon "+e+"' />":""},r=this.orientation,a=!1!==t.resizable&&!1!==n.resizable,o=t.collapsible,s=t.collapsed,l=n.collapsible,d=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+r).removeClass("k-splitbar-"+r+"-hover").toggleClass("k-splitbar-draggable-"+r,a&&!s&&!d).toggleClass("k-splitbar-static-"+r,!a&&!o&&!l).html(i("k-collapse-prev",o&&!s&&!d)+i("k-expand-prev",o&&s&&!d)+i("k-resize-handle",a)+i("k-collapse-next",l&&!d&&!s)+i("k-expand-next",l&&d&&!s))},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),i=n.prev(k).data(m),r=n.next(k).data(m);r&&t._updateSplitBar(n,i,r)})},_contentFrames:function(t){return e(t).siblings(k).find("> .k-content-frame")},_resize:function(){var t=this,i=t.element,a=i.children(":not(.k-splitbar)"),o=t.orientation==g,s=i.children(".k-splitbar"),l=s.length,d=o?"width":"height",c=i[d]();0===l?(l=a.length-1,a.slice(0,l).after("<div class='k-splitbar' />"),t._updateSplitBars(),s=i.children(".k-splitbar")):t._updateSplitBars(),s.each(function(){c-=this[o?"offsetWidth":"offsetHeight"]});var u=0,p=0,f=e();a.css({position:"absolute",top:0})[d](function(){var t,i=e(this).data(m)||{};if(i.collapsed)t=0,e(this).css("overflow","hidden");else{if(r(i.size))return void(f=f.add(this));t=parseInt(i.size,10),n(i.size)&&(t=Math.floor(t*c/100))}return p++,u+=t,t}),c-=u;var h=f.length,v=Math.floor(c/h);f.slice(0,h-1).css(d,v).end().eq(h-1).css(d,c-(h-1)*v);var k=0,b=o?"height":"width",_=o?"left":"top",w=o?"offsetWidth":"offsetHeight";if(0===h){var y=a.filter(function(){return!(e(this).data(m)||{}).collapsed}).last();y[d](c+y[0][w])}i.children().css(b,i[b]()).each(function(e,t){t.style[_]=Math.floor(k)+"px",k+=t[w]}),t.trigger("layoutChange")},toggle:function(t,n){var i;i=(t=e(t)).data(m),1==arguments.length&&(n=void 0!==i.collapsed&&i.collapsed),i.collapsed=!n,i.collapsed?t.css("overflow","hidden"):t.css("overflow",""),this.trigger(h)},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},size:a("size",!0),min:a("min"),max:a("max")});l.plugin(b);var _={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},w={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};o.prototype={_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),a=r.prev(),o=r.next(),s=a.data(m),l=o.data(m),d=parseInt(a[0].style[n.positioningProperty],10),c=parseInt(o[0].style[n.positioningProperty],10)+o[0][n.sizingDomProperty]-r[0][n.sizingDomProperty],u=n._element.css(n.sizingProperty),p=function(e){var t=parseInt(e,10);return(i(e)?t:u*t/100)||0},f=p(s.min),h=p(s.max)||c-d,g=p(l.min),v=p(l.max)||c-d;n.previousPane=a,n.nextPane=o,n._maxPosition=Math.min(c-g,d+h),n._minPosition=Math.max(d+f,c-v)},_max:function(e){return this._maxPosition},_min:function(e){return this._minPosition},_stop:function(t){var n=this,i=e(t.currentTarget),a=n.owner;if(a._contentFrames(i).next(".k-overlay").remove(),t.keyCode!==s.keys.ESC){var o=t.position,l=i.prev(),d=i.next(),c=l.data(m),u=d.data(m),p=o-parseInt(l[0].style[n.positioningProperty],10),f=parseInt(d[0].style[n.positioningProperty],10)+d[0][n.sizingDomProperty]-o-i[0][n.sizingDomProperty],g=n._element.children(k).filter(function(){return r(e(this).data(m).size)}).length;(!r(c.size)||g>1)&&(r(c.size)&&g--,c.size=p+"px"),(!r(u.size)||g>1)&&(u.size=f+"px"),a.trigger(h)}return!1}}}(jQuery),function(e,t){function n(t){return e.map(i(t),function(e){return e.name}).join(", ")}function i(e){var t=e[0];return t.files?r(t.files):[{name:s(t.value),extension:o(t.value),size:null}]}function r(t){return e.map(t,function(e){return a(e)})}function a(e){var t=e.name||e.fileName;return{name:t,extension:o(t),size:e.size||e.fileSize,rawFile:e}}function o(e){var t=e.match(k);return t?t[0]:""}function s(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,n,i){if(n._supportsRemove()){var r=t.data("fileNames"),a=e.map(r,function(e){return e.name});n._submitRemove(a,i,function(e,i,a){n._removeFileEntry(t),n.trigger(b,{operation:"remove",files:r,response:e,XMLHttpRequest:a})},function(e,t,t){n.trigger(_,{operation:"remove",files:r,XMLHttpRequest:e});v("Server response: "+e.responseText)})}}function d(t,n,i){var r=!1,a="";try{a=e.parseJSON(t),r=!0}catch(e){i()}r&&n(a)}function c(e){e.stopPropagation(),e.preventDefault()}function u(e,t,n){var i,r;e.bind("dragenter",function(e){t(),r=new Date,i||(i=setInterval(function(){new Date-r>100&&(n(),clearInterval(i),i=null)},100))}).bind("dragover",function(e){r=new Date})}function p(e){return e.children(".k-icon").is(".k-loading, .k-success, .k-fail")}function f(t){return e(t.target).closest(".k-file")}function h(){var n={},i=e("meta[name=csrf-token]").attr("content"),r=e("meta[name=csrf-param]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){n[this.name]=this.value}),r!==t&&i!==t&&(n[r]=i),n}var g=window.kendo,m=g.ui.Widget,v=g.logToConsole,k=/\.([^\.]+)$/,b="success",_="error",w=m.extend({init:function(n,i){var r=this;m.fn.init.call(r,n,i),r.name=n.name,r.multiple=r.options.multiple,r.localization=r.options.localization;var a=r.element;r.wrapper=a.closest(".k-upload"),0==r.wrapper.length&&(r.wrapper=r._wrapInput(a)),r._activeInput(a),r.toggle(r.options.enabled),a.closest("form").bind({submit:e.proxy(r._onParentFormSubmit,r),reset:e.proxy(r._onParentFormReset,r)}),r.options.async.saveUrl!=t?(r._module=r._supportsFormData()?new C(r):new x(r),r._async=!0):r._module=new y(r),r._supportsDrop()&&r._setupDropZone(),r.wrapper.delegate(".k-upload-action","click",e.proxy(r._onFileAction,r)).delegate(".k-upload-selected","click",e.proxy(r._onUploadSelected,r)).delegate(".k-file","t:progress",e.proxy(r._onFileProgress,r)).delegate(".k-file","t:upload-success",e.proxy(r._onUploadSuccess,r)).delegate(".k-file","t:upload-error",e.proxy(r._onUploadError,r))},events:["select","upload",b,_,"complete","cancel","progress","remove"],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,async:{removeVerb:"POST",autoUpload:!0},localization:{select:"Select...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusFailed:"failed"}},setOptions:function(e){var t=this,n=t.element;m.fn.setOptions.call(t,e),t.multiple=t.options.multiple,n.attr("multiple",!!t._supportsMultiple()&&t.multiple),t.toggle(t.options.enabled)},enable:function(e){e=void 0===e||e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=void 0===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e)},_addInput:function(t){var n=this;t.insertAfter(n.element).data("kendoUpload",n),e(n.element).hide().removeAttr("id"),n._activeInput(t)},_activeInput:function(t){var n=this,i=n.wrapper;n.element=t,t.attr("multiple",!!n._supportsMultiple()&&n.multiple).attr("autocomplete","off").click(function(e){i.hasClass("k-state-disabled")&&e.preventDefault()}).change(e.proxy(n._onInputChange,n))},_onInputChange:function(t){var n=this,r=e(t.target);n.trigger("select",{files:i(r)})?(n._addInput(r.clone().val("")),r.remove()):r.trigger("t:select")},_onDrop:function(t){var n=this,i=t.originalEvent.dataTransfer.files;c(t),i.length>0&&(n.trigger("select",{files:r(i)})||e(".k-dropzone",n.wrapper).trigger("t:select",[i]))},_enqueueFile:function(t,n){var i,r,a=this,o=e(".k-upload-files",a.wrapper);return 0==o.length&&(o=e("<ul class='k-upload-files k-reset'></ul>").appendTo(a.wrapper),a.options.showFileList||o.hide()),i=e(".k-file",o),r=e("<li class='k-file'><span class='k-filename' title='"+t+"'>"+t+"</span></li>").appendTo(o).data(n),a._async&&r.prepend("<span class='k-icon'></span>"),a.multiple||i.trigger("t:remove"),r},_removeFileEntry:function(t){var n,i=t.closest(".k-upload-files");t.remove(),(n=e(".k-file",i)).find("> .k-fail").length===n.length&&this._hideUploadButton(),0==n.length&&i.remove()},_fileAction:function(e,t){var n={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"};n.hasOwnProperty(t)&&(this._clearFileAction(e),e.append(this._renderAction(n[t],this.localization[t]).addClass("k-upload-action")))},_fileState:function(e,t){var n=this.localization,i={uploading:{cssClass:"k-loading",text:n.statusUploading},uploaded:{cssClass:"k-success",text:n.statusUploaded},failed:{cssClass:"k-fail",text:n.statusFailed}}[t];i&&(e.children(".k-icon").text(i.text)[0].className="k-icon "+i.cssClass)},_renderAction:function(t,n){return e(""!=t?"<button type='button' class='k-button k-button-icontext'><span class='k-icon "+t+"'></span>"+n+"</button>":"<button type='button' class='k-button'>"+n+"</button>")},_clearFileAction:function(e){e.find(".k-upload-action").remove()},_onFileAction:function(t){var n=this;if(!n.wrapper.hasClass("k-state-disabled")){var i=e(t.target).closest(".k-upload-action"),r=i.find(".k-icon"),a=i.closest(".k-file"),o={files:a.data("fileNames")};r.hasClass("k-delete")?n.trigger("remove",o)||a.trigger("t:remove",o.data):r.hasClass("k-cancel")?(n.trigger("cancel",o),a.trigger("t:cancel"),this._checkAllComplete()):r.hasClass("k-retry")&&a.trigger("t:retry")}return!1},_onUploadSelected:function(){return this.wrapper.trigger("t:saveSelected"),!1},_onFileProgress:function(t,n){var i=e(".k-progress-status",t.target);0==i.length&&(i=e("<span class='k-progress'><span class='k-state-selected k-progress-status' style='width: 0;'></span></span>").appendTo(e(".k-filename",t.target)).find(".k-progress-status")),i.width(n+"%"),this.trigger("progress",{files:f(t).data("fileNames"),percentComplete:n})},_onUploadSuccess:function(e,t,n){var i=f(e);this._fileState(i,"uploaded"),this.trigger(b,{files:i.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:n}),this._supportsRemove()?this._fileAction(i,"remove"):this._clearFileAction(i),this._checkAllComplete()},_onUploadError:function(e,t){var n=f(e);this._fileState(n,"failed"),this._fileAction(n,"retry");this.trigger(_,{operation:"upload",files:n.data("fileNames"),XMLHttpRequest:t});v("Server response: "+t.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0==t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_onParentFormSubmit:function(){var t=this.element;if(t.trigger("t:abort"),!t.value){var n=e(t);n.attr("disabled","disabled"),window.setTimeout(function(){n.removeAttr("disabled")},0)}},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){return!e.browser.opera},_supportsDrop:function(){var e=this._userAgent().toLowerCase();return!(!/chrome/.test(e)&&/safari/.test(e)&&/windows/.test(e))&&this._supportsFormData()&&this.options.async.saveUrl!=t},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>");var t=e(".k-dropzone",this.wrapper).append(e("<em>"+this.localization.dropFilesHere+"</em>")).bind({dragenter:c,dragover:function(e){e.preventDefault()},drop:e.proxy(this._onDrop,this)});u(t,function(){t.addClass("k-dropzone-hovered")},function(){t.removeClass("k-dropzone-hovered")}),u(e(document),function(){t.addClass("k-dropzone-active")},function(){t.removeClass("k-dropzone-active")})},_supportsRemove:function(){return this.options.async.removeUrl!=t},_submitRemove:function(t,n,i,r){var a=this.options.async.removeField||"fileNames",o=e.extend(n,h());o[a]=t,e.ajax({type:this.options.async.removeVerb,dataType:"json",url:this.options.async.removeUrl,traditional:!0,data:o,success:i,error:r})},_wrapInput:function(e){return e.wrap("<div class='k-widget k-upload'><div class='k-button k-upload-button'></div></div>"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0==e(".k-file .k-icon.k-loading",this.wrapper).length&&this.trigger("complete")}}),y=function(t){this.name="syncUploadModule",this.element=t.wrapper,this.upload=t,this.element.bind("t:select",e.proxy(this.onSelect,this)).bind("t:remove",e.proxy(this.onRemove,this)).closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};y.prototype={onSelect:function(t){var r=this.upload,a=e(t.target);r._addInput(a.clone().val(""));var o=r._enqueueFile(n(a),{relatedInput:a,fileNames:i(a)});r._fileAction(o,"remove")},onRemove:function(e){var t=f(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}};var x=function(t){this.name="iframeUploadModule",this.element=t.wrapper,this.upload=t,this.iframes=[],this.element.bind("t:select",e.proxy(this.onSelect,this)).bind("t:cancel",e.proxy(this.onCancel,this)).bind("t:retry",e.proxy(this.onRetry,this)).bind("t:remove",e.proxy(this.onRemove,this)).bind("t:saveSelected",e.proxy(this.onSaveSelected,this)).bind("t:abort",e.proxy(this.onAbort,this))};w._frameId=0,x.prototype={onSelect:function(t){var n=this.upload,i=e(t.target),r=this.prepareUpload(i);n.options.async.autoUpload?this.performUpload(r):(n._supportsRemove()&&this.upload._fileAction(r,"remove"),n._showUploadButton())},prepareUpload:function(t){var r=this.upload,a=e(r.element),o=r.options.async.saveField||t.attr("name");r._addInput(t.clone().val("")),t.attr("name",o);var s=this.createFrame(r.name+"_"+w._frameId++);this.registerFrame(s);var l=this.createForm(r.options.async.saveUrl,s.attr("name")).append(a),d=r._enqueueFile(n(t),{frame:s,relatedInput:a,fileNames:i(t)});return s.data({form:l,file:d}),d},performUpload:function(t){var n={files:t.data("fileNames")},i=t.data("frame"),r=this.upload;if(r.trigger("upload",n))r._removeFileEntry(i.data("file")),this.cleanupFrame(i),this.unregisterFrame(i);else{r._hideUploadButton(),i.appendTo(document.body);var a=i.data("form").appendTo(document.body);n.data=e.extend({},n.data,h());for(var o in n.data){var s=a.find("input[name='"+o+"']");0==s.length&&(s=e("<input>",{type:"hidden",name:o}).appendTo(a)),s.val(n.data[o])}r._fileAction(t,"cancel"),r._fileState(t,"uploading"),i.one("load",e.proxy(this.onIframeLoad,this)),a[0].submit()}},onSaveSelected:function(t){var n=this;e(".k-file",this.element).each(function(){var t=e(this);p(t)||n.performUpload(t)})},onIframeLoad:function(t){var n=e(t.target);try{var i=n.contents().text()}catch(t){i="Error trying to get server response: "+t}this.processResponse(n,i)},processResponse:function(t,n){var i=t.data("file"),r=this,a={responseText:n};d(n,function(n){e.extend(a,{statusText:"OK",status:"200"}),i.trigger("t:progress",[100]),i.trigger("t:upload-success",[n,a]),r.cleanupFrame(t),r.unregisterFrame(t)},function(){e.extend(a,{statusText:"error",status:"500"}),i.trigger("t:upload-error",[a])})},onCancel:function(t){var n=e(t.target).data("frame");this.stopFrameSubmit(n),this.cleanupFrame(n),this.unregisterFrame(n),this.upload._removeFileEntry(n.data("file"))},onRetry:function(e){var t=f(e);this.performUpload(t)},onRemove:function(e,t){var n=f(e),i=n.data("frame");i?(this.unregisterFrame(i),this.upload._removeFileEntry(n),this.cleanupFrame(i)):l(n,this.upload,t)},onAbort:function(){var t=this.element,n=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),n.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"' id='"+t+"' style='display:none;' />")},createForm:function(t,n){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"' target='"+n+"'/>")},stopFrameSubmit:function(e){void 0!==e.stop?e.stop():e.document&&(e.document.execCommand("Stop"),e.contentWindow.location.href=e.contentWindow.location.href)},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}};var C=function(t){this.name="formDataUploadModule",this.element=t.wrapper,this.upload=t,this.element.bind("t:select",e.proxy(this.onSelect,this)).bind("t:cancel",e.proxy(this.onCancel,this)).bind("t:remove",e.proxy(this.onRemove,this)).bind("t:retry",e.proxy(this.onRetry,this)).bind("t:saveSelected",e.proxy(this.onSaveSelected,this)).bind("t:abort",e.proxy(this.onAbort,this))};C.prototype={onSelect:function(t,n){var i=this.upload,a=this,o=e(t.target),s=n?r(n):this.inputFiles(o),l=this.prepareUpload(o,s);e.each(l,function(){i.options.async.autoUpload?a.performUpload(this):(i._supportsRemove()&&i._fileAction(this,"remove"),i._showUploadButton())})},prepareUpload:function(t,n){var i=this.enqueueFiles(n);return t.is("input")&&(e.each(i,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",i),this.upload._addInput(t.clone().val(""))),i},enqueueFiles:function(e){var t=this.upload;fileEntries=[];for(var n=0;n<e.length;n++){var i=e[n],r=i.name,a=t._enqueueFile(r,{fileNames:[i]});a.data("file",i),fileEntries.push(a)}return fileEntries},inputFiles:function(e){return i(e)},performUpload:function(t){var n=this.upload,i=this.createFormData(t.data("file")),r={files:t.data("fileNames")};if(n.trigger("upload",r))this.removeFileEntry(t);else{n._fileAction(t,"cancel"),n._hideUploadButton(),r.data=e.extend({},r.data,h());for(var a in r.data)i.append(a,r.data[a]);n._fileState(t,"uploading"),this.postFormData(this.upload.options.async.saveUrl,i,t)}},onSaveSelected:function(t){var n=this;e(".k-file",this.element).each(function(){var t=e(this);p(t)||n.performUpload(t)})},onCancel:function(e){var t=f(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=f(e);this.performUpload(t)},onRemove:function(e,t){var n=f(e);n.children(".k-icon").is(".k-success")?l(n,this.upload,t):this.removeFileEntry(n)},postFormData:function(e,t,n){var i=new XMLHttpRequest,r=this;n.data("request",i),i.addEventListener("load",function(e){r.onRequestSuccess.call(r,e,n)},!1),i.addEventListener(_,function(e){r.onRequestError.call(r,e,n)},!1),i.upload.addEventListener("progress",function(e){r.onRequestProgress.call(r,e,n)},!1),i.open("POST",e),i.withCredentials="true",i.send(t)},createFormData:function(e){var t=new FormData,n=this.upload;return t.append(n.options.async.saveField||n.name,e.rawFile),t},onRequestSuccess:function(e,t){function n(){t.trigger("t:upload-error",[i])}var i=e.target,r=this;i.status>=200&&i.status<=299?d(i.responseText,function(e){t.trigger("t:progress",[100]),t.trigger("t:upload-success",[e,i]),r.cleanupFileEntry(t)},n):n()},onRequestError:function(e,t){var n=e.target;t.trigger("t:upload-error",[n])},cleanupFileEntry:function(t){var n=t.data("relatedInput"),i=!0;n&&(e.each(n.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(i=i&&this.children(".k-icon").is(".k-success"))}),i&&n.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(e,t){var n=Math.round(100*e.loaded/e.total);t.trigger("t:progress",[n])},stopUploadRequest:function(e){e.data("request").abort()}},g.ui.plugin(w)}(jQuery),function(e,t){function n(e,t,n){return Math.max(Math.min(e,n),t)}function i(e){return e.children(_).data("kendoWindow")}function r(){return e(k).filter(function(){var t=e(this);return t.is(y)&&i(t).options.modal}).sort(function(t,n){return+e(t).css("zIndex")-+e(n).css("zIndex")})}function a(e,t){return function(){var e=this,n=e.wrapper,i=n[0].style,r=e.options;if(!r.isMaximized&&!r.isMinimized)return e.restoreOptions={width:i.width,height:i.height},n.find(w).hide().end().find(S).parent().hide().eq(0).before(d.action({name:"Restore"})),t.call(e),e}}function o(e){var t=this;t.owner=e,t._draggable=new p(e.wrapper,{filter:w,group:e.wrapper.id+"-resizing",dragstart:h(t.dragstart,t),drag:h(t.drag,t),dragend:h(t.dragend,t)})}function s(e){var t=this;t.owner=e,t._draggable=new p(e.wrapper,{filter:b,group:e.wrapper.id+"-moving",dragstart:h(t.dragstart,t),drag:h(t.drag,t),dragend:h(t.dragend,t),dragcancel:h(t.dragcancel,t)})}function l(n){var a,o,s,l=n.wrapper,d=n.options,c=d.animation.open,u=d.animation.close;l.is(y)&&!n.trigger(C)&&(d.visible=!1,a=r(),o=d.modal&&1==a.length,s=d.modal?n._overlay(!0):e(t),o?u.duration?s.kendoStop().kendoAnimate({effects:{fadeOut:{properties:{opacity:0}}},duration:u.duration,hide:!0}):s.hide():a.length&&i(a.eq(a.length-2))._overlay(!0),l.kendoStop().kendoAnimate({effects:u.effects||c.effects,reverse:!0===u.reverse,duration:u.duration,complete:function(){l.hide(),n.trigger(x)}})),n.options.isMaximized&&(e("html, body").css(T,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop))}var d,c=window.kendo,u=c.ui.Widget,p=c.ui.Draggable,f=e.isPlainObject,h=e.proxy,g=e.extend,m=e.each,v=c.template,k=".k-window",b=".k-window-titlebar",_=".k-window-content",w=".k-resize-handle",y=":visible",x="deactivate",C="close",T="overflow",S=".k-window-actions .k-i-minimize,.k-window-actions .k-i-maximize",F=c.isLocalUrl,D=u.extend({keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},init:function(t,n){var i,r,a,p,g,v=this;u.fn.init.call(v,t,n),n=v.options,t=v.element,g=n.content,v.appendTo=e(n.appendTo||document.body),v._animations(),f(g)||(g=n.content={url:g}),t.parent().is(v.appendTo)||(t.is(y)?r=t.offset():(a=t.css("visibility"),p=t.css("display"),t.css({visibility:"hidden",display:""}),r=t.offset(),t.css({visibility:a,display:p}))),void 0===n.visible&&(n.visible=t.is(y)),i=v.wrapper=t.closest(k),t.is(".k-content")&&i[0]||(t.addClass("k-window-content k-content"),v._createWindow(t,n),i=v.wrapper=t.closest(k),v._dimensions()),r&&i.css({top:r.top,left:r.left}),g&&v.refresh(g),v.toFront(),n.visible&&n.modal&&v._overlay(i.is(y)).css({opacity:.5}),i.on({mouseenter:function(){e(this).addClass("k-state-hover")},mouseleave:function(){e(this).removeClass("k-state-hover")},click:h(v._windowActionHandler,v)},".k-window-titlebar .k-window-action"),n.resizable&&(i.on("dblclick",b,h(v.toggleMaximization,v)),m("n e s w se sw ne nw".split(" "),function(e,t){i.append(d.resizeHandle(t))}),v.resizing=new o(v)),n.draggable&&(v.dragging=new s(v)),n.timeout>0&&window.setTimeout(function(){l(v)},1e3*n.timeout),i.add(i.find(".k-resize-handle,.k-window-titlebar")).on("mousedown",h(v.toFront,v)),v.touchScroller=c.touchScroller(t),e(window).resize(h(v._onDocumentResize,v)),n.visible&&(v.trigger("open"),v.trigger("activate")),c.notify(v)},_dimensions:function(){var e=this,t=e.wrapper,n=e.element,i=e.options;e.title(i.title),i.width&&t.width(i.width),i.height&&t.height(i.height),m(["minWidth","minHeight","maxWidth","maxHeight"],function(e,t){var r=i[t];r&&r!=1/0&&n.css(t,r)}),i.visible||t.hide()},_animations:function(){var e=this.options;!1===e.animation&&(e.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}})},setOptions:function(e){u.fn.setOptions.call(this,e),this._animations(),this._dimensions()},events:["open","activate",x,C,"refresh","resize","dragstart","dragend","error"],options:{name:"Window",animation:{open:{effects:{zoom:{direction:"in"},fade:{direction:"in"}},duration:350,show:!0},close:{effects:{zoom:{direction:"out",properties:{scale:.7}},fade:{direction:"out"}},duration:350,hide:!0}},title:"",actions:["Close"],modal:!1,resizable:!0,draggable:!0,minWidth:90,minHeight:50,maxWidth:1/0,maxHeight:1/0,timeout:0},_overlay:function(t){var n=this.appendTo.children(".k-overlay"),i=this.wrapper;return n.length||(n=e("<div class='k-overlay' />")),n.insertBefore(i[0]).toggle(t).css("zIndex",parseInt(i.css("zIndex"),10)-1),n},_windowActionHandler:function(t){var n=e(t.target).closest(".k-window-action").find(".k-icon"),i=this;m({"k-i-close":i.close,"k-i-maximize":i.maximize,"k-i-minimize":i.minimize,"k-i-restore":i.restore,"k-i-refresh":i.refresh},function(e,r){if(n.hasClass(e))return t.preventDefault(),r.call(i),!1})},center:function(){var t=this.wrapper,n=e(window);return t.css({left:n.scrollLeft()+Math.max(0,(n.width()-t.width())/2),top:n.scrollTop()+Math.max(0,(n.height()-t.height())/2)}),this},title:function(e){var t=this,n=t.wrapper,i=t.options,r=n.find(b),a=r.children(".k-window-title"),o=r.outerHeight();return arguments.length?(!1===e?(n.addClass("k-window-titleless"),r.remove()):(r.length||n.prepend(d.titlebar(g(d,i))),n.css("padding-top",o),r.css("margin-top",-o)),a.text(e),t):a.text()},content:function(e){var t=this.wrapper.children(_);return e?(t.html(e),this):t.html()},open:function(){var t,n=this,i=n.wrapper,r=n.options,a=r.animation.open,o=i.children(_),s=o.css(T);return n.trigger("open")||(n.toFront(),r.visible=!0,r.modal&&(t=n._overlay(!1),a.duration?t.kendoStop().kendoAnimate({effects:{fade:{direction:"out",properties:{opacity:.5}}},duration:a.duration,show:!0}):t.css("opacity",.5).show()),i.is(y)||(o.css(T,"hidden"),i.show().kendoStop().kendoAnimate({effects:a.effects,duration:a.duration,complete:function(){n.trigger("activate"),o.css(T,s)}}))),r.isMaximized&&(n._documentScrollTop=e(document).scrollTop(),e("html, body").css(T,"hidden")),n},close:function(){var n,a,o,s=this,l=s.wrapper,d=s.options,c=d.animation.open,u=d.animation.close;return l.is(y)&&!s.trigger(C)&&(d.visible=!1,n=r(),a=d.modal&&1==n.length,o=d.modal?s._overlay(!0):e(t),a?u.duration?o.kendoStop().kendoAnimate({effects:{fadeOut:{properties:{opacity:0}}},duration:u.duration,hide:!0}):o.hide():n.length&&i(n.eq(n.length-2))._overlay(!0),l.kendoStop().kendoAnimate({effects:u.effects||c.effects,reverse:!0===u.reverse,duration:u.duration,complete:function(){l.hide(),s.trigger(x)}})),s.options.isMaximized&&(e("html, body").css(T,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop)),s},toFront:function(){var t=this,n=t.wrapper,i=n[0],r=+n.css("zIndex"),a=r;return e(k).each(function(t,n){var a=e(n),o=a.css("zIndex"),s=a.find(_);isNaN(o)||(r=Math.max(+o,r)),n!=i&&s.find("> .k-content-frame").length>0&&s.append(d.overlay)}),(10001==r||a<r)&&(n.css("zIndex",r+2),t.element.find("> .k-overlay").remove()),t},toggleMaximization:function(){return this[this.options.isMaximized?"restore":"maximize"]()},restore:function(){var t=this,n=t.options,i=t.restoreOptions;if(n.isMaximized||n.isMinimized)return t.wrapper.css({position:"absolute",left:i.left,top:i.top,width:i.width,height:i.height}).find(".k-window-content,.k-resize-handle").show().end().find(".k-window-titlebar .k-i-restore").parent().remove().end().end().find(S).parent().show(),e("html, body").css(T,""),this._documentScrollTop&&this._documentScrollTop>0&&e(document).scrollTop(this._documentScrollTop),n.isMaximized=n.isMinimized=!1,t.trigger("resize"),t},maximize:a("maximize",function(){var t=this,n=t.wrapper,i=n.position();g(t.restoreOptions,{left:i.left,top:i.top}),n.css({left:0,top:0,position:"fixed"}),this._documentScrollTop=e(document).scrollTop(),e("html, body").css(T,"hidden"),t.options.isMaximized=!0,t._onDocumentResize()}),minimize:a("minimize",function(){var e=this;e.wrapper.css("height",""),e.element.hide(),e.options.isMinimized=!0}),_onDocumentResize:function(){var t=this,n=t.wrapper,i=e(window);t.options.isMaximized&&(n.css({width:i.width(),height:i.height()-parseInt(n.css("padding-top"),10)}),t.trigger("resize"))},refresh:function(t){var n,i,r=this,a=r.options,o=e(r.element),s=a.iframe;return f(t)||(t={url:t}),t=g({},a.content,t),i=t.url,i?(void 0===s&&(s=!F(i)),s?(n=o.find(".k-content-frame")[0])?n.src=i||n.src:o.html(d.contentFrame(g({},a,{content:t}))):r._ajaxRequest(t)):t.template&&r.content(v(t.template)({})),r},_ajaxRequest:function(t){var n=this,i=t.template,r=n.wrapper.find(".k-window-titlebar .k-i-refresh"),a=setTimeout(function(){r.addClass("k-loading")},100);e.ajax(g({type:"GET",dataType:"html",cache:!1,error:h(function(e,t){n.trigger("error")},n),complete:function(){clearTimeout(a),r.removeClass("k-loading")},success:h(function(e,t){i&&(e=v(i)(e||{})),n.element.html(e),n.trigger("refresh")},n)},t))},destroy:function(){var e,t=this;t.wrapper.remove(),e=r(),t.options.modal&&!e.length?t._overlay(!1).remove():e.length>0&&i(e.eq(e.length-2))._overlay(!0)},_createWindow:function(){var t,n,i=this,r=i.element,a=i.options;!1===a.scrollable&&r.attr("style","overflow:hidden;"),a.iframe&&r.html(d.contentFrame(a)),n=e(d.wrapper(a)),!1!==a.title&&n.append(d.titlebar(g(d,a))),n.toggleClass("k-rtl",!!i.element.closest(".k-rtl").length),t=r.find("iframe").map(function(e){var t=this.getAttribute("src");return this.src="",t}),n.appendTo(i.appendTo).append(r).find("iframe").each(function(e){this.src=t[e]}),r.show()}});d={wrapper:v("<div class='k-widget k-window' />"),action:v("<a href='\\#' class='k-window-action k-link'><span class='k-icon k-i-#= name.toLowerCase() #'>#= name #</span></a>"),titlebar:v("<div class='k-window-titlebar k-header'>&nbsp;<span class='k-window-title'>#= title #</span><div class='k-window-actions k-header'># for (var i = 0; i < actions.length; i++) { ##= action({ name: actions[i] }) ## } #</div></div>"),overlay:"<div class='k-overlay' />",contentFrame:v("<iframe src='#= content.url #' title='#= title #' frameborder='0' class='k-content-frame'>This page requires frames in order to show content</iframe>"),resizeHandle:v("<div class='k-resize-handle k-resize-#= data #'></div>")},o.prototype={dragstart:function(t){var n=this,i=n.owner,r=i.wrapper;n.elementPadding=parseInt(i.wrapper.css("padding-top"),10),n.initialCursorPosition=r.offset(),n.resizeDirection=t.currentTarget.prop("className").replace("k-resize-handle k-resize-",""),n.initialSize={width:r.width(),height:r.height()},n.containerOffset=i.appendTo.offset(),r.append(d.overlay).find(w).not(t.currentTarget).hide(),e("body").css("cursor",t.currentTarget.css("cursor"))},drag:function(e){var t,i,r,a,o=this,s=o.owner,l=s.wrapper,d=s.options,c=o.resizeDirection,u=o.containerOffset,p=o.initialCursorPosition,f=o.initialSize,h=e.x.location,g=e.y.location;c.indexOf("e")>=0?(t=h-p.left,l.width(n(t,d.minWidth,d.maxWidth))):c.indexOf("w")>=0&&(t=n((a=p.left+f.width)-h,d.minWidth,d.maxWidth),l.css({left:a-t-u.left,width:t})),c.indexOf("s")>=0?(i=g-p.top-o.elementPadding,l.height(n(i,d.minHeight,d.maxHeight))):c.indexOf("n")>=0&&(i=n((r=p.top+f.height)-g,d.minHeight,d.maxHeight),l.css({top:r-i-u.top,height:i})),s.trigger("resize")},dragend:function(t){var n=this,i=n.owner,r=i.wrapper;return r.find(".k-overlay").remove().end().find(w).not(t.currentTarget).show(),e("body").css("cursor",""),i.touchScroller&&i.touchScroller.reset(),27==t.keyCode&&r.css(n.initialCursorPosition).css(n.initialSize),!1}},s.prototype={dragstart:function(t){var n=this.owner,i=n.element,r=i.find(".k-window-actions"),a=n.appendTo.offset();n.trigger("dragstart"),n.initialWindowPosition=n.wrapper.position(),n.startPosition={left:t.x.client-n.initialWindowPosition.left,top:t.y.client-n.initialWindowPosition.top},r.length>0?n.minLeftPosition=r.outerWidth()+parseInt(r.css("right"),10)-i.outerWidth():n.minLeftPosition=20-i.outerWidth(),n.minLeftPosition-=a.left,n.minTopPosition=-a.top,n.wrapper.append(d.overlay).find(w).hide(),e("body").css("cursor",t.currentTarget.css("cursor"))},drag:function(t){var n=this.owner,i={left:Math.max(t.x.client-n.startPosition.left,n.minLeftPosition),top:Math.max(t.y.client-n.startPosition.top,n.minTopPosition)};e(n.wrapper).css(i)},dragcancel:function(t){var n=this.owner;n.wrapper.find(w).show().end().find(".k-overlay").remove(),e("body").css("cursor",""),t.currentTarget.closest(k).css(n.initialWindowPosition)},dragend:function(t){var n=this.owner;return n.wrapper.find(w).show().end().find(".k-overlay").remove(),e("body").css("cursor",""),n.trigger("dragend"),!1}},c.ui.plugin(D)}(jQuery),function(e,t){var n=window.kendo,i=(n.keys,n.ui),r=i.Widget,a=n.support.placeholder,o=(n.support.touch,n.getCulture),s=e.proxy,l=r.extend({init:function(e,t){var i=this,a=t.textTransform,o=t.textType,l=("ip"==o.toLowerCase()||("time"==o.toLowerCase()||t.allowChar),t&&void 0!==t[l]);r.fn.init.call(i,e,t),"ip"==o?(t.allowChar=".",i.element.attr("maxLength","15")):"contact"==o?(t.allowChar="",i.element.attr("maxLength",t.maxLength)):"time"==o&&(t.allowChar=void 0!=t.allowChar&&""!=t.allowChar?":":"",i.element.attr("maxLength",void 0!=t.allowChar&&""!=t.allowChar?"5":"4").css("width","40px")),t=i.options,(e=i.element.addClass("k-input").css("text-transform",a).attr("autocomplete","off").keypress(s(i._keypress,i)).blur(s(i._blur,i)).change(s(i._removeWhiteSpace,i))).closest("form").bind("reset",function(){setTimeout(function(){i.value(e[0].value)})}),disabled=e.is("[disabled]"),disabled?i.enable(!1):i.readonly(e.is("[readonly]")),n.notify(i)},options:{name:"AlphabetTextBox",textTransform:"none",allowChar:" ",textType:"default",value:null,placeholder:"",allNumericChar:"1234567890",maxLength:15},events:["change"],readonly:function(e){},enable:function(e){},value:function(e){var t,n=this;return n._text.css("color","black"),void 0===e?n._value:(t=n._adjust(e),e!==t?(n._text.val(n.options.placeholder),void n._text.css("color","gray")):void(n._old=n._value))},_adjust:function(e){this.options;return e},_blur:function(){var e=this,t=e.element[0],n=t.value,i=e.options,r=i.allowChar,a=i.textType,o="ip"==a.toLowerCase()?".":"time"==a.toLowerCase()?r:"";if("ip"==a.toLowerCase()||"time"==a.toLowerCase()){var s=n.split(o);if("ip"==a.toLowerCase()){var l="";if(""!=n)for(c=0;c<4;c++)l=s.length>=c+1?parseInt(s[c])>255?(""==l?"":l+".")+"255":(""==l?"":l+".")+(""==s[c]?"255":parseInt(s[c])>255||parseInt(s[c])<1?"255":parseInt(s[c]).toString()):(""==l?"":l+".")+"255";e.element.val(l)}else if("time"==a.toLowerCase()){var d="";if(""!=o&&s.length>1)for(var c=0;c<2;c++)d=s.length>=c+1?parseInt(s[c])>(0==c?23:59)?(""==d?"":d+o)+(1==(0==c?23:59).toString().length?"0":"")+(0==c?23:59).toString():(""==d?"":d+o)+(""==s[c]?"00":(1==s[c].length?"0":"")+s[c]):(""==d?"":d+o)+"00";else d=0==n.length?"00"+o+"00":n.length<2?"0"+n+o+"00":2==n.length?parseInt(n)>23?"2300":n+o+"00":3==n.length?(parseInt(n.substr(0,2))>23?"23":n.substr(0,2))+o+"0"+n.substr(2,1):4==n.length?(parseInt(n.substr(0,2))>23?"23":n.substr(0,2))+o+(parseInt(n.substr(2,2))>59?"59":n.substr(2,2)):"";t.value=d,!(s.length<=2&&""!=s[s.length-1])}}},_culture:function(e){return e||o(this.options.culture)},_keypress:function(e){var t=this,n=t.options,i=e.keyCode?e.keyCode:e.which,r=n.textType,a="";if(a=0!=e.keyCode?String.fromCharCode(e.keyCode):String.fromCharCode(e.charCode),"ip"==r.toLowerCase()||"time"==r.toLowerCase()||"contact"==r.toLowerCase()){if(32==i)return void e.preventDefault()}else 32!=i&&t._prevent(i,a)&&!e.ctrlKey&&e.preventDefault()},_numericRegex:function(e){var t=this,n=e[POINT],i=t.options.decimals;return n===POINT&&(n="\\"+n),null===i&&(i=e.decimals),0===i?INTEGER_REGEXP:(t._separator!==n&&(t._separator=n,t._floatRegExp=new RegExp("^(-)?(((\\d+("+n+"\\d*)?)|("+n+"\\d*)))?$")),t._floatRegExp)},_paste:function(e){e.target.value;setTimeout(function(){})},_prevent:function(e,t){var n=this,i=n.element[0],r=i.value,a=n.options,o=a.allowChar,s=a.textType,l=!0,d="ip"==s.toLowerCase()?".":"time"==s.toLowerCase()?o:"contact"==s.toLowerCase()?o:"";if("ip"==s.toLowerCase()||"time"==s.toLowerCase()||"contact"==s.toLowerCase()){if(""!=r&&d.indexOf(t)>=0){var c=r.split(d);if("ip"==s.toLowerCase()){for(var u="",p=0;p<c.length;p++)u=parseInt(c[p])>255?(""==u?"":u+".")+"255":(""==u?"":u+".")+c[p];i.value=u,l=!(c.length<=3&&""!=c[c.length-1])}else if("time"==s.toLowerCase()){for(var f="",p=0;p<c.length;p++)f=parseInt(c[p])>(0==p?23:59)?(""==f?"":f+":")+(1==(0==p?23:59).toString().length?"0":"")+(0==p?23:59).toString():(""==f?"":f+":")+(1==c[p].length?"0":"")+c[p];i.value=f,l=!(c.length<=2&&""!=c[c.length-1])}}}else o.indexOf(t)>=0&&(l=!1);return l&&("ip"==s.toLowerCase()||"time"==s.toLowerCase()||"contact"==s.toLowerCase()?(a.allNumericChar.indexOf(t)>=0||d.indexOf(t)>=0)&&(l=!1):"default"==s.toLowerCase()?l=!1:(e>=65&&e<=90||e>=97&&e<123)&&(l=!1)),l&&s.toLowerCase().indexOf("alphanumeric")>=0&&a.allNumericChar.indexOf(t)>=0&&(l=!1),l},_placeholder:function(e){this._text.val(e),a||e||this._text.val(this.options.placeholder)},_removeWhiteSpace:function(e){var t=e.target,n=t.value;n=n.replace(/(^\s*)|(\s*$)/gi,"").replace(/[ ]{2,}/gi," ").replace(/\n +/,"\n"),t.value=n},_reset:function(){var t=this,n=t.element,i=n.attr("form"),r=i?e("#"+i):n.closest("form");r[0]&&(t._resetHandler=function(){setTimeout(function(){t.value(n[0].value)})},t._form=r.on("reset",t._resetHandler))}});i.plugin(l)}(jQuery),function(e,t){function n(e){return new Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===qe)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function r(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function a(t,n,i,r,a){var o=n;n=e(),a=a||1;for(var s=0;s<a;s++)n=n.add(t.eq(o+s));"number"==typeof i?n[r?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function o(t,n,i){return e(t).add(n).find(i)}function s(e,t,n){var i,r,a,o;for(i=0,r=(n=Te(n)?n:[n]).length;i<r;i++)a=n[i],we(a)&&a.click&&(o=a.name||a.text,t.on(Be+Oe,"a.k-grid-"+(o||"").replace(/\s/g,""),{commandName:o},De(a.click,e)))}function l(e,t,n){return xe(e,function(e){var i;return f(e=typeof e===qe?{field:e}:e)&&!n||(e.attributes=U(e.attributes),e.footerAttributes=U(e.footerAttributes),e.headerAttributes=U(e.headerAttributes),i=!0),e.columns&&(e.columns=l(e.columns,t,i)),ye({encoded:t,hidden:i},e)})}function d(e,t){var n=[];return c(e,t,n),n[n.length-1]}function c(e,t,n){n=n||[];for(var i=0;i<t.length;i++){if(e===t[i])return!0;if(t[i].columns){var r=n.length;if(n.push(t[i]),c(e,t[i].columns,n))return!0;n.splice(r,n.length-r)}}return!1}function u(e,t){var n=t?V:U;e.hidden=!t,e.attributes=n(e.attributes),e.footerAttributes=n(e.footerAttributes),e.headerAttributes=n(e.headerAttributes)}function p(){return"none"!==this.style.display}function f(e){return h([e]).length>0}function h(e){return Ce(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=h(e.columns).length>0),t})}function g(t){return e(t).map(function(){return this.toArray()})}function m(e,t,n){var i=b(z(t)),r=b(N(t)),a=e.rowSpan;e.rowSpan=n?i>r?a-(i-r)||1:a+(r-i):i>r?a+(i-r):a-(r-i)||1}function v(t,n,i,r,a,o,s){var l=b(t),d=b([n]);if(l>d){var c=new Array(s+1).join('<th class="k-group-cell k-header">&nbsp;</th>'),u=o.children(":not(.k-filter-row)");e(new Array(l-d+1).join("<tr>"+c+"</tr>")).insertAfter(u.last())}H(o,l-d),_(i,r,a,o)}function k(t,n,i){i=i||0;var r,a=n;n=P(n);for(var o={},s=t.find(">tr:not(.k-filter-row)"),l=0,d=n.length;l<d;l++)o[(r=w(n[l],a)).row]||(o[r.row]=s.eq(r.row).find(".k-header").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})),o[r.row].eq(r.cell).attr(fe.attr("index"),i+l);return n.length}function b(e){for(var t=0,n=0;n<e.length;n++)if(e[n].columns){var i=b(e[n].columns);i>t&&(t=i)}return 1+t}function _(t,n,i,r){var a,o=C(t[0],n),s=i.find(">tr:not(.k-filter-row):eq("+o.row+")>th.k-header"),l=e(),d=o.cell;for(a=0;a<t.length;a++)l=l.add(s.eq(d+a));r.find(">tr:not(.k-filter-row)").eq(o.row).append(l);var c=[];for(a=0;a<t.length;a++)t[a].columns&&(c=c.concat(t[a].columns));c.length&&_(c,n,i,r)}function w(e,t,n,i){var r,a;for(n=n||0,(i=i||{})[n]=i[n]||0,a=0;a<t.length;a++){if(t[a]==e){r={cell:i[n],row:n};break}if(t[a].columns&&(r=w(e,t[a].columns,n+1,i)))break;i[n]++}return r}function y(e,t,n,i){var r,a=n.locked;do{r=e[t],t+=i?1:-1}while(r&&t>-1&&t<e.length&&r!=n&&!r.columns&&r.locked==a);return r}function x(e,t,n,i){if(t.columns)return(t=t.columns)[i?0:t.length-1];var r,a=d(t,e);r=a?a.columns:e;var o=Se(t,r);return 0===o&&i?o++:o!=r.length-1||i?(o>0||0===o&&!i)&&(o+=i?-1:1):o--,(t=y(r,o,n,Se(n,r)>o))&&t!=n&&t.columns?x(e,t,n,i):null}function C(e,t,n,i){var r,a;for(n=n||0,(i=i||{})[n]=i[n]||0,a=0;a<t.length;a++){if(t[a]==e){r={cell:i[n],row:n};break}if(t[a].columns&&(r=C(e,t[a].columns,n+1,i)))break;t[a].hidden||i[n]++}return r}function T(e){return S(z(e)).concat(S(N(e)))}function S(e){for(var t=[],n=[],i=0;i<e.length;i++)t.push(e[i]),e[i].columns&&(n=n.concat(e[i].columns));return n.length&&(t=t.concat(S(n))),t}function F(e){for(var t,n=0,i=0;i<e.length;i++)(t=e[i]).columns?n+=F(t.columns):t.hidden&&n++;return n}function D(e){for(var t,n=0,i=0,r=e.length;i<r;i++)(t=e[i].style.width)&&-1==t.indexOf("%")&&(n+=parseInt(t,10));return n}function A(e,t){for(var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),r=0;r<i.length;r++)(n=i[r].rowSpan)>1&&(i[r].rowSpan=n-t||1)}function H(e,t){for(var n=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),i=0;i<n.length;i++)n[i].rowSpan+=t}function I(t){for(var n=t.find("tr:not(.k-filter-row)"),i=n.filter(function(){return!e(this).children().length}).remove().length,r=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),a=0;a<r.length;a++)r[a].rowSpan>1&&(r[a].rowSpan-=i);return n.length-i}function E(e,t,n,i,r){var a,o,s,l=[];for(a=0,s=e.length;a<s;a++)(o=n[i]||[]).push(t.eq(r+a)),n[i]=o,e[a].columns&&(l=l.concat(e[a].columns));l.length&&E(l,t,n,i+1,r+e.length)}function z(e){return Ce(e,function(e){return e.locked})}function N(e){return Ce(e,function(e){return!e.locked})}function R(e){return Ce(e,function(e){return!e.locked&&f(e)})}function M(e){return Ce(e,function(e){return e.locked&&f(e)})}function O(e){for(var t=[],n=0;n<e.length;n++)e[n].hidden||(e[n].columns?t=t.concat(O(e[n].columns)):t.push(e[n]));return t}function P(e){for(var t=[],n=0;n<e.length;n++)e[n].columns?t=t.concat(P(e[n].columns)):t.push(e[n]);return t}function L(n){var i=n.find(">tr:not(.k-filter-row)"),r=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();i.length>1&&(a=i.find("th").filter(r).filter(function(){return this.rowSpan>1})),a=a.add(i.last().find("th").filter(r));var o=fe.attr("index");return a.sort(function(n,i){n=e(n),i=e(i);var r=n.attr(o),a=i.attr(o);return r===t&&(r=e(n).index()),a===t&&(a=e(i).index()),r=parseInt(r,10),a=parseInt(a,10),r>a?1:r<a?-1:0}),a}function B(t){var n=t.closest("table"),i=e().add(t),r=t.closest("tr"),a=n.find("tr:not(.k-filter-row)"),o=a.index(r);if(o>0){var s=a.eq(o-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),l=0,d=r.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1});for(u=0;u<c.length;u++)l+=c[u].colSpan||1;d+=Math.max(l-1,0),l=0;for(var u=0;u<s.length;u++){var p=s.eq(u);if(p.attr("colSpan")?l+=p[0].colSpan:l+=1,d>=u&&d<l){i=B(p).add(i);break}}}return i}function q(t){var n=t.closest("table"),i=e().add(t),r=t.closest("tr"),a=n.find("tr:not(.k-filter-row)"),o=a.index(r)+t[0].rowSpan,s=fe.attr("colspan");if(o<=a.length-1){var l,d=r.next(),c=(r.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"));c=c.filter(function(){return!this.rowSpan||1===this.rowSpan});var u=0;for(l=0;l<c.length;l++)u+=parseInt(c.eq(l).attr(s),10)||1;var p=d.find("th:not(.k-group-cell,.k-hierarchy-cell)"),f=parseInt(t.attr(s),10)||1;for(l=0;l<f;){d=p.eq(l+u),i=i.add(q(d));var h=parseInt(d.attr(s),10);h>1&&(f-=h-1),l++}}return i}function W(t,n,i){var r,a=t;return ve?t[0].innerHTML=i:((r=document.createElement("div")).innerHTML="<table><tbody>"+i+"</tbody></table>",t=r.firstChild.firstChild,n[0].replaceChild(t,a[0]),t=e(t)),t}function U(e){var t=(e=e||{}).style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"))===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1")):t="display:none",ye({},e,{style:t})}function V(e){var t=(e=e||{}).style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function j(t,n,i,r){var a,o=t.find(">colgroup"),s=xe(n,function(e){return a=e.width,a&&0!==parseInt(a,10)?fe.format('<col style="width:{0}"/>',typeof a===qe?a:a+"px"):"<col />"});(i||o.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),o.length&&o.remove(),(o=e(new Array(r+1).join('<col class="k-group-col">')+s.join(""))).is("colgroup")||(o=e("<colgroup/>").append(o)),t.prepend(o),$e.msie&&8==$e.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function G(e,t){var n,i,r=0;for(n=0,i=t.length;n<i;n++)t[n].locked&&(e.eq(n).insertBefore(e.eq(r)),r++)}function $(e){var t,n,i,r={};for(n=0,i=e.length;n<i;n++)r[(t=e[n]).value]=t.text;return r}function Y(e,t,n){var i=n&&n.length&&we(n[0])&&"value"in n[0]?$(n)[e]:e;return i=null!=i?i:"",t?fe.format(t,i):i}function K(e,t,n){for(var i=0,r=e[i];r;){if((!!n||"none"!==r.style.display)&&!Ve.test(r.className)&&--t<0){r.style.display=n?"":"none";break}r=e[++i]}}function Q(t,n){for(var i,r,a=0,o=t.length;a<o;a+=1)(r=t.eq(a)).is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)-1):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),r=i.find("tr:first")),K(r[0].cells,n,!1))}function J(e){for(var t,n=[],i=0;i<e.length&&("field"in(t=e[i])&&"value"in t&&"items"in t);i++)n.push(t),t.hasSubgroups&&(n=n.concat(J(t.items)));return n}function X(t,n){for(var i,r,a=0,o=t.length;a<o;a+=1)(r=t.eq(a)).is(".k-grouping-row,.k-detail-row")?(i=r.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)+1):(r.hasClass("k-grid-edit-row")&&(i=r.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)+1),j(i.find(">form>table"),h(void 0),!1,0),r=i.find("tr:first")),K(r[0].cells,n,!0))}function Z(e,t,n){n=n||1;var i,r,a;for(r=0,a=e.length;r<a;r++)(i=e.eq(r).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)+n),(i=t.eq(r).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)-n)}function ee(e){var t,n,i=0,r=e.find(">colgroup>col");for(t=0,n=r.length;t<n;t+=1)i+=parseInt(r[t].style.width,10);return i}function te(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var n,i,r=e.offsetHeight,a=t.offsetHeight;r>a?(n=t.rows[t.rows.length-1],je.test(n.className)&&(n=t.rows[t.rows.length-2]),i=r-a):(n=e.rows[e.rows.length-1],je.test(n.className)&&(n=e.rows[e.rows.length-2]),i=a-r),n.style.height=n.offsetHeight+i+"px"}}function ne(e,t){var n,i=e.offsetHeight,r=t.offsetHeight;i>r?n=i+"px":i<r&&(n=r+"px"),n&&(e.style.height=t.style.height=n)}function ie(e,t){var n,i,r;if(typeof e===qe&&e===t)return e;if(we(e)&&e.name===t)return e;if(Te(e))for(n=0,i=e.length;n<i;n++)if(typeof(r=e[n])===qe&&r===t||r.name===t)return r;return null}function re(t,n){var i=$e.msie;if(!0===n){var r,a;if(r=(t=e(t)).parent().scrollTop(),a=t.parent().scrollLeft(),i)try{t[0].setActive()}catch(e){t[0].focus()}else t[0].focus();t.parent().scrollTop(r),t.parent().scrollLeft(a)}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function ae(t){var n=e(t.currentTarget),i=n.is("th"),r=this.table.add(this.lockedTable),a=this.thead.parent().add(e(">table",this.lockedHeader)),o=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap"),s=n.closest("table")[0];fe.support.touch||(o&&n.find(fe.roleSelector("filtercell")).length?this.current(n):s!==r[0]&&s!==r[1]&&s!==a[0]&&s!==a[1]||e(t.target).is("a.k-i-collapse, a.k-i-expand")||(this.options.navigatable&&this.current(n),!i&&o||setTimeout(function(){Ke&&e(fe._activeElement()).hasClass("k-widget")||re(s,!0)}),i&&t.preventDefault()))}function oe(t,n,i,r){if(t=e(t),r){var a=n;n=i,i=a}return n.not(t).length!=n.length?t:t[0]==i[0]?n.eq(0):n.eq(1)}function se(e,n,i,r,a,o){var s,l,d=a?"prevAll":"nextAll";if(e){if(!(s=e.parent()[d](ze).first())[0]&&(a||e.is("th"))||!a&&e[0].rowSpan>1){if(n=oe(n,i,r,a),re(n,!0),a&&!e.is(".k-header"))return L(n.find("thead:first")).eq(e.index());s=n.find((a?">thead>":">tbody>")+ze).first()}if(!a&&e[0].colSpan>1&&e.is(".k-header"))e=q(e).eq(1);else if(e.is(".k-header")&&a){var c=B(e);e=c.eq(c.length-2)}else(l=e.attr(fe.attr("index")))===t||a?l=e.index():n.parent().prev().hasClass("k-grid-content-locked")&&(l-=o),e=s.children().eq(l);e[0]&&e.is(Ne)||(e=s.children(Ne).first())}else e=i.find(Re);return e}function le(e,t,n,i,r){var a=n.length>1;return e?e.prevAll(":visible")[0]?e=e.prevAll(Ee).first():a&&(t==n[1]?(re(n[0]),e=r(e.parent()).children(Ee).last()):t==i[1]&&(re(i[0]),e=i.eq(0).find("tr>"+Ee).last())):e=n.find(Re),e}function de(e,t,n,i,r){var a=n.length>1;return e?e.nextAll(":visible")[0]?e=e.nextAll(Ee).first():a&&(t==n[0]?(re(n[1]),e=r(e.parent()).children(Ee).first()):t==i[0]&&(re(i[1]),e=i.eq(1).find("tr>"+Ee).first())):e=n.find(Re),e}function ce(e,t,n,i,r){var a=2==n.length,o=!0,s=r?e.prevAll(Ee+":first"):e.nextAll(":visible:first");return s.length||(s=e.parent(),a&&(o=r&&t==n[0]||!r&&t==n[1],s=i(s)),o&&(s=s[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),s=s.children(Ee+(r?":last":":first"))),s}function ue(e,t,i){return'<tr class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function pe(e,t,n){return'<tr class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var fe=window.kendo,he=fe.ui,ge=fe.data.DataSource,me=he.Groupable,ve=fe.support.tbodyInnerHtml,ke=fe._activeElement,be=he.Widget,_e=fe.keys,we=e.isPlainObject,ye=e.extend,xe=e.map,Ce=e.grep,Te=e.isArray,Se=e.inArray,Fe=Array.prototype.push,De=e.proxy,Ae=fe.isFunction,He=e.isEmptyObject,Ie=Math,Ee=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ze="tr:not(.k-footer-template):visible",Ne=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Re=ze+":first>"+Ne+":first",Me="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Oe=".kendoGridNew",Pe="change",Le="k-state-focused",Be="click",qe="string",We=/(\}|\#)/gi,Ue=/#/gi,Ve=new RegExp("(^|[\\x20\\t\\r\\n\\f])(k-group-cell|k-hierarchy-cell)([\\x20\\t\\r\\n\\f]|$)"),je=new RegExp("(^|[\\x20\\t\\r\\n\\f])(k-filter-row)([\\x20\\t\\r\\n\\f]|$)"),Ge=!1,$e=e.browser,Ye=$e.msie&&7==$e.version,Ke=$e.msie&&8==$e.version,Qe=be.extend({init:function(e,t){var n=this;be.fn.init.call(n,e,t),n._refreshHandler=De(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Pe,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Pe,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0},destroy:function(){var e=this;be.fn.destroy.call(e),e.dataSource.unbind(Pe,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Oe),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=fe.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(Ge?"padding-left":"padding-right",i),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Oe+" mousewheel"+Oe,De(n._wheelScroll,n)),fe.support.kineticScrollNeeded&&(n.drag=new fe.UserEvents(n.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(r).bind("scroll"+Oe,De(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar.scrollTop(),i=fe.wheelDeltaY(t);i&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Oe,!1),this.verticalScrollbar.scrollTop(n+-i))}},_scroll:function(e){var t=this,n=!t.options.prefetch,i=e.currentTarget.scrollTop,r=t.dataSource,a=t.itemHeight,o=r.skip()||0,s=t._rangeStart||o,l=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>i),c=Ie.max(Ie.floor(i/a),0),u=Ie.max(c+Ie.floor(l/a),0);t._scrollTop=i-s*a,t._scrollbarTop=i,t._scrolling=n,t._fetch(c,u,d)||(t.wrapper[0].scrollTop=t._scrollTop),n&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout(function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())},100))},_fetch:function(e,t,n){var i=this,r=i.dataSource,a=i.itemHeight,o=r.take(),s=i._rangeStart||r.skip()||0,l=Ie.floor(e/o)*o,d=!1;return e<s?(d=!0,s=Ie.max(0,t-o),i._scrollTop=(e-s)*a,i._page(s,o)):t>=s+o&&!n?(d=!0,s=e,i._scrollTop=a,i._page(s,o)):!i._fetching&&i.options.prefetch&&(e<l+o-.33*o&&e>o&&r.prefetch(l-o,o),t>l+.33*o&&r.prefetch(l+o,o)),d},_page:function(e,t){var n=this,i=!n.options.prefetch,r=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,r.inRange(e,t)?r.range(e,t):(i||fe.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){n._scrolling||(i&&fe.ui.progress(n.wrapper.parent(),!0),r.range(e,t))},100))},repaintScrollbar:function(){var e,t,n,i=this,r="",a=i.dataSource,o=fe.support.kineticScrollNeeded?0:fe.support.scrollbar(),s=i.wrapper[0];n=i.itemHeight=i.options.itemHeight()||0;var l=s.scrollWidth>s.offsetWidth?o:0;for(e=a.total()*n+l,t=0;t<Ie.floor(e/25e4);t++)r+='<div style="width:1px;height:250000px"></div>';e%25e4&&(r+='<div style="width:1px;height:'+e%25e4+'px"></div>'),i.verticalScrollbar.html(r),s.scrollTop=i._scrollTop},refresh:function(){var e=this,t=e.dataSource,n=e._rangeStart;fe.ui.progress(e.wrapper.parent(),!1),clearTimeout(e._timeout),e.repaintScrollbar(),e.drag&&e.drag.cancel(),n&&!e._fetching&&(e._rangeStart=t.skip(),1===t.page()&&(e.verticalScrollbar[0].scrollTop=0)),e._fetching=!1}}),Je={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Xe=be.extend({init:function(t,n,i){var r=this;n=Te(n)?{dataSource:n}:n,be.fn.init.call(r,t,n),i&&(r._events=i),Ge=fe.support.isRtl(t),r._element(),r._aria(),r._columns(r.options.columns),r._dataSource(),r._tbody(),r._pageable(),r._thead(),r._groupable(),r._toolbar(),r._setContentHeight(),r._templates(),r._navigatable(),r._selectable(),r._clipboard(),r._details(),r._editable(),r._attachCustomCommandsEvent(),r._minScreenSupport(),r.options.autoBind?r.dataSource.fetch():r._footer(),r.lockedContent&&(r.wrapper.addClass("k-grid-lockedcolumns"),r._resizeHandler=function(){r.resize()},e(window).on("resize"+Oe,r._resizeHandler)),fe.notify(r)},events:[Pe,"dataBinding","cancel","dataBound","detailExpand","detailCollapse","detailInit","filterMenuInit","columnMenuInit","edit","save","remove","saveChanges","columnResize","columnReorder","columnShow","columnHide","columnLock","columnUnlock"],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"GridNew",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:"Cancel",confirmation:"Are you sure you want to delete this record?",confirmDelete:"Delete"},commands:{create:Je.create.text,cancel:Je.cancel.text,save:Je.save.text,destroy:Je.destroy.text,edit:Je.edit.text,update:Je.update.text,canceledit:Je.canceledit.text,excel:Je.excel.text,pdf:Je.pdf.text}}},destroy:function(){var t,n=this;n._destroyColumnAttachments(),be.fn.destroy.call(n),n._resizeHandler&&e(window).off("resize"+Oe,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&(n.selectable.destroy(),n.clearArea(),n.copyHandler&&(n.wrapper.off("keydown",n.copyHandler),n.unbind(n.copyHandler)),n.updateClipBoardState&&(n.unbind(n.updateClipBoardState),n.updateClipBoardState=null),n.clearAreaHandler&&n.wrapper.off("keyup",n.clearAreaHandler)),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(Pe,n._refreshHandler).unbind("progress",n._progressHandler).unbind("error",n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n.minScreenResizeHandler&&e(window).off("resize",n.minScreenResizeHandler),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(Oe),fe.destroy(n.wrapper),n.rowTemplate=n.altRowTemplate=n.lockedRowTemplate=n.lockedAltRowTemplate=n.detailTemplate=n.footerTemplate=n.groupFooterTemplate=n.lockedGroupFooterTemplate=null,n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},getOptions:function(){this.options.dataSource=null;var t=ye(!0,{},this.options);t.columns=fe.deepExtend([],this.columns);var n=this.dataSource,i=n.options.data&&n._data;return n.options.data=null,t.dataSource=e.extend(!0,{},n.options),t.dataSource.data=i,t.dataSource.page=n.page(),t.dataSource.filter=n.filter(),t.dataSource.pageSize=n.pageSize(),t.dataSource.sort=n.sort(),t.dataSource.group=n.group(),t.dataSource.aggregate=n.aggregate(),t},setOptions:function(e){var t=this.getOptions();fe.deepExtend(t,e),e.dataSource||(t.dataSource=this.dataSource);var n=this.wrapper,i=this._events,r=this.element;if(this.destroy(),this.options=null,this._isMobile){var a=n.closest(fe.roleSelector("pane")).parent();a.after(n),a.remove(),n.removeClass("k-grid-mobile")}n[0]!==r[0]&&(n.before(r),n.remove()),r.empty(),this.init(r,t,i),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e=fe.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,n=new Array(2*t),i=t;--i>=0;)n[i]=n[i+t]=e[i];e=n}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&t.thead.find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),r=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),r&&r.destroy()})},_attachCustomCommandsEvent:function(){var e,t,n,i=this,r=P(i.columns||[]);for(t=0,n=r.length;t<n;t++)(e=r[t].command)&&s(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table")).length||(n=e("<table />").appendTo(t.element)),Ye&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,r=this,a=r.options.columnResizeHandleWidth,o=r.options.scrollable,s=r.resizeHandle,l=this._groups();if(s&&r.lockedContent&&s.data("th")[0]!==n[0]&&(s.off(Oe).remove(),s=null),s||(s=r.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(s)),Ge){if(i=n.position().left,o){var d=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),c=$e.msie?d.scrollLeft():0;i-=($e.webkit?d[0].scrollWidth-d[0].offsetWidth-d.scrollLeft():0)-($e.mozilla?d[0].scrollWidth-d[0].offsetWidth-(d[0].scrollWidth-d[0].offsetWidth-d.scrollLeft()):0)+c}}else{i=n[0].offsetWidth;for(var u=L(n.closest("thead")),p=0;p<u.length&&u[p]!=n[0];p++)i+=u[p].offsetWidth;l>0&&(i+=t.find(".k-group-cell:first").outerWidth()*l),r._hasDetails()&&(i+=t.find(".k-hierarchy-cell:first").outerWidth())}s.css({top:n.position().top,left:i-a,height:n.outerHeight(),width:3*a}).data("th",n).show(),s.off("dblclick"+Oe).on("dblclick"+Oe,function(){r._autoFitLeafColumn(n.data("index"))})},_positionColumnResizeHandle:function(t){var n=this,i=n.options.columnResizeHandleWidth,a=n.lockedHeader?n.lockedHeader.find("thead:first"):e();n.thead.add(a).on("mousemove"+Oe,"th",function(t){var a=e(this);if(!a.hasClass("k-group-cell")&&!a.hasClass("k-hierarchy-cell")){var o=t.clientX,s=e(window).scrollLeft(),l=a.offset().left+(Ge?0:this.offsetWidth);o+s>l-i&&o+s<l+i?n._createResizeHandle(a.closest("div"),a):n.resizeHandle?n.resizeHandle.hide():r(n.wrapper,"")}})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(Oe).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(t){var n=this,i=n.lockedHeader?n.lockedHeader.find("thead:first"):e();n._resizeUserEvents=new fe.UserEvents(i.add(n.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(t){var i=e(t.target);t.preventDefault(),i.addClass("k-column-active"),n._createResizeHandle(i.closest("div"),i),n._resizeHandleDocumentClickHandler||(n._resizeHandleDocumentClickHandler=De(n._resizeHandleDocumentClick,n)),e(document).on("click",n._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,a,o,s,l,d=this,c=d.options,u=this._isMobile,p=fe.support.mobileOS?0:fe.support.scrollbar();c.resizable&&(t=c.scrollable?d.wrapper.find(".k-grid-header-wrap:first"):d.wrapper,u?d._positionColumnResizeHandleTouch(t):d._positionColumnResizeHandle(t),d.resizable&&d.resizable.destroy(),d.resizable=new he.Resizable(t.add(d.lockedHeader),{handle:(c.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+d.tbody.attr("clientHeight")})},start:function(t){l=e(t.currentTarget).data("th"),u&&d._hideResizeHandle();var p=l.closest("table"),f=e.inArray(l[0],L(l.closest("thead")).filter(":visible")),h=(o=p.parent().hasClass("k-grid-header-locked"))?d.lockedTable:d.table,g=d.footer||e();d.footer&&d.lockedContent&&(g=o?d.footer.children(".k-grid-footer-locked"):d.footer.children(".k-grid-footer-wrap")),r(d.wrapper,"col-resize"),s=c.scrollable?p.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")").add(h.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")):h.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")"),n=t.x.location,i=l.outerWidth(),a=o?h.children("tbody").outerWidth():d.tbody.outerWidth(),$e.webkit&&d.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var r=Ge?-1:1,u=i+t.x.location*r-n*r;if(c.scrollable){var f;o&&d.lockedFooter?f=d.lockedFooter.children("table"):d.footer&&(f=d.footer.find(">.k-grid-footer-wrap>table")),f&&f[0]||(f=e());var h=l.closest("table"),g=o?d.lockedTable:d.table,m=!1,v=d.wrapper.width()-p,k=u;o&&a-i+k>v&&((k=i+(v-a-2*p))<0&&(k=u),m=!0),k>10&&(s.css("width",k),a&&(k=m?v-2*p:a+t.x.location*r-n*r,g.add(h).add(f).css("width",k),o||(d._footerWidth=k)))}else u>10&&s.css("width",u)},resizeend:function(){var e,t,n=l.outerWidth();if(r(d.wrapper,""),$e.webkit&&d.wrapper.removeClass("k-grid-column-resizing"),i!=n){t=d.lockedHeader?d.lockedHeader.find("thead:first tr:first").add(d.thead.find("tr:first")):l.parent();var a=l.attr(fe.attr("index"));a||(a=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),(e=P(d.columns)[a]).width=n,d.trigger("columnResize",{column:e,oldWidth:i,newWidth:n}),d._applyLockedContainersWidth(),d._syncLockedContentHeight(),d._syncLockedHeaderHeight()}d._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:fe.guid(),filter:t.content?".k-grid-header:first "+Me:"table:first>.k-grid-header "+Me,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(fe.attr("title"))||t.attr(fe.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t=this;if(t.options.reorderable){t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy();var n=function(e,n,i){var r=e[n],a=e[i],o=d(r,t.columns);return e=o?o.columns:t.columns,Se(a,e)};t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e,i){var r=T(t.columns);return!1!==r[e].lockable&&n(r,e,i)>-1},inSameContainer:function(i){return e(i.source).parent()[0]===e(i.target).parent()[0]&&n(T(t.columns),i.sourceIndex,i.targetIndex)>-1},change:function(e){var i=T(t.columns),r=i[e.oldIndex],a=n(i,e.oldIndex,e.newIndex);t.trigger("columnReorder",{newIndex:a,oldIndex:Se(r,i),column:r}),t.reorderColumn(a,r,"before"===e.position)}})}},_reorderHeader:function(e,t,n){for(var i=this,r=w(e[0],i.columns),s=w(t,i.columns),l=[],d=0;d<e.length;d++)e[d].columns&&(l=l.concat(e[d].columns));var c=o(i.lockedHeader,i.thead,"tr:eq("+r.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),u=z(e).length,p=z([t]).length;l.length?(u>0&&0===p?v(e,t,l,i.columns,i.lockedHeader.find("thead"),i.thead,this._groups()):0===u&&p>0&&v(e,t,l,i.columns,i.thead,i.lockedHeader.find("thead"),this._groups()),(t.columns||r.cell-s.cell>1||s.cell-r.cell>1)&&(t=x(i.columns,t,e[0],n))&&i._reorderHeader(l,t,n)):u!==p&&m(c[r.cell],i.columns,u),a(c,r.cell,s.cell,n,e.length)},_reorderContent:function(t,n,i){var r,s,l=this,d=e(),c=t[0],u=h(t),p=Se(c,P(l.columns)),f=Se(n,P(l.columns)),g=Se(c,O(l.columns)),m=Se(n,O(l.columns)),v=z(l.columns).length,k=!!n.locked,b=l.footer||l.wrapper.find(".k-grid-footer");r=s=m,n.hidden&&(k?(m=l.lockedTable.find("colgroup"),r=l.lockedHeader.find("colgroup"),s=e(l.lockedFooter).find(">table>colgroup")):(m=l.tbody.prev(),r=l.thead.prev(),s=b.find(".k-grid-footer-wrap").find(">table>colgroup"))),l._hasFilterRow()&&a(l.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length),a(o(l.lockedHeader,l.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,r,i,u.length),l.options.scrollable&&a(o(l.lockedTable,l.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),g,m,i,u.length),b&&b.length&&(a(o(l.lockedFooter,b.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),g,s,i,u.length),a(b.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length));var _=l.tbody.children(":not(.k-grouping-row,.k-detail-row)");l.lockedTable&&(v>f?v<=p&&Z(l.lockedTable.find(">tbody>tr.k-grouping-row"),l.table.find(">tbody>tr.k-grouping-row"),t.length):v>p&&Z(l.table.find(">tbody>tr.k-grouping-row"),l.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),d=l.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var w=0,y=_.length;w<y;w+=1)a(o(d[w],_[w],">td:not(.k-group-cell,.k-hierarchy-cell)"),p,f,i,t.length)},_autoFitLeafColumn:function(e){this.autoFitColumn(P(this.columns)[e])},autoFitColumn:function(t){var n,i,r,a,o,s=this,l=s.options,d=s.columns,c=s.lockedHeader?L(s.lockedHeader.find(">table>thead")).filter(p).length:0;if((t="number"==typeof t?d[t]:we(t)?Ce(S(d),function(e){return e===t})[0]:Ce(S(d),function(e){return e.field===t})[0])&&f(t)){n=Se(t,P(d)),i=(r=(a=t.locked)?s.lockedHeader.children("table"):s.thead.parent()).find("[data-index='"+n+"']");var u=a?s.lockedTable:s.table,h=s.footer||e();s.footer&&s.lockedContent&&(h=a?s.footer.children(".k-grid-footer-locked"):s.footer.children(".k-grid-footer-wrap"));var g=h.find("table").first();s.lockedHeader&&c>=n&&!a&&(n-=c);for(var m=0;m<d.length&&d[m]!==t;m++)d[m].hidden&&n--;o=l.scrollable?r.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")").add(u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")")):u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+n+")");var v=r.add(u).add(g),k=i.outerWidth();o.width(""),v.css("table-layout","fixed"),o.width("auto"),v.addClass("k-autofitting"),v.css("table-layout","");Math.max(r.width(),u.width(),g.width());var b=Math.ceil(Math.max(i.outerWidth(),u.find("tr").eq(0).children("td:visible").eq(n).outerWidth(),g.find("tr").eq(0).children("td:visible").eq(n).outerWidth()));if(o.width(b),t.width=b,l.scrollable){for(var _,w=r.find("col"),y=0,x=0,C=w.length;x<C;x+=1){if(!(_=w[x].style.width)||-1!=_.indexOf("%")){y=0;break}y+=parseInt(_,10)}y&&v.each(function(){this.style.width=y+"px"})}$e.msie&&8==$e.version&&(v.css("display","inline-table"),setTimeout(function(){v.css("display","table")},1)),v.removeClass("k-autofitting"),s.trigger("columnResize",{column:t,oldWidth:k,newWidth:b}),s._applyLockedContainersWidth(),s._syncLockedContentHeight(),s._syncLockedHeaderHeight()}},reorderColumn:function(e,n,i){var r,a=this,o=d(n,a.columns),s=o?o.columns:a.columns,l=Se(n,s),c=s[e],u=!!c.locked,p=z(a.columns).length;if(l!==e&&(n.locked||!u||1!=N(a.columns).length)&&(!n.locked||u||1!=p)){a._hideResizeHandle(),i===t&&(i=e<l);var f=[n];a._reorderHeader(f,c,i),a.lockedHeader&&(I(a.thead),I(a.lockedHeader)),c.columns&&(c=(c=P(c.columns))[i?0:c.length-1]),n.columns&&(f=P(n.columns)),a._reorderContent(f,c,i),r=(r=!!n.locked)!=u,n.locked=u,s.splice(i?e:e+1,0,n),s.splice(l<e?l:l+1,1),a._templates(),a._updateColumnCellIndex(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),r&&(u?a.trigger("columnLock",{column:n}):a.trigger("columnUnlock",{column:n}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=k(this.lockedHeader.find("thead"),z(this.columns))),k(this.thead,N(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:Ce(t,function(t){return t.field===e})[0])&&!e.locked&&!e.hidden){var n=z(t).length-1;this.reorderColumn(n,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:Ce(t,function(t){return t.field===e})[0])&&e.locked&&!e.hidden){var n=z(t).length;this.reorderColumn(n,e,!0)}},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=P(z(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){(t=e(t)).is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(fe.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t=this,n=t.selectable&&t.selectable.options.multiple,i=t.options.editable,r=function(){var n=ke(),i=t._editContainer;!i||e.contains(i[0],n)||i[0]===n||e(n).closest(".k-animation-container").length||t.editable.end()&&t.closeCell()};i&&("incell"===t._editMode()?!1!==i.update&&t.wrapper.on(Be+Oe,"tr:not(.k-grouping-row) > td",function(i){var r=e(this),a=t.lockedTable&&r.closest("table")[0]===t.lockedTable[0];r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==t.tbody[0]&&!a||e(i.target).is(":input")||(t.editable?t.editable.end()&&(n&&e(ke()).blur(),t.closeCell(),t.editCell(r)):t.editCell(r))}).on("focusin"+Oe,function(){clearTimeout(t.timer),t.timer=null}).on("focusout"+Oe,function(){t.timer=setTimeout(r,1)}):!1!==i.update&&t.wrapper.on(Be+Oe,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(n){n.preventDefault(),t.editRow(e(this).closest("tr"))}),!1!==i.destroy?t.wrapper.on(Be+Oe,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(n){n.preventDefault(),n.stopPropagation(),t.removeRow(e(this).closest("tr"))}):t.wrapper.on(Be+Oe,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),t._confirmation()||e.preventDefault()}))},editCell:function(t){t=e(t);var n=this,i=P(n.columns)[n.cellIndex(t)],r=n._modelForContainer(t);if(n.closeCell(),r&&(!r.editable||r.editable(i.field))&&!i.command&&i.field){n._attachModelChange(r),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:r,target:n,change:function(e){n.trigger("save",{values:e.values,container:t,model:r})&&e.preventDefault()}}).data("kendoEditable");var a=t.parent().addClass("k-grid-edit-row");n.lockedContent&&ne(a[0],n._relatedRow(a).addClass("k-grid-edit-row")[0]),n.trigger("edit",{container:t,model:r})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?fe.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),te(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(Be+Oe,"a.k-grid-cancel",e._editCancelClickHandler),t.off(Be+Oe,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(Pe,e._modelChangeHandler)},closeCell:function(t){var n,i,r,a,o=this,s=o._editContainer;s&&(n=s.closest("tr").attr(fe.attr("uid")),a=o.dataSource.getByUid(n),t&&o.trigger("cancel",{container:s,model:a})||(s.removeClass("k-edit-cell"),i=P(o.columns)[o.cellIndex(s)],r=s.parent().removeClass("k-grid-edit-row"),o._destroyEditable(),o._displayCell(s,i,a),s.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(s),o.lockedContent&&ne(r.css("height","")[0],o._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,r={storage:{},count:0},a=ye({},fe.Template,i.options.templateSettings),o=fe.template(i._cellTmpl(t,r),a);r.count>0&&(o=De(o,r.storage)),e.empty().html(o(n)),i.angular("compile",function(){return{elements:e,data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,r=i._editMode();"incell"!==r&&i.cancelRow(),t=e(t).hide(),(n=i._modelForContainer(t))&&!i.trigger("remove",{row:t,model:n})?(i.dataSource.remove(n),"inline"!==r&&"popup"!==r||i.dataSource.sync()):"incell"===r&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var n,i=this;t instanceof fe.data.ObservableObject?n=t:(t=e(t),n=i._modelForContainer(t));var r,a=i._editMode();i.cancelRow(),n&&(i._attachModelChange(n),"popup"===a?i._createPopupEditor(n):"inline"===a?i._createInlineEditor(t,n):"incell"===a&&e(t).children(Ee).each(function(){var t=e(this),r=P(i.columns)[t.index()];if((n=i._modelForContainer(t))&&(!n.editable||n.editable(r.field))&&r.field)return i.editCell(t),!1}),(r=i.editView?i.editView.element:i._editContainer)&&(this._editCancelClickHandler||(this._editCancelClickHandler=De(this._editCancelClick,this)),r.on(Be+Oe,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=De(this._editUpdateClick,this)),r.on(Be+Oe,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n=this,i=n.options.navigatable,r=n.editable.options.model,a=n.editView?n.editView.element:n._editContainer;if(t.preventDefault(),t.stopPropagation(),!n.trigger("cancel",{container:a,model:r})){var o=n.items().index(e(n.current()).parent());n.cancelRow(),i&&(n.current(n.items().eq(o).children().filter(Ne).first()),re(n.table,!0))}},_createPopupEditor:function(t){var n,i,r,a,o,s,l,d,c,u=this,p="<div "+fe.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form'+(u._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',f=[],h=P(u.columns),g=u.options.editable,m=g.template,v=we(g)?g.window:{},k=ye({},fe.Template,u.options.templateSettings);if(v=v||{},m)for(typeof m===qe&&(m=window.unescape(m)),p+=fe.template(m,k)(t),r=0,a=h.length;r<a;r++)(n=h[r]).command&&(d=ie(n.command,"edit"))&&(i=d);else for(r=0,a=h.length;r<a;r++)if((n=h[r]).command)n.command&&(d=ie(n.command,"edit"))&&(i=d);else if(p+='<div class="k-edit-label"><label for="'+n.field+'">'+(n.title||n.field||"")+"</label></div>",t.editable&&!t.editable(n.field)||!n.field){var b={storage:{},count:0};o=fe.template(u._cellTmpl(n,b),k),b.count>0&&(o=De(o,b.storage)),p+='<div class="k-edit-field">'+o(t)+"</div>"}else f.push({field:n.field,format:n.format,editor:n.editor,values:n.values}),p+="<div "+fe.attr("container-for")+'="'+n.field+'" class="k-edit-field"></div>';i&&we(i)&&(i.text&&we(i.text)&&(s=i.text.update,l=i.text.cancel),i.attr&&(c=i.attr));var _;u._isMobile?(p+="</div></div>",u.editView=u.pane.append("<div data-"+fe.ns+'role="view" data-'+fe.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+fe.ns+'role="header" class="k-header">'+u._createButton({name:"update",text:s,attr:c})+(v.title||"Edit")+u._createButton({name:"canceledit",text:l,attr:c})+"</div>"+p+"</div>"),_=u._editContainer=u.editView.element.find(".k-popup-edit-form")):(p+='<div class="k-edit-buttons k-state-default">',p+=u._createButton({name:"update",text:s,attr:c})+u._createButton({name:"canceledit",text:l,attr:c}),p+="</div></div></div>",_=u._editContainer=e(p).appendTo(u.wrapper).eq(0).kendoWindow(ye({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(n){if(n.userTriggered){if(n.sender.element.focus(),u.trigger("cancel",{container:_,model:t}))return void n.preventDefault();var i=u.items().index(e(u.current()).parent());u.cancelRow(),u.options.navigatable&&(u.current(u.items().eq(i).children().filter(Ne).first()),re(u.table,!0))}}},v))),u.editable=u._editContainer.kendoEditable({fields:f,model:t,clearContainer:!1,target:u}).data("kendoEditable"),u._isMobile&&_.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),u._openPopUpEditor(),u.trigger("edit",{container:_,model:t})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,r,a,o=this,s=[];o.lockedContent&&(t=t.add(o._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(r=e(this),(i=P(o.columns)[o.cellIndex(r)]).command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(a=ie(i.command,"edit"))){r.empty();var t,l,d;we(a)&&(a.text&&we(a.text)&&(t=a.text.update,l=a.text.cancel),a.attr&&(d=a.attr)),e(o._createButton({name:"update",text:t,attr:d})+o._createButton({name:"canceledit",text:l,attr:d})).appendTo(r)}}else s.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),r.attr(fe.attr("container-for"),i.field),r.empty()}),o._editContainer=t,o.editable=new fe.ui.Editable(t.addClass("k-grid-edit-row"),{target:o,fields:s,model:n,clearContainer:!1}),t.length>1&&(ne(t[0],t[1]),o._applyLockedContainersWidth()),o.trigger("edit",{container:t,model:n})},cancelRow:function(){var e,t=this,n=t._editContainer;n&&(e=t._modelForContainer(n),t._destroyEditable(),t.dataSource.cancelChanges(e),"popup"!==t._editMode()?t._displayRow(n):t._displayRow(t.tbody.find("["+fe.attr("uid")+"="+e.uid+"]")))},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger("save",{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,r,a=this,o=a._modelForContainer(t),s=t.hasClass("k-state-selected"),l=t.hasClass("k-alt");o&&(a.lockedContent&&(n=e((l?a.lockedAltRowTemplate:a.lockedRowTemplate)(o)),a._relatedRow(t.last()).replaceWith(n)),a.angular("cleanup",function(){return{elements:t.get()}}),i=e((l?a.altRowTemplate:a.rowTemplate)(o)),t.replaceWith(i),a.angular("compile",function(){return{elements:i.get(),data:[{dataItem:o}]}}),s&&a.options.selectable&&a.select(i.add(n)),n&&ne(i[0],n[0]),(r=i.next()).hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i=this;if(!i._isMobile)return window.confirm(t.title);var r=fe.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),a=e(r(t)).appendTo(i.view.element);return(i._actionSheet=new fe.mobile.ui.ActionSheet(a,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){e(t.currentTarget).parent().hasClass("km-actionsheet-cancel")||i._removeRow(n)},popup:i._actionSheetPopupOptions})).open(n),!1},_confirmation:function(e){var t=this,n=t.options.editable,i=!0===n||typeof n===qe?t.options.messages.editable.confirmation:n.confirmation;return!1===i||null==i||("function"==typeof i&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===i?t.options.messages.editable.confirmation:i},e))},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger("saveChanges")&&e.dataSource.sync()},addRow:function(){var e,t=this,n=t.dataSource,i=t._editMode(),r=t.options.editable.createAt||"",a=n.pageSize(),o=n.view()||[];if(t.editable&&t.editable.end()||!t.editable){"incell"!=i&&t.cancelRow(),e=n.indexOf(o[0]),"bottom"==r.toLowerCase()&&(e+=o.length,a&&!n.options.serverPaging&&a<=o.length&&(e-=1)),e<0&&(e=n.page()>n.totalPages()?(n.page()-1)*a:0);var s=n.insert(e,{}),l=s.uid,d=(t.lockedContent?t.lockedTable:t.table).find("tr["+fe.attr("uid")+"="+l+"]"),c=d.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(d));"inline"===i&&d.length?t.editRow(d):"popup"===i?t.editRow(s):c.length&&t.editCell(c),"bottom"==r.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.content[0].offsetHeight)}},_firstEditableColumnIndex:function(e){var t,n,i,r=this,a=P(r.columns),o=r._modelForContainer(e);for(n=0,i=a.length;n<i;n++)if(t=a[n],o&&(!o.editable||o.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,r=n.options.toolbar,a=n.options.editable;r&&((t=n.wrapper.find(".k-grid-toolbar")).length||(Ae(r)||(r=typeof r===qe?r:n._toolbarTmpl(r).replace(Ue,"\\#"),r=De(fe.template(r),n)),t=e('<div class="k-header k-grid-toolbar" />').html(r({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),a&&!1!==a.create&&t.on(Be+Oe,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(Be+Oe,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(Be+Oe,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}),t.on(Be+Oe,".k-grid-excel",function(e){e.preventDefault(),n.saveAsExcel()}),t.on(Be+Oe,".k-grid-pdf",function(e){e.preventDefault(),n.saveAsPDF()}))},_toolbarTmpl:function(e){var t,n,i=this,r="";if(Te(e))for(t=0,n=e.length;t<n;t++)r+=i._createButton(e[t]);return r},_createButton:function(e){var n,r=e.template||'<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',a=typeof e===qe?e:e.name||e.text,o={className:Je[a]?Je[a].className:"k-grid-"+(a||"").replace(/\s/g,""),text:a,imageClass:"",attr:"",iconClass:""},s=this.options.messages.commands;if(!(a||we(e)&&e.template))throw new Error("Custom commands should have name specified");return we(e)?(e.className&&Se(o.className,e.className.split(" "))<0?e.className+=" "+o.className:e.className===t&&(e.className=o.className),"edit"===a&&we(e.text)&&((e=ye(!0,{},e)).text=e.text.edit),e.attr&&(we(e.attr)&&(e.attr=i(e.attr)),typeof e.attr===qe&&(n=e.attr.match(/class="(.+?)"/))&&Se(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1])),o=ye(!0,o,Je[a],{text:s[a]},e)):o=ye(!0,o,Je[a],{text:s[a]}),fe.template(r)(o)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Be+Oe,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),r=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(r):t.expandGroup(r),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(Be+Oe,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(Be+Oe,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,r=Me+"["+fe.attr("field")+"]",a=t.content?".k-grid-header:first "+r:"table:first>.k-grid-header "+r;i&&!1!==i.enabled&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new me(n,ye({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:a,filter:a,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){if(this.lockedContent){for(var i=this,r=i.table.add(i.lockedTable),a=e(t,r[0]),o=e(t,r[1]),s=n?z(i.columns).length:1,l=n?i.columns.length-s:1,d=[],c=0;c<a.length;c+=s)Fe.apply(d,a.slice(c,c+s)),Fe.apply(d,o.splice(0,l));return d}},_selectable:function(){var t,n,i=this,r=[],a=i._isLocked(),o=i.options.selectable;if(o){i.selectable&&i.selectable.destroy(),o=fe.ui.Selectable.parseOptions(o),t=o.multiple,n=o.cell,i._hasDetails()&&(r[r.length]=".k-detail-row"),(i.options.groupable||i._hasFooters())&&(r[r.length]=".k-grouping-row,.k-group-footer"),""!==(r=r.join(","))&&(r=":not("+r+")");var s=i.table;a&&(s=s.add(i.lockedTable));var l=">"+(n?"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)":"tbody>tr"+r);i.selectable=new fe.ui.Selectable(s,{filter:l,aria:!0,multiple:t,change:function(){i.trigger(Pe)},useAllItems:a&&t&&n,relatedTarget:function(t){if(!n&&a){for(var r,o=e(),s=0,l=t.length;s<l;s++)r=i._relatedRow(t[s]),Se(r[0],t)<0&&(o=o.add(r));return o}},continuousItems:function(){return i._continuousItems(l,n)}}),i.options.navigatable&&s.on("keydown"+Oe,function(r){var o=i.current(),l=r.target;if(r.keyCode===_e.SPACEBAR&&e.inArray(l,s)>-1&&!o.is(".k-edit-cell,.k-header")&&o.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(r.preventDefault(),r.stopPropagation(),o=n?o:o.parent(),a&&!n&&(o=o.add(i._relatedRow(o))),t)if(r.ctrlKey){if(o.hasClass("k-state-selected"))return o.removeClass("k-state-selected"),void i.trigger(Pe)}else i.selectable.clear();else i.selectable.clear();i.selectable.value(o)}})}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||t.table.add(t.lockedTable).attr("tabindex",0).on("mousedown"+Oe+" keydown"+Oe,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+Oe,ze+">"+Ne,De(ae,t)),t.copyHandler=De(t.copySelection,t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).focus().select()},t.bind("change",t.updateClipBoardState),t.wrapper.on("keydown",t.copyHandler),t.clearAreaHandler=De(t.clearArea,t),t.wrapper.on("keyup",t.clearAreaHandler)}},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t=this,n=t.select(),i="\t",r=t.options.allowCopy;e.isPlainObject(r)&&r.delimeter&&(i=r.delimeter);var a="";if(n.length){n.eq(0).is("tr")&&(n=n.find("td:not(.k-group-cell)"));var o=[],s=this.columns.length,l=t._isLocked()&&z(t.columns).length,d=!0;e.each(n,function(n,i){var r=(i=e(i)).closest("tr").index(),a=i.index();l&&d&&(d=e.contains(t.lockedTable[0],i[0])),t._groups()&&d&&(a-=t._groups()),s>(a=d?a:a+l)&&(s=a);var c=i.text();o[r]||(o[r]=[]),o[r][a]=c});var c=o.length;o=e.each(o,function(e,t){t&&(o[e]=t.slice(s),c>e&&(c=e))}),e.each(o.slice(c),function(e,t){a+=t?t.join(i)+"\r\n":"\r\n"})}return a},clearArea:function(t){this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(this.options.navigatable?e(this.current()).closest("table").focus():this.table.focus()),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=De(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){for(var e=this.columns,n=!1,i=window.innerWidth>0?window.innerWidth:screen.width,r=0;r<e.length;r++){var a=e[r],o=a.minScreenWidth;o!==t&&null!==o&&(n=!0,o>i?this.hideColumn(a):this.showColumn(a))}return n},_relatedRow:function(t){var n=this.lockedTable;if(t=e(t),!n)return t;var i=t.closest(this.table.add(this.lockedTable)),r=i.find(">tbody>tr").index(t);return(i=i[0]===this.table[0]?n:this.table).find(">tbody>tr").eq(r)},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(Pe)},select:function(t){var n=this,i=n.selectable;return t=e(t),t.length?(i.options.multiple||(i.clear(),t=t.first()),n._isLocked()&&(t=t.add(t.map(function(){return n._relatedRow(this)}))),void i.value(t)):i.value()},current:function(e){var n=this,i=n.options.scrollable,r=n._current,a=n.table.add(n.thead.parent());if(e!==t&&e.length&&(!r||r[0]!==e[0])&&(r&&(r.removeClass(Le).removeAttr("id"),a.removeAttr("aria-activedescendant")),e.attr("id",n._cellId),n._current=e.addClass(Le),a.attr("aria-activedescendant",n._cellId),e.length&&i)){var o=e.closest("table").parent();o.is(".k-grid-content")?n._scrollTo(e.parent()[0],n.content[0]):o.is(".k-grid-content-locked")&&(n._scrollTo(n._relatedRow(e.parent())[0],n.content[0]),i.virtual||(n.lockedContent[0].scrollTop=n.content[0].scrollTop)),o.is(".k-grid-content-locked,.k-grid-header-locked")||(i.virtual?n._scrollTo(e[0],n.content.find(">.k-virtual-scrollable-wrap")[0]):n._scrollTo(e[0],n.content[0]))}return n._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Le),this._current=null)},_scrollTo:function(e,t){var n=e.tagName.toLowerCase(),i="td"===n||"th"===n,r=e[i?"offsetLeft":"offsetTop"],a=e[i?"offsetWidth":"offsetHeight"],o=t[i?"scrollLeft":"scrollTop"],s=t[i?"clientWidth":"clientHeight"],l=r+a,d=0;d=o>r?r:l>o+s?a<=s?l-s:r:o,t[i?"scrollLeft":"scrollTop"]=d},_navigatable:function(){var t=this,n=De(t.current,t),i=t.table.add(t.lockedTable),r=t.thead.parent().add(e(">table",t.lockedHeader)),a=(t._isLocked(),i),o=fe.support.isRtl(t.element);t.options.navigatable&&(t.options.scrollable&&(a=i.add(r),r.attr("tabIndex",-1)),a.off("mousedown"+Oe+" focus"+Oe+" focusout"+Oe+" keydown"+Oe),r.on("keydown"+Oe,function(e){e.altKey&&e.keyCode==_e.DOWN&&(n().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())}).find("a.k-link").attr("tabIndex",-1),i.attr("tabIndex",Ie.max(i.attr("tabIndex")||0,0)).on("mousedown"+Oe+" keydown"+Oe,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),a.on(fe.support.touch?"touchstart"+Oe:"mousedown"+Oe,ze+">"+Ne,De(ae,t)).on("focus"+Oe,function(){if(!fe.support.touch){var t=n();t&&t.is(":visible")?t.addClass(Le):n(e(this).find(Re)),i.attr("tabIndex",-1),r.attr("tabIndex",-1),e(this).attr("tabIndex",0)}}).on("focusout"+Oe,function(){var e=n();e&&e.removeClass(Le)}).on("keydown"+Oe,function(a){var s,l,d=a.keyCode,c=!1,u=!a.isDefaultPrevented()&&!e(a.target).is(":button,a,:input,a>.k-icon"),p=t.options.pageable,f=t.dataSource,h="incell"==t._editMode(),g=a.shiftKey,m=De(t._relatedRow,t),v=n();if(v&&v.is("th")&&(u=!0),u&&d==_e.UP)n(se(v,a.currentTarget,i,r,!0,z(t.columns).length)),c=!0;else if(u&&d==_e.DOWN)n(se(v,a.currentTarget,i,r,!1,z(t.columns).length)),c=!0;else if(u&&d==(o?_e.RIGHT:_e.LEFT))n(le(v,a.currentTarget,i,r,m)),c=!0;else if(u&&d==(o?_e.LEFT:_e.RIGHT))n(de(v,a.currentTarget,i,r,m)),c=!0;else if(u&&p&&_e.PAGEDOWN==d)f.page(f.page()+1),c=!0;else if(u&&p&&_e.PAGEUP==d)f.page(f.page()-1),c=!0;else if(d==_e.ENTER||_e.F2==d){if(!(v=v||i.find(Re)).length)return;if(e(a.target).is("table")||e.contains(v[0],a.target)||(v=e(a.target).closest("[role=gridcell]")),v.is("th"))v.find(".k-link").click(),c=!0;else if(v.parent().is(".k-master-row,.k-grouping-row"))v.parent().find(".k-icon:first").click(),c=!0;else{var k=v.find(":kendoFocusable:first");if(!v.hasClass("k-edit-cell")&&k[0]&&v.hasClass("k-state-focused"))k.focus(),c=!0;else if(t.options.editable&&!e(a.target).is(":button,.k-button,textarea")){var b=e(a.target).closest("[role=gridcell]");b[0]||(b=v),t._handleEditing(b,!1,h?a.currentTarget:i[0]),c=!0}}}else if(_e.ESC==d)s=ke(),v&&e.contains(v[0],s)&&!v.hasClass("k-edit-cell")&&!v.parent().hasClass("k-grid-edit-row")?(re(a.currentTarget,!0),c=!0):!t._editContainer||v&&!t._editContainer.has(v[0])&&v[0]!==t._editContainer[0]||(h?t.closeCell(!0):(l=e(v).parent().index(),s&&s.blur(),t.cancelRow(),l>=0&&t.current(i.find(">tbody>tr").eq(l).children().filter(Ne).first())),$e.msie&&$e.version<9&&document.body.focus(),re(h?a.currentTarget:i[0],!0),c=!0);else if(_e.TAB==d){var _;v=e(v),t.options.editable&&h&&(_=e(ke()).closest(".k-edit-cell"))[0]&&_[0]!==v[0]&&(v=_),_=ce(v,a.currentTarget,i,m,g),!v.is("th")&&_.length&&t.options.editable&&h&&(t._handleEditing(v,_,_.closest(i)),c=!0)}c&&(a.preventDefault(),a.stopPropagation())}))},_handleEditing:function(t,n,i){var r,a,o=this,s=e(ke()),l=o._editMode(),d=$e.msie,c=d&&$e.version<9,u=o._editContainer;if(i=e(i),a="incell"==l?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),o.editable){if(e.contains(u[0],s[0])&&($e.opera||c?s.change().triggerHandler("blur"):(s.blur(),d&&s.blur())),!o.editable)return void re(i);if(!o.editable.end())return"incell"==l?o.current(u):o.current(u.children().filter(Ee).first()),void((r=u.find(":kendoFocusable:first")[0])&&r.focus());"incell"==l?o.closeCell():(o.saveRow(),a=!0)}n&&o.current(n),c&&document.body.focus(),re(i,!0),(!a&&!n||n)&&("incell"==l?o.editCell(o.current()):o.editRow(o.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css("height",n),t.css("height","auto")),e._initMobile()},_initMobile:function(){var t=this.options,n=this;if(this._isMobile=!0===t.mobile&&fe.support.mobileOS||"phone"===t.mobile||"tablet"===t.mobile,this._isMobile){var i=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+fe.ns+'role="view" data-'+fe.ns+'init-widgets="false"></div>').parent();this.pane=fe.mobile.ui.Pane.wrap(i),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},t.height&&this.pane.element.parent().css("height",t.height),this._editAnimation="slide",this.view.bind("show",function(){n._isLocked()&&(n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedContentHeight(),n._syncLockedHeaderHeight(),n._syncLockedFooterHeight())})}},_tbody:function(){var t,n=this,i=n.table;(t=i.find(">tbody")).length||(t=e("<tbody/>").appendTo(i)),n.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i=this,r=i.options.scrollable,a=!0!==r&&r.virtual&&!i.virtualScrollable,o=!fe.support.kineticScrollNeeded||a?fe.support.scrollbar():0;if(r){(t=i.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(i.table)),t.css(Ge?"padding-left":"padding-right",r.virtual?o+1:o),n=e('<table role="grid" />'),Ye&&n.attr("cellspacing",0),n.width(i.table[0].style.width),n.append(i.thead),t.empty().append(e('<div class="k-grid-header-wrap" />').append(n)),i.content=i.table.parent(),i.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(i.content=i.content.parent()),i.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(i.content=i.table.wrap('<div class="k-grid-content" />').parent()),a&&(i.virtualScrollable=new Qe(i.content,{dataSource:i.dataSource,itemHeight:function(){return i._averageRowHeight()}})),i.scrollables=t.children(".k-grid-header-wrap");var s=i.wrapper.find(".k-grid-footer");if(s.length&&(i.scrollables=i.scrollables.add(s.children(".k-grid-footer-wrap"))),r.virtual)i.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Oe).bind("scroll"+Oe,function(){i.scrollables.scrollLeft(this.scrollLeft),i.lockedContent&&(i.lockedContent[0].scrollTop=this.scrollTop)});else{i.content.unbind("scroll"+Oe).bind("scroll"+Oe,function(){i.scrollables.scrollLeft(this.scrollLeft),i.lockedContent&&(i.lockedContent[0].scrollTop=this.scrollTop)});var l=i.content.data("kendoTouchScroller");l&&l.destroy(),(l=fe.touchScroller(i.content))&&l.movable&&(i.touchScroller=l,l.movable.bind("change",function(e){i.scrollables.scrollLeft(-e.sender.x),i.lockedContent&&i.lockedContent.scrollTop(-e.sender.y)}),i.one("dataBound",function(e){e.sender.wrapper.addClass("k-grid-backface")}))}}},_setContentWidth:function(t){var n,i=this,r=i.resizable;i.options.scrollable&&i.wrapper.is(":visible")&&(n=i.table.parent().children(".k-grid-content-expander"),i._setContentWidthHandler=De(i._setContentWidth,i),i.dataSource&&i.dataSource.view().length?n[0]&&(n.remove(),r&&r.unbind("resize",i._setContentWidthHandler)):(n[0]||(n=e('<div class="k-grid-content-expander"></div>').appendTo(i.table.parent()),r&&r.bind("resize",i._setContentWidthHandler)),i.thead&&(n.width(i.thead.width()),t&&i.content.scrollLeft(t))),i._applyLockedContainersWidth())},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,r=this._groups(),a=fe.support.scrollbar(),o=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=D(o),d=D(s);r>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*r),l>=i&&(l=i-3*a),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(d),this.virtualScrollable&&(i-=a),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),(e=this.footer.find(".k-grid-footer-wrap"))[0].style.width=n[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e=this,t=e.options,n=e.wrapper.innerHeight(),i=e.wrapper.children(".k-grid-header"),r=fe.support.scrollbar();if(t.scrollable&&e.wrapper.is(":visible")){n-=i.outerHeight(),e.pager&&(n-=e.pager.element.outerHeight()),t.groupable&&(n-=e.wrapper.children(".k-grouping-header").outerHeight()),t.toolbar&&(n-=e.wrapper.children(".k-grid-toolbar").outerHeight()),e.footerTemplate&&(n-=e.wrapper.children(".k-grid-footer").outerHeight());(function(e){var t,n;return!!e[0].style.height||(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))})(e.wrapper)&&(n>2*r?(e.lockedContent&&(r=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?r:0,e.lockedContent.height(n-r)),e.content.height(n)):e.content.height(2*r+1))}},_averageRowHeight:function(){var e=this,t=e._items(e.tbody).length,n=e._rowHeight;if(0===t)return n;e._rowHeight||(e._rowHeight=n=e.table.outerHeight()/t,e._sum=n,e._measures=1);var i=e.table.outerHeight()/t;return n!==i&&(e._measures++,e._sum+=i,e._rowHeight=e._sum/e._measures),n},_dataSource:function(){var e,n=this,i=n.options,r=i.dataSource;r=Te(r)?{data:r}:r,we(r)&&(ye(r,{table:n.table,fields:n.columns}),e=i.pageable,we(e)&&e.pageSize!==t&&(r.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(Pe,n._refreshHandler).unbind("progress",n._progressHandler).unbind("error",n._errorHandler):(n._refreshHandler=De(n.refresh,n),n._progressHandler=De(n._requestStart,n),n._errorHandler=De(n._error,n)),n.dataSource=ge.create(r).bind(Pe,n._refreshHandler).bind("progress",n._progressHandler).bind("error",n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,r,a,o,s,l,d,c,u=this,p=u.tbody,f=t.model,h=u.tbody.find("tr["+fe.attr("uid")+"="+f.uid+"]"),g=h.hasClass("k-alt"),m=u._items(p).index(h),v=u.lockedContent;if(v&&(n=u._relatedRow(h)),h.add(n).children(".k-edit-cell").length&&!u.options.rowTemplate)h.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),(r=P(u.columns)[u.cellIndex(i)]).field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(u._displayCell(i,r,f),e('<span class="k-dirty"/>').prependTo(i)))});else if(!h.hasClass("k-grid-edit-row")){s=e().add(h),v&&(a=(g?u.lockedAltRowTemplate:u.lockedRowTemplate)(f),s=s.add(n),n.replaceWith(a)),u.angular("cleanup",function(){return{elements:s.get()}}),a=(g?u.altRowTemplate:u.rowTemplate)(f),h.replaceWith(a),a=u._items(p).eq(m);var k=[{dataItem:f}];for(v&&(h=h.add(n),n=u._relatedRow(a)[0],ne(a[0],n),a=a.add(n),k.push({dataItem:f})),u.angular("compile",function(){return{elements:a.get(),data:k}}),(o=u.options.selectable)&&h.hasClass("k-state-selected")&&u.select(a),d=s.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),m=0,c=u.columns.length;m<c;m++)r=u.columns[m],i=l.eq(m),o&&d.eq(m).hasClass("k-state-selected")&&i.addClass("k-state-selected"),r.field===t.field&&e('<span class="k-dirty"/>').prependTo(i);u.trigger("itemChange",{item:a,data:f,ns:he})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&((t=n.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),"object"==typeof i&&i instanceof fe.ui.Pager?n.pager=i:n.pager=new fe.ui.Pager(t,ye({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n=this,i=n.dataSource.aggregates(),r="",a=n.footerTemplate,o=n.options,s=n.footer||n.wrapper.find(".k-grid-footer");if(a){if(r=e(n._wrapFooter(a(i))),s.length){var l=r;n.angular("cleanup",function(){return{elements:s.get()}}),s.replaceWith(l),s=n.footer=l}else s=o.scrollable?n.footer=o.pageable?r.insertBefore(n.wrapper.children("div.k-grid-pager")):r.appendTo(n.wrapper):n.footer=r.insertBefore(n.tbody);n.angular("compile",function(){return{elements:s.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:xe(n.columns,function(e,t){return{column:e,aggregate:i[e.field]}})}})}else s&&!n.footer&&(n.footer=s);if(s.length&&(o.scrollable&&(t=s.attr("tabindex",-1).children(".k-grid-footer-wrap"),n.scrollables=n.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),n._footerWidth&&s.find("table").css("width",n._footerWidth),t)){var d=n.content.scrollLeft();!0!==o.scrollable&&o.scrollable.virtual&&!n.virtualScrollable&&(d=n.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(d)}n.lockedContent&&(n._appendLockedColumnFooter(),n._applyLockedContainersWidth(),n._syncLockedFooterHeight())},_wrapFooter:function(t){var n=this,i="",r=fe.support.mobileOS?0:fe.support.scrollbar();return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(Ye?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i.css(Ge?"padding-left":"padding-right",r),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,i,r,a,o,s=this,l=P(s.columns),d=s.options,c=d.columnMenu,u=Ce(s.columns,function(e){return e.columns!==t}).length>0,p=this._isMobile,f=d.$angular;if(c){"boolean"==typeof c&&(c={});for(var h=0,g=(o=L(s.thead)).length;h<g;h++){n=l[h];var m=o.eq(h);n.command||!n.field&&!m.attr("data-"+fe.ns+"field")||((e=m.data("kendoColumnMenu"))&&e.destroy(),r=!1!==n.sortable&&!1!==c.sortable&&!1!==d.sortable&&ye({},d.sortable,{compare:(n.sortable||{}).compare}),a=!(!d.filterable||!1===n.filterable||!1===c.filterable)&&ye({pane:s.pane},d.filterable,n.filterable),n.filterable&&n.filterable.dataSource&&(a.forceUnique=!1,a.checkSource=n.filterable.dataSource),a&&(a.format=n.format),i={dataSource:s.dataSource,values:n.values,columns:c.columns,sortable:r,filterable:a,messages:c.messages,owner:s,closeCallback:function(e){re(e.closest("table"),!0)},init:function(e){s.trigger("columnMenuInit",{field:e.field,container:e.container})},pane:s.pane,filter:p?":not(.k-column-active)":"",lockedColumns:!u&&!1!==n.lockable&&z(l).length>0},f&&(i.$angular=f),m.kendoColumnMenu(i))}}},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i=this,r=P(i.columns),a=i.options.filterable;if(a&&typeof a.mode==qe&&-1==a.mode.indexOf("menu")&&(a=!1),a&&!i.options.columnMenu)for(var o=0,s=(t=L(i.thead)).length;o<s;o++)if(n=t.eq(o),!1!==r[o].filterable&&!r[o].command&&(r[o].field||n.attr("data-"+fe.ns+"field"))){(e=n.data("kendoFilterMenu"))&&e.destroy();var l=r[o].filterable,d=ye({},a,l,{dataSource:i.dataSource,values:r[o].values,format:r[o].format,closeCallback:function(e){re(e.closest("table"),!0)},init:function(e){i.trigger("filterMenuInit",{field:e.field,container:e.container})},pane:i.pane});l&&l.messages&&(d.messages=ye(!0,{},a.messages,l.messages)),l&&l.dataSource&&(d.forceUnique=!1,d.checkSource=l.dataSource),l&&l.multi?n.kendoFilterMultiCheck(d):n.kendoFilterMenu(d)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var n=P(t.columns),i=t.options.filterable,r=t.thead.find(".k-filter-row");this._updateHeader(this.dataSource.group().length);for(var a=0;a<n.length;a++){var o,s=n[a],l=t.options.filterable.operators,d=!1,c=e("<th/>"),u=s.field;if(s.hidden&&c.hide(),r.append(c),u&&!1!==s.filterable){var p=s.filterable&&s.filterable.cell||{};(o=t.options.dataSource)instanceof ge&&(o=t.options.dataSource.options);var f=ye(!0,{},i.messages);if(s.filterable&&ye(!0,f,s.filterable.messages),!1===p.enabled){c.html("&nbsp;");continue}p.dataSource&&(o=p.dataSource,d=!0),s.filterable&&s.filterable.operators&&(l=s.filterable.operators),e("<span/>").attr(fe.attr("field"),u).kendoFilterCell({dataSource:t.dataSource,suggestDataSource:o,customDataSource:d,field:u,messages:f,values:s.values,template:p.template,delay:p.delay,inputWidth:p.inputWidth,suggestionOperator:p.suggestionOperator,minLength:p.minLength,dataTextField:p.dataTextField,operator:p.operator,operators:l,showOperators:p.showOperators}).appendTo(c)}else c.html("&nbsp;")}}},_sortable:function(){var e,t,n,i=this,r=P(i.columns),a=i.options.sortable;if(a){for(var o=L(i.thead),s=0,l=o.length;s<l;s++)!1!==(e=r[s]).sortable&&!e.command&&e.field&&((t=(n=o.eq(s)).data("kendoColumnSorter"))&&t.destroy(),n.attr("data-"+fe.ns+"field",e.field).kendoColumnSorter(ye({},a,e.sortable,{dataSource:i.dataSource,aria:!0,filter:":not(.k-column-active)"})));o=null}},_columns:function(t){var n,i,r=this,a=r.table,o=a.find("col"),s=r.options.dataSource;if(t=t.length?t:xe(a.find("th"),function(t,n){var i=(t=e(t)).attr(fe.attr("sortable")),r=t.attr(fe.attr("filterable")),a=t.attr(fe.attr("type")),s=t.attr(fe.attr("groupable")),l=t.attr(fe.attr("field")),d=t.attr(fe.attr("title")),c=t.attr(fe.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:a,title:d,sortable:"false"!==i,filterable:"false"!==r,groupable:"false"!==s,menu:c,template:t.attr(fe.attr("template")),width:o.eq(n).css("width")}}),n=!(r.table.find("tbody tr").length>0&&(!s||!s.transport)),r.options.scrollable){var d=t;if(i=z(t),t=N(t),i.length>0&&0===t.length)throw new Error("There should be at least one non locked column");G(r.element.find("tr:has(th):first").find("th:not(.k-group-cell)"),d),t=i.concat(t)}r.columns=l(t,n)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,r,a){var o,s,l=this,d=ye({},fe.Template,l.options.templateSettings),c=t.length,u={storage:{},count:0},p=l._hasDetails(),f=[],h=l._groups();if(!e){for(e="<tr",r&&f.push("k-alt"),p&&f.push("k-master-row"),f.length&&(e+=' class="'+f.join(" ")+'"'),c&&(e+=" "+fe.attr("uid")+'="#='+fe.expr("uid",d.paramName)+'#"'),e+=" role='row'>",h>0&&!a&&(e+=n(h)),p&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),o=0;o<c;o++)typeof(s=t[o]).template,e+="<td"+i(s.attributes)+" role='gridcell'>",e+=l._cellTmpl(s,u),e+="</td>";e+="</tr>"}return d.paramName="d",e=fe.template(e,d),u.count>0?De(e,u.storage):e},_headerCellText:function(e){var t=this,n=ye({},fe.Template,t.options.templateSettings),i=e.headerTemplate,r=typeof i,a=e.title||e.field||"";return"function"===r?a=fe.template(i,n)({}):r===qe&&(a=i),a},_cellTmpl:function(e,t){var n,i,r=this,a=ye({},fe.Template,r.options.templateSettings),o=e.template,s=a.paramName,l=e.field,d="",c=e.format,u=typeof o,p=e.values;if(e.command){if(Te(e.command)){for(n=0,i=e.command.length;n<i;n++)d+=r._createButton(e.command[n]);return d.replace(Ue,"\\#")}return r._createButton(e.command).replace(Ue,"\\#")}return"function"===u?(t.storage["tmpl"+t.count]=o,d+="#=this.tmpl"+t.count+"("+s+")#",t.count++):u===qe?d+=o:p&&p.length&&we(p[0])&&"value"in p[0]&&l?(d+="#var v ="+fe.stringify($(p)).replace(Ue,"\\#")+"#",d+="#var f = v[",a.useWithBlock||(d+=s+"."),d+=l+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(We,"\\$1")+'",'),d+=l?(l=fe.expr(l,s))+"==null?'':"+l:"''",c&&(d+=")"),d+="#"),d},_templates:function(){var t=this,n=t.options,i=t.dataSource,r=i.group(),a=t.footer||t.wrapper.find(".k-grid-footer"),o=i.aggregate(),s=P(t.columns),l=P(z(t.columns)),d=n.scrollable?P(N(t.columns)):s;if(n.scrollable&&l.length){if(n.rowTemplate||n.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,d,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,d,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,d),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,d,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!He(o)||!He(o)&&!a.length||Ce(s,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(s,o,"footerTemplate","k-footer-template")),r&&Ce(s,function(e){return e.groupFooterTemplate}).length&&(o=e.map(r,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(d,o,"groupFooterTemplate","k-group-footer",l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,o,"groupFooterTemplate","k-group-footer")))},_footerTmpl:function(e,t,r,a,o){var s,l,d,c,u,p=this,f=ye({},fe.Template,p.options.templateSettings),h=f.paramName,g="",m={},v=0,k={},b=p._groups(),_=p.dataSource._emptyAggregates(t);for(g+='<tr class="'+a+'">',b>0&&!o&&(g+=n(b)),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),s=0,l=e.length;s<l;s++)c=typeof(d=(u=e[s])[r]),g+="<td"+i(u.footerAttributes)+">",d?("function"!==c&&(k=_[u.field]?ye({},f,{paramName:h+"['"+u.field+"']"}):{},d=fe.template(d,k)),m["tmpl"+v]=d,g+="#=this.tmpl"+v+"("+h+")#",v++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=fe.template(g,f),v>0?De(g,m):g},_detailTmpl:function(e){var t=this,i="",r=ye({},fe.Template,t.options.templateSettings),a=r.paramName,o={},s=0,l=t._groups(),d=h(P(t.columns)).length,c=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">","function"===c?(o["tmpl"+s]=e,i+="#=this.tmpl"+s+"("+a+")#",s++):i+=e,i+="</td></tr>",i=fe.template(i,r),s>0?De(i,o):i},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events.detailInit||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==qe&&-1!=t.mode.indexOf("row"),i=this.columns,r=e.grep(i,function(e,t){return!1===e.filterable});return i.length&&r.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&z(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on(Be+Oe,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,r,a=e(this),o=a.hasClass("k-plus"),s=a.closest("tr.k-master-row"),l=t.detailTemplate,d=t._hasDetails();return a.toggleClass("k-plus",!o).toggleClass("k-minus",o),i=s.next(),d&&!i.hasClass("k-detail-row")&&(r=t.dataItem(s),i=e(l(r)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:r}]}}),t.trigger("detailInit",{masterRow:s,detailRow:i,data:r,detailCell:i.find(".k-detail-cell")})),t.trigger(o?"detailExpand":"detailCollapse",{masterRow:s,detailRow:i}),i.toggle(o),t._current&&t._current.attr("aria-expanded",o),n.preventDefault(),!1})},dataItem:function(t){if(!(t=e(t)[0]))return null;var n,i,r=this.tbody.children(),a=/k-grouping-row|k-detail-row|k-group-footer/,o=t.sectionRowIndex;for(i=o,n=0;n<o;n++)a.test(r[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,n){var r,a,o,s,l,d=this,c="",u=P(d.columns);for(r=0,s=e.length;r<s;r++){a=e[r].column||e[r],o=d._headerCellText(a),l="";var p=Se(a,u);a.command?(c+="<th"+i(a.headerAttributes),n&&!e[r].colSpan&&(c+=" rowspan='"+n+"'"),p>-1&&(c+=fe.attr("index")+"='"+p+"'"),c+=">"+o+"</th>"):(a.field&&(l=fe.attr("field")+"='"+a.field+"' "),c+="<th role='columnheader' "+l,n&&!e[r].colSpan&&(c+=" rowspan='"+n+"'"),e[r].colSpan>1&&(c+='colspan="'+(e[r].colSpan-F(a.columns))+'" ',c+=fe.attr("colspan")+"='"+e[r].colSpan+"'"),a.title&&(c+=fe.attr("title")+'="'+a.title.replace(/'/g,"'")+'" '),a.groupable!==t&&(c+=fe.attr("groupable")+"='"+a.groupable+"' "),a.aggregates&&a.aggregates.length&&(c+=fe.attr("aggregates")+"='"+a.aggregates+"'"),p>-1&&(c+=fe.attr("index")+"='"+p+"'"),c+=i(a.headerAttributes),c+=">"+o+"</th>")}return c},_appendLockedColumnContent:function(){var t,n,i,r,a,o=this.columns,s=this.table.find("colgroup"),l=s.find("col:not(.k-group-col,.k-hierarchy-col)"),d=e(),c=0,u=0;for(t=0,n=o.length;t<n;t++)if(o[t].locked)if(f(o[t])){for(r=1,o[t].columns&&(r=P(o[t].columns).length-F(o[t].columns)),r=r||1,a=0;a<r;a++)d=d.add(l.eq(t+u+a-c));u+=r-1}else c++;i=e('<div class="k-grid-content-locked"><table'+(Ye?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),s.detach(),i.find("colgroup").append(d),s.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,r=i.footer,a=r.find(".k-footer-template>td"),o=r.find(".k-grid-footer-wrap>table>colgroup>col"),s=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),d=e(),c=e();for(d=d.add(a.filter(".k-group-cell")),t=0,n=P(z(i.columns)).length;t<n;t++)d=d.add(a.eq(t+l));for(c=c.add(o.filter(".k-group-col")),t=0,n=P(M(i.columns)).length;t<n;t++)c=c.add(o.eq(t+l));d.appendTo(s.find("tr")),c.appendTo(s.find("colgroup")),i.lockedFooter=s.prependTo(r)},_appendLockedColumnHeader:function(t){var n,i,r,a,o,s,l,d,c,u=this,p=this.columns,h=[],m=0,v=e(),k=u._hasFilterRow(),b=0,_=e(),w=0,y=e();a=u.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),l=u.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),d=u.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var x=0;for(n=0,r=p.length;n<r;n++){if(p[n].locked){if(c=l.eq(n),w=P(p[n].columns||[]).length,f(p[n])){var C;p[n].columns&&(C=w-F(p[n].columns)),C=C||1;for(var T=0;T<C;T++)v=v.add(a.eq(n+x+T-m));x+=C-1}E([p[n]],q(c),h,0,0),w=w||1;for(var S=0;S<w;S++)_=_.add(d.eq(b+S));b+=w}p[n].columns&&(m+=F(p[n].columns)),f(p[n])||m++}if(h.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table'+(Ye?' cellspacing="0"':"")+"><colgroup/><thead>",i+=new Array(h.length+1).join("<tr></tr>"),(a=(s=e(i+=(k?'<tr class="k-filter-row" />':"")+"</thead></table></div>")).find("colgroup")).append(u.thead.prev().find("col.k-group-col").add(v)),o=s.find("thead tr:not(.k-filter-row)"),n=0,r=h.length;n<r;n++)y=g(h[n]),o.eq(n).append(u.thead.find("tr:eq("+n+") .k-group-cell").add(y));var D=I(this.thead);h.length<D&&A(s,D-h.length),s.find(".k-filter-row").append(u.thead.find(".k-filter-row .k-group-cell").add(_)),this.lockedHeader=s.prependTo(t),this.thead.find(".k-group-cell").remove(),this._syncLockedHeaderHeight()}},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);fe.destroy(e),e.off(Oe).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i=this,r=i.columns,a=i._hasDetails()&&r.length,o=i._hasFilterRow(),s="",l=i.table.find(">thead"),d=i.element.find("thead:first").length>0;if(l.length||(l=e("<thead/>").insertBefore(i.tbody)),i.lockedHeader&&i.thead?((n=i.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),n=e(),i._removeLockedContainers()):n=d?i.element.find("thead:first tr:has(th):not(.k-filter-row)"):i.element.find("tr:has(th):first"),!n.length&&!(n=l.children().first()).length){var c=[{rowSpan:1,cells:[],index:0}];for(i._prepareColumns(c,r),t=0;t<c.length;t++)s+="<tr>",a&&(s+='<th class="k-hierarchy-cell">&nbsp;</th>'),s+=i._createHeaderCells(c[t].cells,c[t].rowSpan),s+="</tr>";n=e(s)}if(o){var u=e("<tr/>");u.addClass("k-filter-row"),a&&u.prepend('<th class="k-hierarchy-cell">&nbsp;</th>');var p=l.find(".k-filter-row");p.length&&(fe.destroy(p),p.remove()),l.append(u)}n.children().length?a&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell">&nbsp;</th>'):(s="",a&&(s+='<th class="k-hierarchy-cell">&nbsp;</th>'),s+=i._createHeaderCells(r),n.html(s)),n.attr("role","row").find("th").addClass("k-header"),i.options.scrollable||l.addClass("k-grid-header"),n.find("script").remove().end().prependTo(l),i.thead&&i._destroyColumnAttachments(),i.thead=l.attr("role","rowgroup"),i._sortable(),i._filterable(),i._filterRow(),i._scrollable(),i._updateCols(),i._columnMenu(),this.options.scrollable&&z(this.columns).length&&(i._appendLockedColumnHeader(i.thead.closest(".k-grid-header")),i._appendLockedColumnContent(),i.lockedContent.bind("DOMMouseScroll"+Oe+" mousewheel"+Oe,De(i._wheelScroll,i)),i._applyLockedContainersWidth()),i._updateColumnCellIndex(),i._updateFirstColumnClass(),i._resizable(),i._draggable(),i._reorderable(),i.groupable&&i._attachGroupable()},_updateFirstColumnClass:function(){var t=this,n=t.columns||[];if(!(t._hasDetails()&&n.length)&&!t._groups()){var i=e(),r=t.thead.find(">tr:not(.k-filter-row):not(:first)");n=N(n),r.length&&n[0]&&!n[0].columns&&(i=i.add(r)),t._isLocked()&&(r=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),n=z(t.columns),r.length&&n[0]&&!n[0].columns&&(i=i.add(r))),i.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")})}},_prepareColumns:function(e,t,n,i){for(var r=i||e[e.length-1],a=e[r.index+1],o=0,s=0;s<t.length;s++){var l={column:t[s],colSpan:0};r.cells.push(l),t[s].columns&&t[s].columns.length&&(a||(a={rowSpan:0,cells:[],index:e.length},e.push(a)),l.colSpan=t[s].columns.length,this._prepareColumns(e,t[s].columns,l,a),o+=l.colSpan-1,r.rowSpan=e.length-r.index)}n&&(n.colSpan+=o)},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.content;this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar);var i=n.scrollTop(),r=fe.wheelDeltaY(t);r&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Oe,!1),n.scrollTop(i+-r))}},_isLocked:function(){return null!=this.lockedHeader},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&j(e=e||this.lockedHeader.find("table").add(this.lockedTable),O(M(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?j(e,O(R(this.columns)),this._hasDetails(),0):j(e,O(h(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n=this;e=e.toJSON();for(t in e)n.columns.push({field:t});n._thead(),n._templates()}},_rowsHtml:function(e,t){var n,i,r=this,a="",o=t.rowTemplate,s=t.altRowTemplate;for(n=0,i=e.length;n<i;n++)a+=n%2?s(e[n]):o(e[n]),r._data.push(e[n]);return a},_groupRowHtml:function(e,t,n,i,r,a){var o,s,l=this,d="",c=e.field,u=Ce(P(l.columns),function(e){return e.field==c})[0]||{},p=u.groupHeaderTemplate,f=(u.title||c)+": "+Y(e.value,u.format,u.values),h=l._groupAggregatesDefaultObject||{},g=ye({},h,e.aggregates),m=ye({},{field:e.field,value:e.value,aggregates:g},e.aggregates[e.field]),v=(r.rowTemplate,r.altRowTemplate,r.groupFooterTemplate),k=e.items;if(p&&(f="function"==typeof p?p(m):fe.template(p)(m)),d+=i(t,n,f),e.hasSubgroups)for(o=0,s=k.length;o<s;o++)d+=l._groupRowHtml(k[o],a?t:t-1,n+1,i,r,a);else d+=l._rowsHtml(k,r);return v&&(d+=v(g)),d},collapseGroup:function(t){t=e(t);var n,i,r,a,o,s=this.options.groupable.showFooter?0:1,l=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?l=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(l=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td:first").attr("aria-expanded",!1),r=0,a=(t=t.nextAll("tr")).length;r<a&&(o=t.eq(r),i=o.find(".k-group-cell").length,o.hasClass("k-grouping-row")?s++:o.hasClass("k-group-footer")&&s--,!(i<=n||o.hasClass("k-group-footer")&&s<0));r++)o.hide(),l.eq(r).hide()},expandGroup:function(t){t=e(t);var n,i,r,a,o,s=this,l=s.options.groupable.showFooter,d=e(),c=[],u=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td:first").attr("aria-expanded",!0),a=0,o=(t=t.nextAll("tr")).length;a<o&&(i=t.eq(a),!((r=i.find(".k-group-cell").length)<=n));a++)r!=n+1||i.hasClass("k-detail-row")||(i.show(),d.eq(a).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&s.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),d.eq(a+1).show())),i.hasClass("k-grouping-row")&&(l&&c.push(i.is(":visible")),u++),i.hasClass("k-group-footer")&&(l&&i.toggle(c.pop()),1==u?(i.show(),d.eq(a).show()):u--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,r=i.find("tr.k-filter-row").find("th.k-group-cell").length,a=i.find("tr:first").find("th.k-group-cell").length,o=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>a?(e(new Array(t-a+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&o.find("th.k-group-cell").hide()):t<a&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>r&&e(new Array(t-r+1).join('<th class="k-group-cell k-header">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=ee(t.eq(0)),t.width(n._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable)).width(ee(t.eq(0))))},hideColumn:function(t){var n,i,r,a,s,l,d,c,g,m=this,v=0,k=m.footer||m.wrapper.find(".k-grid-footer"),b=m.columns,_=m.lockedHeader?L(m.lockedHeader.find(">table>thead")).filter(p).length:0;if((t="number"==typeof t?b[t]:we(t)?Ce(S(b),function(e){return e===t})[0]:Ce(S(b),function(e){return e.field===t})[0])&&f(t))if(t.columns&&t.columns.length){for(l=C(t,b),u(t,!1),K(o(e(">table>thead",m.lockedHeader),m.thead,">tr:eq("+l.row+")>th"),l.cell,!1),r=0;r<t.columns.length;r++)this.hideColumn(t.columns[r]);m.trigger("columnHide",{column:t})}else{g=Se(t,h(P(b))),u(t,!1),m._setParentsVisibility(t,!1),m._templates(),m._updateCols(),m._updateLockedCols();var w=m.thead;if(d=g,m.lockedHeader&&_>g?w=m.lockedHeader.find(">table>thead"):d-=_,n=L(w).filter(p).eq(d),n[0].style.display="none",K(o(e(">table>thead",m.lockedHeader),m.thead,">tr.k-filter-row>th"),g,!1),k[0]&&(m._updateCols(k.find(">.k-grid-footer-wrap>table")),m._updateLockedCols(k.find(">.k-grid-footer-locked>table")),K(k.find(".k-footer-template>td"),g,!1)),m.lockedTable&&_>g?Q(m.lockedTable.find(">tbody>tr"),g):Q(m.tbody.children(),g-_),m.lockedTable)m._updateTablesWidth(),m._applyLockedContainersWidth(),m._syncLockedContentHeight(),m._syncLockedHeaderHeight(),m._syncLockedFooterHeight();else{for(r=0,c=(a=m.thead.prev().find("col")).length;r<c;r+=1){if(!(s=a[r].style.width)||-1!=s.indexOf("%")){v=0;break}v+=parseInt(s,10)}i=e(">.k-grid-header table:first,>.k-grid-footer table:first",m.wrapper).add(m.table),m._footerWidth=null,v&&(i.each(function(){this.style.width=v+"px"}),m._footerWidth=v),$e.msie&&8==$e.version&&(i.css("display","inline-table"),setTimeout(function(){i.css("display","table")},1))}m._updateFirstColumnClass(),m.trigger("columnHide",{column:t})}},_setParentsVisibility:function(t,n){var i,r,a,s,l,d=this.columns,p=[],f=n?function(e){return h(e.columns).length&&e.hidden}:function(e){return!h(e.columns).length&&!e.hidden};if(c(t,d,p)&&p.length)for(i=p.length-1;i>=0;i--)a=w(r=p[i],d),s=o(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+a.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(a.cell),f(r)&&(u(r,n),s[0].style.display=n?"":"none"),s.filter("["+fe.attr("colspan")+"]").length&&(l=parseInt(s.attr(fe.attr("colspan")),10),s[0].colSpan=l-F(r.columns)||1)},showColumn:function(t){var n,i,r,a,s,l,d,c,p,h,g=this,m=g.columns,v=g.footer||g.wrapper.find(".k-grid-footer"),k=g.lockedHeader?L(g.lockedHeader.find(">table>thead")).length:0;if((t="number"==typeof t?m[t]:we(t)?Ce(S(m),function(e){return e===t})[0]:Ce(S(m),function(e){return e.field===t})[0])&&!f(t))if(t.columns&&t.columns.length){for(d=C(t,m),u(t,!0),K(o(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+d.row+")>th"),d.cell,!0),n=0;n<t.columns.length;n++)this.showColumn(t.columns[n]);g.trigger("columnShow",{column:t})}else{h=Se(t,P(m)),u(t,!0),g._setParentsVisibility(t,!0),g._templates(),g._updateCols(),g._updateLockedCols();var b=g.thead;if(l=h,g.lockedHeader&&k>h?b=g.lockedHeader.find(">table>thead"):l-=k,r=L(b).eq(l),r[0].style.display="",K(o(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>th"),h,!0),v[0]&&(g._updateCols(v.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(v.find(">.k-grid-footer-locked>table")),K(v.find(".k-footer-template>td"),h,!0)),g.lockedTable&&k>h?X(g.lockedTable.find(">tbody>tr"),h):X(g.tbody.children(),h-k),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight();else if(a=e(">.k-grid-header table:first,>.k-grid-footer table:first",g.wrapper).add(g.table),t.width){for(s=0,n=0,i=(p=g.thead.prev().find("col")).length;n<i;n+=1){if((c=p[n].style.width).indexOf("%")>-1){s=0;break}s+=parseInt(c,10)}g._footerWidth=null,s&&(a.each(function(){this.style.width=s+"px"}),g._footerWidth=s)}else a.width("");g._updateFirstColumnClass(),g.trigger("columnShow",{column:t})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),fe.ui.progress(t,e)},_resize:function(e,t){this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var t=ke();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,r=i.dataSource.view(),a=i.options.navigatable,o=e(i.current()),s=!1,l=(i.dataSource.group()||[]).length,d=i.content&&i.content.scrollLeft(),c=l+O(h(i.columns)).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(a&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(n=0,(s=o.is("th"))&&(n=i.thead.find("th:not(.k-group-cell)").index(o))),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(r[0],l)),c=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(r,c,l),i._renderLockedContent(r,c,l),i._footer(),i._setContentHeight(),i._setContentWidth(d),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.touchScroller?i.touchScroller.movable.trigger("change"):i.content.trigger("scroll")),n>=0&&(i._removeCurrent(),s?i.current(i.thead.find("th:not(.k-group-cell)").eq(n)):i.current(i.table.add(i.lockedTable).find(Re).first()),i._current&&re(i._current.closest("table")[0],!0)),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i.trigger("dataBound")))},_angularItems:function(e){fe.ui.DataBoundWidget.fn._angularItems.call(this,e),this._angularGroupItems(e)},_angularGroupItems:function(t){var n=this;n._group&&n.angular(t,function(){return{elements:n.tbody.children(".k-grouping-row"),data:e.map(J(n.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,n){var i,r,a=this,o="",s=null!=a.lockedContent,l={rowTemplate:a.rowTemplate,altRowTemplate:a.altRowTemplate,groupFooterTemplate:a.groupFooterTemplate};if(t=s?t-O(M(a.columns)).length:t,n>0)for(t=s?t-n:t,a.detailTemplate&&t++,a.groupFooterTemplate&&(a._groupAggregatesDefaultObject=a.dataSource.aggregates()),i=0,r=e.length;i<r;i++)o+=a._groupRowHtml(e[i],t,0,s?pe:ue,l,s);else o+=a._rowsHtml(e,l);a.tbody=W(a.tbody,a.table,o)},_renderLockedContent:function(e,t,n){var i,r,a="",o={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){var s=this.lockedTable;if(n>0)for(t-=h(P(N(this.columns))).length,i=0,r=e.length;i<r;i++)a+=this._groupRowHtml(e[i],t,0,ue,o);else a=this._rowsHtml(e,o);W(s.children("tbody"),s,a),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i=e[0].rows,r=i.length,a=t[0].rows,o=e.add(t),s=o.length,l=[];for(n=0;n<r&&a[n];n++){i[n].style.height&&(i[n].style.height=a[n].style.height="");var d=i[n].offsetHeight,c=a[n].offsetHeight,u=0;d>c?u=d:d<c&&(u=c),l.push(u)}for(n=0;n<s;n++)o[n].style.display="none";for(n=0;n<r;n++)l[n]&&(i[n].style.height=a[n].style.height=l[n]+1+"px");for(n=0;n<s;n++)o[n].style.display=""}});fe.ExcelMixin&&fe.ExcelMixin.extend(Grid.prototype),fe.PDFMixin&&(fe.PDFMixin.extend(Grid.prototype),Grid.prototype._drawPDF=function(n){function i(){l&&c!==t?(s.unbind("change",r),s.one("change",function(){a.resolve(d)}),s.page(c)):a.resolve(d)}function r(){o._drawPDFShadow().done(function(e){var t=s.page(),r=l?s.totalPages():1,a={page:e,pageNumber:t,progress:t/r,totalPages:r};n.notify(a),d.append(a.page),t<r?s.page(t+1):i()}).fail(function(e){a.reject(e)})}var a=new e.Deferred,o=this,s=o.dataSource,l=o.options.pdf.allPages;this._initPDFProgress(n);var d=new fe.drawing.Group,c=s.page();return l?(s.bind("change",r),s.page(1)):r(),a.promise()},Grid.prototype._initPDFProgress=function(t){var n=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");n.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(n);var i=e("<div class='k-loading-pdf-progress'>").appendTo(n).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");t.progress(function(e){i.value(e.progress)}).always(function(){fe.destroy(n),n.remove()})}),he.plugin(Xe),he.plugin(Qe)}(jQuery);